<<<<<<< Updated upstream
_type: export
__export_format: 4
__export_date: 2024-09-05T15:53:11.127Z
__export_source: insomnia.desktop.app:v2023.1.0
resources:
  - _id: req_bd2c0a4121704752a13491d87728f8c9
    parentId: fld_e3d8673e3731465ba0b815d9c26940e1
    modified: 1725547056940
    created: 1707909564664
    url: "{{ _.AUTH_SERVER_URI }}/connect/token"
    name: 1A. Generate access token
    description: >-
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/generateaccesstoken)


      Use this request to generate an `access_token` for most of the requests in this collection except for VRP and Signup+ requests.


      You can reference the result of this request as a 'Bearer' token for any new requests you make.
    method: POST
    body:
      mimeType: application/x-www-form-urlencoded
      params:
        - description: ""
          id: pair_c22e9af536f74fe0a5e747fc6eecad6d
          name: client_id
          value: "{{ _.CLIENT_ID }}"
        - description: ""
          id: pair_df17b794d78f4d03be3b6c37527422c8
          name: client_secret
          value: "{{ _.CLIENT_SECRET }}"
        - description: ""
          id: pair_b84a19cd1a1c4b23890b5d38cd2d94f1
          name: scope
          value: payments
        - description: ""
          id: pair_6e922ac379d94ced8366d885e25bf73f
          name: grant_type
          value: client_credentials
    parameters: []
    headers:
      - id: pair_26023e9f97d54b1d8845ae4f2493e413
        name: Content-Type
        value: application/x-www-form-urlencoded
    authentication: {}
    metaSortKey: -1612882494823.3125
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: fld_e3d8673e3731465ba0b815d9c26940e1
    parentId: wrk_35ba728d03c548b68b087106738bcdec
    modified: 1723734613355
    created: 1707909564663
    name: 1. Authentication
    description: ""
    environment: {}
    environmentPropertyOrder: {}
    metaSortKey: -1635961782159
    _type: request_group
  - _id: wrk_35ba728d03c548b68b087106738bcdec
    parentId: null
    modified: 1725028877732
    created: 1718359847210
    name: TrueLayer API collection
    description: This collection contains a range of requests that let you test
      TrueLayer's **Payments**, **VRP**, **Payouts**, and **Signup+** products.
    scope: collection
    _type: workspace
  - _id: req_e61a49eeb0ed4f2fb5b8074a71ea3f98
    parentId: fld_e3d8673e3731465ba0b815d9c26940e1
    modified: 1725547133394
    created: 1707909564664
    url: "{{ _.AUTH_SERVER_URI }}/connect/token"
    name: 1B. Generate access token - Mandate
    description: >-
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/generateaccesstoken)


      Use this request to generate an `access_token` for the VRP-related requests in this collection.


      Note that payments on a mandate should also have the `recurring_payments:sweeping` or `recurring_payments:commercial` scopes, not just mandates themselves.
    method: POST
    body:
      mimeType: application/x-www-form-urlencoded
      params:
        - description: ""
          id: pair_c22e9af536f74fe0a5e747fc6eecad6d
          name: client_id
          value: "{{ _.CLIENT_ID }}"
        - description: ""
          id: pair_df17b794d78f4d03be3b6c37527422c8
          name: client_secret
          value: "{{ _.CLIENT_SECRET }}"
        - description: ""
          id: pair_b84a19cd1a1c4b23890b5d38cd2d94f1
          name: scope
          value: recurring_payments:sweeping
          disabled: true
        - description: ""
          id: pair_6e922ac379d94ced8366d885e25bf73f
          name: grant_type
          value: client_credentials
          disabled: false
        - id: pair_60b83516aa964b7688b31d7bb4593622
          name: scope
          value: payments recurring_payments:sweeping
          description: ""
    parameters: []
    headers:
      - id: pair_29f5d394fc6d49c9a02a160176f2129e
        name: Content-Type
        value: application/x-www-form-urlencoded
      - description: ""
        id: pair_a7921d11858c47ed89f874b6eb2b069f
        name: ""
        value: ""
    authentication: {}
    metaSortKey: -1612882494723.3125
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_6a1d85dcef0d45f7985245d59ef95360
    parentId: fld_e3d8673e3731465ba0b815d9c26940e1
    modified: 1725547159019
    created: 1723737465425
    url: "{{ _.AUTH_SERVER_URI }}/connect/token"
    name: 1C. Generate access token - Signup+
    description: >-
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/generateaccesstoken)


      Use this request to generate an `access_token` for the Signup+ requests in this collection.
    method: POST
    body:
      mimeType: application/x-www-form-urlencoded
      params:
        - description: ""
          id: pair_c22e9af536f74fe0a5e747fc6eecad6d
          name: client_id
          value: "{{ _.CLIENT_ID }}"
        - description: ""
          id: pair_df17b794d78f4d03be3b6c37527422c8
          name: client_secret
          value: "{{ _.CLIENT_SECRET }}"
        - description: ""
          id: pair_b84a19cd1a1c4b23890b5d38cd2d94f1
          name: scope
          value: payments signupplus
        - description: ""
          id: pair_6e922ac379d94ced8366d885e25bf73f
          name: grant_type
          value: client_credentials
    parameters: []
    headers:
      - id: pair_26023e9f97d54b1d8845ae4f2493e413
        name: Content-Type
        value: application/x-www-form-urlencoded
    authentication: {}
    metaSortKey: -1612882494623.3125
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_8a54d092c1034b37b9e21d0813c18df0
    parentId: fld_96cc181a988d4356bce797c87830fb88
    modified: 1725548750191
    created: 1707909564665
    url: "{{ _.ENVIRONMENT_URI }}/v3/merchant-accounts"
    name: 2A. List merchant accounts
    description: >-
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/list-operating-accounts)

      The merchant accounts returned here are based on the `client_id` and `client_secret` you provided when you generated an `access_token`.


      In this Insomnia collection, these are likely stored in your environment variables.
    method: GET
    body: {}
    parameters: []
    headers: []
    authentication:
      token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
      type: bearer
    metaSortKey: -1635957334614.5
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: fld_96cc181a988d4356bce797c87830fb88
    parentId: wrk_35ba728d03c548b68b087106738bcdec
    modified: 1725378784314
    created: 1707909564665
    name: 2. Merchant accounts
    description: ""
    environment: {}
    environmentPropertyOrder: null
    metaSortKey: -1635944926822.625
    _type: request_group
  - _id: req_0f4557c0caac418e938984aea752a0f4
    parentId: fld_96cc181a988d4356bce797c87830fb88
    modified: 1724949229909
    created: 1707909564666
    url: "{{ _.ENVIRONMENT_URI }}/v3/merchant-accounts/{% prompt 'Merchant Account
      ID', '', '', '', false, true %}"
    name: 2B. Get merchant account details
    description: >-
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/get-operating-account)

      This endpoint returns various details about a given merchant account, such as its bank details and the current and available balance of the account.


      You specify the merchant account to return details about as a path parameter.
    method: GET
    body: {}
    parameters: []
    headers: []
    authentication:
      token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
      type: bearer
    metaSortKey: -1635918451979.75
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_9dbcbb34a3764acba445e3d1d7d4d8d9
    parentId: fld_96cc181a988d4356bce797c87830fb88
    modified: 1724949244826
    created: 1707909564666
    url: "{{ _.ENVIRONMENT_URI }}/v3/merchant-accounts/{% prompt 'Merchant Account
      ID', '', '', '', false, true %}/transactions"
    name: 2C. Get merchant account transactions
    description: >-
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/merchant-account-get-transactions)


      This endpoint returns a list of transactions and payment sources for your merchant account`id`, which you provide as a path parameter in your request.


      ## Pagination


      > By default, all `client_id`s made after December 2023 include a `pagination` object. It can be enabled for `client_id`s that were made earlier by including the `tl-enable-pagination:true` with your request.


      Pagination means that if your response would contain more than 1000 transactions, you receive 1000, and then make additional requests to get more. This avoids a problem where it would take a long time to retrieve transactions for merchant accounts with many transactions.


      If your response contains more than 2000 transactions, the final `pagination` object in the response contains a `next_cursor` object, with an associated string. If you include this string in your subsequent request, you'll receive the next page, which contains the next 2000 transactions. You can repeat this until the response no longer contains the `next_cursor` object.


      The **Query** and **Headers** tabs in this request in Insomnia enable you to test paginated responses.


      Learn more about [this endpoint](https://docs.truelayer.com/docs/get-your-merchant-account-transactions-or-payment-sources) and [pagination](https://docs.truelayer.com/docs/get-your-merchant-account-transactions-or-payment-sources#pagination-for-the-transactions-endpoint) in our docs.
    method: GET
    body: {}
    parameters:
      - description: ""
        id: pair_e51a46377bb941869e1d413bba2089bb
        name: from
        value: "{% prompt 'From Date', '', '2024-08-01T01:01:01Z', '', false, true %}"
      - description: ""
        id: pair_86e29d89e8584c3399b1a20e8eeec028
        name: to
        value: "{% now 'iso-8601', '' %}"
      - id: pair_4718c64d0df64b18a006fbd29f18026a
        name: cursor
        value: "{% response 'body', 'req_9dbcbb34a3764acba445e3d1d7d4d8d9',
          'b64::JC5wYWdpbmF0aW9uLm5leHRfY3Vyc29y::46b', 'always', 60 %}"
        description: ""
        disabled: true
    headers:
      - id: pair_94d12245e4874df4844c1bd44db90cc0
        name: Idempotency-Key
        value: "{% uuid 'v4' %}"
      - id: pair_6c2a0a5c876242e9bff0c7b78e8b54b8
        name: tl-enable-pagination
        value: "true"
        description: ""
        disabled: true
    authentication:
      token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
      type: bearer
    metaSortKey: -1635903870991.7188
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: false
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_aa093cf023824addb905e2dacf890cb5
    parentId: fld_96cc181a988d4356bce797c87830fb88
    modified: 1725547332407
    created: 1707909564667
    url: "{{ _.ENVIRONMENT_URI }}/v3/merchant-accounts/{% prompt 'Merchant Account
      ID', '', '', '', false, true %}/sweeping"
    name: 2D. Set up or update sweeping settings
    description: >-
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/merchant-account-setup-sweeping)


      Use this request to set up sweeping settings for your GBP merchant account.


      Note that while you can set the sweeping amount and frequency, and see these reflected in the sandbox environment in Console, sandbox doesn't actually sweep funds.
    method: POST
    body:
      mimeType: application/json
      text: |-
        {
         "max_amount_in_minor": 4000000,
         "frequency": "daily"
        }
    parameters: []
    headers:
      - id: pair_90e60343dbad4a4ebb8b23b84aa7a8be
        name: Content-Type
        value: application/json
      - id: pair_39d0907c65cc4eccacdc4cf5ad32cea6
        name: Idempotency-Key
        value: "{% uuid 'v4' %}"
    authentication:
      token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
      type: bearer
    metaSortKey: -1635889289953.6875
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_24ea9d673be94d13a4f68644083e3840
    parentId: fld_96cc181a988d4356bce797c87830fb88
    modified: 1725547343519
    created: 1707909564668
    url: "{{ _.ENVIRONMENT_URI }}/v3/merchant-accounts/{% prompt 'Merchant Account
      ID', '', '', '', false, true %}/sweeping"
    name: 2E. Set up or update sweeping settings - EUR merchant account
    description: >-
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/merchant-account-setup-sweeping)


      Use this request to set up sweeping settings for your GBP merchant account.


      Note that while you can set the sweeping amount and frequency, and see these reflected in the sandbox environment in Console, sandbox doesn't actually sweep funds.
    method: POST
    body:
      mimeType: application/json
      text: |-
        {
         "max_amount_in_minor": 400000,
         "currency": "EUR",
         "frequency": "daily"
        }
    parameters: []
    headers:
      - id: pair_90e60343dbad4a4ebb8b23b84aa7a8be
        name: Content-Type
        value: application/json
      - id: pair_39d0907c65cc4eccacdc4cf5ad32cea6
        name: Idempotency-Key
        value: "{% uuid 'v4' %}"
    authentication:
      token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
      type: bearer
    metaSortKey: -1635888074877.6016
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_681541101b6e4dab92d7935ab1bd409f
    parentId: fld_96cc181a988d4356bce797c87830fb88
    modified: 1725547500483
    created: 1707909564668
    url: "{{ _.ENVIRONMENT_URI }}/v3/merchant-accounts/{% prompt 'Merchant Account
      ID', '', '', '', false, true %}/sweeping"
    name: 2F. Get existing sweeping settings
    description: >-
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/merchant-account-get-sweeping)


      Use this request to check your existing sweeping settings for your merchant account without editing them.


      You can also check your sweeping settings in the **Merchant Account** tab in Console.
    method: GET
    body:
      mimeType: application/json
      text: ""
    parameters: []
    headers:
      - id: pair_90e60343dbad4a4ebb8b23b84aa7a8be
        name: Content-Type
        value: application/json
      - id: pair_39d0907c65cc4eccacdc4cf5ad32cea6
        name: Idempotency-Key
        value: "{% uuid 'v4' %}"
    authentication:
      token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
      type: bearer
    metaSortKey: -1635886859801.5156
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_d57df8e27cdf432a948690721fe3dde3
    parentId: fld_96cc181a988d4356bce797c87830fb88
    modified: 1725547491488
    created: 1707909564667
    url: "{{ _.ENVIRONMENT_URI }}/v3/merchant-accounts/{% prompt 'Merchant Account
      ID', '', '', '', false, true %}/sweeping"
    name: 2G. Delete sweeping settings
    description: >-
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/merchant-account-disable-sweeping)


      Use this request to delete the existing sweeping settings for a merchant account. You get a **204 No Response** response to your request, but this means it's successful.


      You can check it was successful with the **2F. Get existing sweeping settings** request.
    method: DELETE
    body:
      mimeType: application/json
      text: ""
    parameters: []
    headers:
      - id: pair_241b6a5210654e158b539f9ca0918e24
        name: Content-Type
        value: application/json
      - id: pair_38cc6ac41fc84541a356aea4b3a356e6
        name: Idempotency-Key
        value: "{% uuid 'v4' %}"
    authentication:
      token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
      type: bearer
    metaSortKey: -1635884429649.3438
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_936ba640eb7e4e388443a7adafe5968b
    parentId: fld_96cc181a988d4356bce797c87830fb88
    modified: 1725548353269
    created: 1724247859008
    url: "{{ _.ENVIRONMENT_URI }}/v3/merchant-accounts/{% prompt 'Merchant Account
      ID', '', '', '', false, true %}/payment-sources"
    name: 2H. Get merchant account payment sources
    description: >-
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/get-merchant-account-payment-sources)


      Use this endpoint to get the full list of payment sources that have made a payment to your merchant account. A payment source includes a user's name, payment source `id`, and bank details.


      You use the payment source `id` as the basis of a closed-loop payout.


      Note that in the sandbox environment, you only get a single payment source in response to this endpoint.
    method: GET
    body: {}
    parameters:
      - id: pair_56b2b30bf6a945f48d31b04d509d0568
        name: user_id
        value: "{% prompt 'User ID', 'Provide the user ID you want to return payment
          sources for.', '', '', false, true %}"
        description: ""
    headers: []
    authentication:
      type: bearer
      token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
    metaSortKey: -1635884429599.3438
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_b1202c141d7d46e1a7b516f320697587
    parentId: fld_b75a2aecb6824c269da05e0d414bdb6c
    modified: 1725548498420
    created: 1707909564688
    url: "{{ _.ENVIRONMENT_URI }}/v3/payments/{% prompt 'Payment ID', '', '', '',
      false, true %}"
    name: 3A. Get payment status
    description: >
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/get-payment-1)


      Use this request to check the [status of a payment](https://docs.truelayer.com/reference/payment-statuses), and retrieve other related information.


      Note that you can also get this information by [setting up webhooks](https://docs.truelayer.com/docs/configure-webhooks-for-your-integration), or by checking the [**Payments** page in Console](https://docs.truelayer.com/docs/payments-view).
    method: GET
    body: {}
    parameters: []
    headers: []
    authentication:
      token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
      type: bearer
    metaSortKey: -1647883794683.25
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: fld_b75a2aecb6824c269da05e0d414bdb6c
    parentId: wrk_35ba728d03c548b68b087106738bcdec
    modified: 1723737420465
    created: 1707909564677
    name: 3. Pay-ins
    description: ""
    environment: {}
    environmentPropertyOrder: null
    metaSortKey: -1635911216156.125
    _type: request_group
  - _id: req_a3417828f9f24a51aa33bfeeb272bb9d
    parentId: fld_b75a2aecb6824c269da05e0d414bdb6c
    modified: 1725548585966
    created: 1707909564689
    url: "{{ _.ENVIRONMENT_URI }}/v3/payments/{% prompt 'Payment ID', '', '', '',
      false, true %}/actions/cancel"
    name: 3B. Cancel payment
    description: >
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/cancel-payment)


      Use this endpoint to [cancel an existing payment](https://docs.truelayer.com/docs/cancel-a-payment). Note that a payment can only be canceled up to the `authorizing` status. Once it reaches `authorized` status, you can no longer cancel it.
    method: POST
    body:
      mimeType: application/json
      text: ""
    parameters: []
    headers:
      - id: pair_7c8e00b083cd4aad9c620b508f98ffd1
        name: Content-Type
        value: application/json
      - id: pair_602ca6c94aec43dbb42d6d4c60c1df9e
        name: Idempotency-Key
        value: "{% uuid 'v4' %}"
    authentication:
      token: "{% response 'body', 'req_42dac02e96cd4c4180227e29310e56a3',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
      type: bearer
    metaSortKey: -1647883794677
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_785b823bb82a4649951aac8cec360838
    parentId: fld_b4a9b9b1330e414f9a175829d25c1749
    modified: 1725548741664
    created: 1707909564684
    url: "{{ _.ENVIRONMENT_URI }}/v3/payments"
    name: 3C. Create payment
    description: >-
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/create-payment)


      Use this request to make a GBP payment into your GBP merchant account.


      You're prompted for your merchant account ID, which you can get through either:


      - The **2A. List merchant accounts** request in this collection.

      - The [**Merchant Account** dashboard in Console](https://docs.truelayer.com/docs/merchant-account-dashboard).
    method: POST
    body:
      mimeType: application/json
      text: >-
        {
        	"amount_in_minor": 1,
        	"currency": "GBP",
        	"payment_method": {
        		"provider_selection": {
        			"type": "user_selected"
        		},
        		"filter": {
        			"countries": [
        				"GB"
        			]
        		},
        		"type": "bank_transfer",
        		"beneficiary": {
        			"type": "merchant_account",
        			"merchant_account_id": "{% prompt 'Beneficiary Merchant Account ID', 'Please get your merchant_account_id by calling the GET List Merchant Accounts endpoint.', '', '', false, true %}",
        			"reference": "Test payment"
        		}
        	},
        	"user": {
        		"id": "f61c0ec7-0f83-414e-8e5f-aace86e0ed35",
        		"name": "Jonathan Sandbridge",
        		"email": "john@sandbridge.com",
        		"phone": "+44123456789",
        		"date_of_birth": "1992-11-28",
        		"address": {
        			"address_line1": "40 Finsbury Square",
        			"city": "London",
        			"state": "London",
        			"zip": "EC2A 1PX",
        			"country_code": "GB"
        		}
        	}
        }
    parameters: []
    headers:
      - id: pair_4901eb02eb9f41dfbff0b110f9bdd25d
        name: Content-Type
        value: application/json
      - id: pair_98be0a07c8ec4390bcaa878fd1d1a7c7
        name: Idempotency-Key
        value: "{% uuid 'v4' %}"
    authentication:
      token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 60 %}"
      type: bearer
    metaSortKey: -1647883846405
    isPrivate: false
    settingStoreCookies: false
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: fld_b4a9b9b1330e414f9a175829d25c1749
    parentId: fld_3c99c1c222a04f9ebc0e85dc10d90ada
    modified: 1724949388866
    created: 1707909564683
    name: Pay-in with hosted payment page
    description: ""
    environment: {}
    environmentPropertyOrder: null
    metaSortKey: -1647885020011
    _type: request_group
  - _id: fld_3c99c1c222a04f9ebc0e85dc10d90ada
    parentId: fld_b75a2aecb6824c269da05e0d414bdb6c
    modified: 1724949378635
    created: 1707909564683
    name: Pay-in to a merchant account
    description: ""
    environment: {}
    environmentPropertyOrder: null
    metaSortKey: -1647883794652
    _type: request_group
  - _id: req_1fdcb163ec3c47a8bb79320fcbfeed30
    parentId: fld_b4a9b9b1330e414f9a175829d25c1749
    modified: 1725460421287
    created: 1707909564684
    url: https://payment.truelayer-sandbox.com/payments#payment_id={% response
      'body', 'req_785b823bb82a4649951aac8cec360838', 'b64::JC5pZA==::46b',
      'never', 60 %}&resource_token={% response 'body',
      'req_785b823bb82a4649951aac8cec360838',
      'b64::JC5yZXNvdXJjZV90b2tlbg==::46b', 'always', 60 %}&return_uri={{
      _.RETURN_URI }}
    name: 3D. Create HPP
    description: >-
      ## How to use the HPP link


      To test the HPP payment authorisation flow:


      - Click on the 'Query' tab.

      - Copy the content and open it in a browser page.


      [Learn more about the hosted payment page in our docs](https://docs.truelayer.com/docs/hosted-payment-page).
    method: BLD
    body:
      mimeType: ""
      text: "\n\n"
    parameters: []
    headers:
      - name: Content-Type
        value: text/plain
        id: pair_c40ac9014ee64fc3919b95533b6bb692
    authentication:
      token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
      type: bearer
    metaSortKey: -1647883833479.25
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_fd7626cf2fae4434bb81ef0808761c06
    parentId: fld_6cac557973884f91b742bf456bcd0a68
    modified: 1724949436196
    created: 1707909564686
    url: "{{ _.ENVIRONMENT_URI }}/v3/payments"
    name: 3E. Create the payment
    description: >
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/create-payment)
    method: POST
    body:
      mimeType: application/json
      text: >-
        {
        	"amount_in_minor": 1,
        	"currency": "GBP",
        	"payment_method": {
        		"type": "bank_transfer",
        		"provider_selection": {
        			"type": "user_selected"
        		},
        		"filter": {
        			"countries": [
        				"GB"
        			]
        		},
        		"scheme_selection": {
        			"type": "instant_preferred"
        		},
        		"beneficiary": {
        			"type": "merchant_account",
        			"account_holder_name": "Merchant Account name",
        			"merchant_account_id": "{% prompt 'Beneficiary Merchant Account ID', 'Please get your merchant_account_id by calling the GET List Merchant Accounts endpoint. ', '', '', false, true %}"
        		}
        	},
        	"user": {
        		"id": "f61c0ec7-0f83-414e-8e5f-aace86e0ed35",
        		"name": "Jonathan Sandbridge",
        		"email": "john@sandbridge.com",
        		"phone": "+44123456789",
        		"date_of_birth": "1992-11-28",
        		"address": {
        			"address_line1": "40 Finsbury Square",
        			"city": "London",
        			"state": "London",
        			"zip": "EC2A 1PX",
        			"country_code": "GB"
        		}
        	}
        }
    parameters: []
    headers:
      - id: pair_f069c547d8b342218f3701fe8ed1fcff
        name: Content-Type
        value: application/json
      - id: pair_6505fd0840c049e4b31557790e5af161
        name: Idempotency-Key
        value: "{% uuid 'v4' %}"
    authentication:
      token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
      type: bearer
    metaSortKey: -1656323430786
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: fld_6cac557973884f91b742bf456bcd0a68
    parentId: fld_2d5eb24d59e14843b6bef2a1137331d7
    modified: 1707909564685
    created: 1707909564685
    name: "'user-selected' provider selection type"
    description: ""
    environment: {}
    environmentPropertyOrder: null
    metaSortKey: -1647885056123
    _type: request_group
  - _id: fld_2d5eb24d59e14843b6bef2a1137331d7
    parentId: fld_3c99c1c222a04f9ebc0e85dc10d90ada
    modified: 1724949426365
    created: 1707909564685
    name: Pay-in using a direct API integration
    description: ""
    environment: {}
    environmentPropertyOrder: null
    metaSortKey: -1647885019961
    _type: request_group
  - _id: req_819953633f68459293b9b86d0361ba42
    parentId: fld_6cac557973884f91b742bf456bcd0a68
    modified: 1724949452288
    created: 1707909564686
    url: "{{ _.ENVIRONMENT_URI }}/v3/payments/{% response 'body',
      'req_fd7626cf2fae4434bb81ef0808761c06', 'b64::JC5pZA==::46b', 'never', 60
      %}/authorization-flow"
    name: 3F. Start authorisation flow
    description: >
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/start-payment-authorization-flow)
    method: POST
    body:
      mimeType: application/json
      text: |-
        {
          "provider_selection": {},
        	"redirect": {
            "return_uri": "{{ _.RETURN_URI }}"
          }
        }
    parameters: []
    headers:
      - id: pair_87edbef26ebf46b1a6d5ec3bc7975333
        name: Content-Type
        value: application/json
      - id: pair_dd071d987a8a459195b9d38261f75034
        name: Idempotency-Key
        value: "{% uuid 'v4' %}"
    authentication:
      token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
      type: bearer
    metaSortKey: -1656323430736
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_c711bb3335df4f55bc0eeefd2c7ff794
    parentId: fld_6cac557973884f91b742bf456bcd0a68
    modified: 1724949465343
    created: 1707909564686
    url: "{{ _.ENVIRONMENT_URI }}/v3/payments/{% response 'body',
      'req_fd7626cf2fae4434bb81ef0808761c06', 'b64::JC5pZA==::46b', 'never', 60
      %}/authorization-flow/actions/provider-selection"
    name: 3G. Submit provider selection
    description: >-
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/submit-provider-selection)


      In this request, you should edit the request body and provide one of the `provider_id`s returned in the previous request, 3F.
    method: POST
    body:
      mimeType: application/json
      text: |-
        {
          "provider_id": "mock-payments-gb-redirect"
        }
    parameters: []
    headers:
      - id: pair_eecb6f7f55d54b9a8a9d6ccc5d67d96b
        name: Content-Type
        value: application/json
      - id: pair_bee4bcbc8d09415c98605075f4777144
        name: Idempotency-Key
        value: "{% uuid 'v4' %}"
    authentication:
      token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
      type: bearer
    metaSortKey: -1656323430686
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_30f5b9c70dd1455abac03ae4f85abf10
    parentId: fld_c5f84145d86642729ac83861a8ba67d0
    modified: 1724949487242
    created: 1707909564687
    url: "{{ _.ENVIRONMENT_URI }}/v3/payments"
    name: 3H. Create payment
    description: >
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/create-payment)



      Use the GET \merchant-accounts end point from the Merchants API to get your Account ID
    method: POST
    body:
      mimeType: application/json
      text: >-
        {
        	"amount_in_minor": 1,
        	"currency": "GBP",
        	"payment_method": {
        		"type": "bank_transfer",
        		"provider_selection": {
        			"type": "preselected",
        			"provider_id": "mock-payments-gb-redirect",
        			"scheme_selection": {
                "type": "instant_preferred"
              },
        			"remitter": {
        				"account_identifier": {
        					"type": "sort_code_account_number",
        					"sort_code": "123456",
        					"account_number": "12345678"
        				},
        				"account_holder_name": "Optional Remitter"
        			}
        		},
        		"beneficiary": {
        			"type": "merchant_account",
        			"account_holder_name": "Merchant Account name",
        			"merchant_account_id": "{% prompt 'Beneficiary Merchant Account ID', 'Please get your merchant_account_id by calling the GET List Merchant Accounts endpoint. ', '', '', false, true %}",
        			"reference": "testRef 001"
        		}
        	},
        	"metadata": {
        		"newKey": "New Value 001 test"
        	},
        	"user": {
        		"id": "f61c0ec7-0f83-414e-8e5f-aace86e0ed35",
        		"name": "Jonathan Sandbridge",
        		"email": "john@sandbridge.com",
        		"phone": "+44123456789",
        		"date_of_birth": "1992-11-28",
        		"address": {
        			"address_line1": "40 Finsbury Square",
        			"city": "London",
        			"state": "London",
        			"zip": "EC2A 1PX",
        			"country_code": "GB"
        		}
        	}
        }
    parameters: []
    headers:
      - id: pair_ff62c1f7c32447d3a9b115ad30f51397
        name: Content-Type
        value: application/json
        disabled: false
      - id: pair_10df9895c4f342d89cda2ee20cb1b67a
        name: Idempotency-Key
        value: "{% uuid 'v4' %}"
    authentication:
      token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
      type: bearer
    metaSortKey: -1647885074751.75
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: fld_c5f84145d86642729ac83861a8ba67d0
    parentId: fld_2d5eb24d59e14843b6bef2a1137331d7
    modified: 1707909564687
    created: 1707909564687
    name: "'preselected' provider selection type"
    description: ""
    environment: {}
    environmentPropertyOrder: null
    metaSortKey: -1647885056073
    _type: request_group
  - _id: req_54305490f1524acfb5baeca814b22ba3
    parentId: fld_c5f84145d86642729ac83861a8ba67d0
    modified: 1724949504361
    created: 1707909564687
    url: "{{ _.ENVIRONMENT_URI }}/v3/payments/{% response 'body',
      'req_30f5b9c70dd1455abac03ae4f85abf10', 'b64::JC5pZA==::46b', 'never',
      3600 %}/authorization-flow"
    name: 3I. Start authorisation flow
    description: >
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/start-payment-authorization-flow)
    method: POST
    body:
      mimeType: application/json
      text: |-
        {
          "provider_selection": {},
        	"redirect": {
            "return_uri": "{{ _.RETURN_URI }}"
          }
        }
    parameters: []
    headers:
      - id: pair_0b18789451764fa894e064ba24319128
        name: Content-Type
        value: application/json
        disabled: false
      - id: pair_2ef7fbc8766b49368d506fca11ff31fd
        name: Idempotency-Key
        value: "{% uuid 'v4' %}"
    authentication:
      token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
      type: bearer
    metaSortKey: -1647885074701.75
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_de516e1f5d214b99bb9c99c76a96bea8
    parentId: fld_50e6ee67d31a4502aabc857a586a22ed
    modified: 1724949565716
    created: 1707909564681
    url: "{{ _.ENVIRONMENT_URI }}/v3/payments"
    name: 3L. Create payment
    description: >
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/create-payment)
    method: POST
    body:
      mimeType: application/json
      text: |-
        {
        	"amount_in_minor": 1,
        	"currency": "GBP",
        	"payment_method": {
        		"type": "bank_transfer",
        		"provider_selection": {
        			"filter": {
        				"countries": [
        					"GB"
        				]
        			},
        			"type": "user_selected"
        		},
        		"beneficiary": {
        			"type": "external_account",
        			"account_holder_name": "Beneficiary Name",
        			"reference": "Example reference",
        			"account_identifier": {
        				"type": "sort_code_account_number",
        				"sort_code": "123456",
        				"account_number": "12345678"
        			}
        		}
        	},
        		"user":
            {
                "id": "f61c0ec7-0f83-414e-8e5f-aace86e0ed35",
                "name": "Ben Eficiary",
                "email": "ben@eficiary.com",
                "phone": "+441234567890"
            }
        }
    parameters: []
    headers:
      - id: pair_8a0ded88a4814fca885bf44b2e068212
        name: Content-Type
        value: application/json
      - id: pair_0653d93f26f6428f9bdad33a20164dfb
        name: Idempotency-Key
        value: "{% uuid 'v4' %}"
    authentication:
      token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
      type: bearer
    metaSortKey: -1656324168632.25
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: fld_50e6ee67d31a4502aabc857a586a22ed
    parentId: fld_572df80d1f9b4957803b8961ae9e20e5
    modified: 1707909564681
    created: 1707909564681
    name: "'user-selected' provider selection type"
    description: ""
    environment: {}
    environmentPropertyOrder: null
    metaSortKey: -1647882357056
    _type: request_group
  - _id: fld_572df80d1f9b4957803b8961ae9e20e5
    parentId: fld_6303df295de34f24a5906c169316a29e
    modified: 1723738312489
    created: 1707909564679
    name: Payment with Direct API integration
    description: ""
    environment: {}
    environmentPropertyOrder: null
    metaSortKey: -1647882182501
    _type: request_group
  - _id: fld_6303df295de34f24a5906c169316a29e
    parentId: fld_b75a2aecb6824c269da05e0d414bdb6c
    modified: 1724949512372
    created: 1707909564677
    name: Payment to an external account
    description: ""
    environment: {}
    environmentPropertyOrder: null
    metaSortKey: -1635952895766
    _type: request_group
  - _id: req_cd6d96f31c874f2bb74022414e25eef4
    parentId: fld_50e6ee67d31a4502aabc857a586a22ed
    modified: 1724949580881
    created: 1707909564682
    url: "{{ _.ENVIRONMENT_URI }}/v3/payments/{% response 'body',
      'req_de516e1f5d214b99bb9c99c76a96bea8', 'b64::JC5pZA==::46b', 'never', 60
      %}/authorization-flow"
    name: 3M. Start authorisation flow
    description: >
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/start-payment-authorization-flow)
    method: POST
    body:
      mimeType: application/json
      text: |-
        {
          "provider_selection": {},
        	"redirect": {
            "return_uri": "{{ _.RETURN_URI }}"
          }
        }
    parameters: []
    headers:
      - id: pair_3ae1762972674f7e9f6f51ce0d262ea4
        name: Content-Type
        value: application/json
      - id: pair_7f09bcd5230b4636b9c7e8997ac2ed08
        name: Idempotency-Key
        value: "{% uuid 'v4' %}"
    authentication:
      token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
      type: bearer
    metaSortKey: -1656324168626
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_8f721c0593e247ae83047b82f090fa33
    parentId: fld_50e6ee67d31a4502aabc857a586a22ed
    modified: 1724949598013
    created: 1707909564682
    url: "{{ _.ENVIRONMENT_URI }}/v3/payments/{% response 'body',
      'req_de516e1f5d214b99bb9c99c76a96bea8', 'b64::JC5pZA==::46b', 'never', 60
      %}/authorization-flow/actions/provider-selection"
    name: 3N. Submit provider selection
    description: >
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/submit-provider-selection)
    method: POST
    body:
      mimeType: application/json
      text: |-
        {
        	"provider_id": "mock-payments-gb-redirect"
        }
    parameters: []
    headers:
      - id: pair_0b18789451764fa894e064ba24319128
        name: Content-Type
        value: application/json
      - id: pair_2ef7fbc8766b49368d506fca11ff31fd
        name: Idempotency-Key
        value: "{% uuid 'v4' %}"
    authentication:
      token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
      type: bearer
    metaSortKey: -1656324168576
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_166ca93319ff4faba98c7d219e652dc7
    parentId: fld_50e6ee67d31a4502aabc857a586a22ed
    modified: 1724949608881
    created: 1707909564682
    url: "{{ _.ENVIRONMENT_URI }}/v3/payments/{% response 'body',
      'req_de516e1f5d214b99bb9c99c76a96bea8', 'b64::JC5pZA==::46b', 'never', 60
      %}/authorization-flow/actions/consent"
    name: 3O. Submit consent
    description: >-
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/submit-consent)


      The `consent` action is an optional step you can add to a direct API integration. It represents the act of getting explicit consent from the user for TrueLayer to initiate a payment.


      You can enable the `consent` action and this request by adding an empty `authorization_flow.consent` parameter to your initial payment creation request, 3L in this case.


      [Learn more about actions in a direct API integration flow](https://docs.truelayer.com/docs/authorisation-flow-actions).
    method: POST
    body:
      mimeType: application/json
      text: "{}"
    parameters: []
    headers:
      - name: Content-Type
        value: application/json
        id: pair_ea6dc61281344f58b9289215e2b1a950
      - id: pair_77c7d161e097490bb9062fd5cdaefaeb
        name: Idempotency-key
        value: "{% uuid 'v4' %}"
        description: ""
    authentication:
      type: bearer
      token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'never', 60 %}"
    metaSortKey: -1656324168526
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_2164d71f1e664091aa9959815d66d3af
    parentId: fld_4360d76a040c4d66ae100284b83e0bc9
    modified: 1724949538000
    created: 1707909564678
    url: "{{ _.ENVIRONMENT_URI }}/v3/payments"
    name: 3J. Create payment
    description: >
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/create-payment)
    method: POST
    body:
      mimeType: application/json
      text: |-
        {
        	"amount_in_minor": 1,
        	"currency": "GBP",
        	"payment_method": {
        		"provider_selection": {
        			"type": "user_selected"
        		},
        		"type": "bank_transfer",
        		"beneficiary": {
        			"type": "external_account",
        			"account_holder_name": "Ben Eficiary",
        			"reference": "Open-loop payment",
        			"account_identifier": {
        				"type": "sort_code_account_number",
        				"sort_code": "040004",
        				"account_number": "12345678"
        			}
        		}
        	},
        	"user": {
        		"name": "Ben Eficiary",
        		"email": "ben@eficiary.com",
        		"phone": "+441234567890"
        	}
        }
    parameters: []
    headers:
      - id: pair_7c8e00b083cd4aad9c620b508f98ffd1
        name: Content-Type
        value: application/json
      - id: pair_602ca6c94aec43dbb42d6d4c60c1df9e
        name: Idempotency-Key
        value: "{% uuid 'v4' %}"
    authentication:
      token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
      type: bearer
    metaSortKey: -1612882494398.3125
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: fld_4360d76a040c4d66ae100284b83e0bc9
    parentId: fld_572df80d1f9b4957803b8961ae9e20e5
    modified: 1724949584271
    created: 1707909564678
    name: Payment with hosted payment page
    description: ""
    environment: {}
    environmentPropertyOrder: null
    metaSortKey: -1647882307698
    _type: request_group
  - _id: req_26039e7ff93848cc9ef6bff847d3de02
    parentId: fld_4360d76a040c4d66ae100284b83e0bc9
    modified: 1724249986750
    created: 1707909564678
    url: https://payment.truelayer-sandbox.com/payments#payment_id={% response
      'body', 'req_2164d71f1e664091aa9959815d66d3af', 'b64::JC5pZA==::46b',
      'never', 60 %}&resource_token={% response 'body',
      'req_2164d71f1e664091aa9959815d66d3af',
      'b64::JC5yZXNvdXJjZV90b2tlbg==::46b', 'never', 60 %}&return_uri={{
      _.RETURN_URI }}
    name: 3K. Create HPP
    description: >-
      ## How to use the HPP link


      To test the HPP payment authorisation flow:


      - Click on the 'Query' tab.

      - Copy the content and open it in a browser page.


      [Learn more about the hosted payment page in our docs](https://docs.truelayer.com/docs/hosted-payment-page).
    method: BLD
    body:
      mimeType: ""
      text: "\n\n"
    parameters: []
    headers:
      - name: Content-Type
        value: text/plain
        id: pair_c40ac9014ee64fc3919b95533b6bb692
    authentication:
      token: "{% response 'body', 'req_42dac02e96cd4c4180227e29310e56a3',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
      type: bearer
    metaSortKey: -1612882494348.3125
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_097320c209c64083b2fea84d413c7141
    parentId: fld_0d0d3d34779848d5a4eba86343aa2b0a
    modified: 1724949643480
    created: 1707909564680
    url: "{{ _.ENVIRONMENT_URI }}/v3/payments"
    name: 3P. Create payment
    description: >
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/create-payment)
    method: POST
    body:
      mimeType: application/json
      text: |-
        {
        	"amount_in_minor": 1,
        	"currency": "GBP",
        	"payment_method": {
        		"type": "bank_transfer",
        		"provider_selection": {
        			"type": "preselected",
        			"provider_id": "mock-payments-gb-redirect",
        			"scheme_selection": {
        				"type":"instant_preferred"
        			}
        		},
        		"beneficiary": {
        			"type": "external_account",
        			"account_holder_name": "Beneficiary Name",
        			"reference": "RefTest",
        			"account_identifier": {
        				"type": "sort_code_account_number",
        				"sort_code": "040004",
        				"account_number": "72195665"
        			}
        		}
        	},
        	"user": {
        		"id": "846998dd-6356-44dc-94cf-24f34b056f22",
        		"name": "Jonathan Sandbridge",
        		"email": "john@sandbridge.com",
        		"phone": "+44123456789"
        	}
        }
    parameters: []
    headers:
      - id: pair_9fec7ae8046548cda919a1e8617da5fa
        name: Content-Type
        value: application/json
      - id: pair_e9939ed9c7974273b92e37b178a81eed
        name: Idempotency-Key
        value: "{% uuid 'v4' %}"
    authentication:
      token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
      type: bearer
    metaSortKey: -1612882494423.3125
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: fld_0d0d3d34779848d5a4eba86343aa2b0a
    parentId: fld_572df80d1f9b4957803b8961ae9e20e5
    modified: 1707909564679
    created: 1707909564679
    name: "'preselected' provider selection type"
    description: ""
    environment: {}
    environmentPropertyOrder: null
    metaSortKey: -1647882258340
    _type: request_group
  - _id: req_59abd1f0edf0474691af15847a6a0be6
    parentId: fld_0d0d3d34779848d5a4eba86343aa2b0a
    modified: 1724949658487
    created: 1707909564680
    url: "{{ _.ENVIRONMENT_URI }}/v3/payments/{% response 'body',
      'req_097320c209c64083b2fea84d413c7141', 'b64::JC5pZA==::46b', 'never', 60
      %}/authorization-flow"
    name: 3Q. Start authorization flow
    description: >
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/start-payment-authorization-flow)
    method: POST
    body:
      mimeType: application/json
      text: |-
        {
          "provider_selection": {},
        	"redirect": {
            "return_uri": "{{ _.RETURN_URI }}"
          }
        }
    parameters: []
    headers:
      - id: pair_534df09f68184b2f9a52075e5f73ddac
        name: Content-Type
        value: application/json
      - id: pair_dbf17dd9c25f4930aca763aae08007ad
        name: Idempotency-Key
        value: "{% uuid 'v4' %}"
    authentication:
      token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
      type: bearer
    metaSortKey: -1612882494373.3125
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_1b8100262a56442b87eade8caf07b684
    parentId: fld_0d0d3d34779848d5a4eba86343aa2b0a
    modified: 1724949669285
    created: 1707909564680
    url: "{{ _.ENVIRONMENT_URI }}/v3/payments/{% response 'body',
      'req_097320c209c64083b2fea84d413c7141', 'b64::JC5pZA==::46b', 'never', 60
      %}/authorization-flow/actions/consent"
    name: 3R. Submit consent
    description: >-
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/submit-consent)


      The `consent` action is an optional step you can add to a direct API integration. It represents the act of getting explicit consent from the user for TrueLayer to initiate a payment.


      You can enable the `consent` action and this request by adding an empty `authorization_flow.consent` parameter to your initial payment creation request, 3P in this case.


      [Learn more about actions in a direct API integration flow](https://docs.truelayer.com/docs/authorisation-flow-actions).
    method: POST
    body:
      mimeType: application/json
      text: "{}"
    parameters: []
    headers:
      - name: Content-Type
        value: application/json
        id: pair_3a507be77c9d4f81bc0671bfb2035e45
      - id: pair_d7bff6adebe74cf4937529e7db192392
        name: Idempotency-key
        value: "{% uuid 'v4' %}"
        description: ""
    authentication:
      type: bearer
      token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'never', 60 %}"
    metaSortKey: -1612882494323.3125
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_32d442be032648adb5f8ebfe93acd4c8
    parentId: fld_634b87bdda1d45d49c452a432db9af96
    modified: 1724949769064
    created: 1707909564671
    url: "{{ _.ENVIRONMENT_URI }}/v3/payouts"
    name: 4A. Create payout to a payment source
    description: >-
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/create-payout)


      A payout back to a user's bank details they paid in with (payment source) is also known as a [closed-loop payout](https://docs.truelayer.com/docs/make-a-payout-to-an-account-that-paid-in).
    method: POST
    body:
      mimeType: application/json
      text: >-
        {
        	"merchant_account_id": "{% prompt 'Merchant Account ID', 'Please get your merchant_account_id by calling the GET List Merchant Accounts endpoint. ', '', '', false, true %}",
        	"amount_in_minor": 10,
        	"currency": "GBP",
        	"beneficiary": {
        		"type": "payment_source",
        		"user_id": "{% prompt 'User_ID', '', '', '', false, true %}",
        		"payment_source_id": "{% prompt 'Payment_Source.ID', 'Get the Payment Source ID from the Payin payment \'settled\' status body', '', '', false, true %}",
        		"reference": "PayOutRef 1"
        	}
        }
    parameters: []
    headers:
      - id: pair_017d1a96c2c64085b45753d167a4fd3e
        name: Content-Type
        value: application/json
      - description: ""
        disabled: false
        id: pair_8fadc48a31a0437b8ead98d3fa9cc164
        name: Idempotency-Key
        value: "{% uuid 'v4' %}"
    authentication:
      token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
      type: bearer
    metaSortKey: -1612882494770.9688
    isPrivate: false
    settingStoreCookies: false
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: fld_634b87bdda1d45d49c452a432db9af96
    parentId: wrk_35ba728d03c548b68b087106738bcdec
    modified: 1723734850030
    created: 1707909564668
    name: 4. Payouts
    description: ""
    environment: {}
    environmentPropertyOrder: null
    metaSortKey: -1635894360826
    _type: request_group
  - _id: req_f9c74b04a1e546d382c4696cacc5efc7
    parentId: fld_634b87bdda1d45d49c452a432db9af96
    modified: 1724949854252
    created: 1707909564673
    url: "{{ _.ENVIRONMENT_URI }}/v3/payouts"
    name: 4B. Create payout to an external account - SCAN
    description: >-
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/create-payout)


      A payout to an external account's bank details is also known as an [open-loop payout](https://docs.truelayer.com/docs/make-a-payout-to-an-external-account). This example pays a UK account's sort code and account number (SCAN).
    method: POST
    body:
      mimeType: application/json
      text: >-
        {
        	"merchant_account_id": "{% prompt 'Merchant Account ID', 'Please get your merchant_account_id by calling the GET List Merchant Accounts endpoint. ', '', '', false, true %}",
        	"amount_in_minor": 1,
        	"currency": "GBP",
        	"beneficiary": {
        		"type": "external_account",
        		"account_holder_name": "Ben Eficiary",
        		"account_identifier": {
        			"type": "sort_code_account_number",
        			"sort_code": "123456",
        			"account_number": "12345678"
        		},
        		"reference": "Payout reference",
        		"address": {
        			"address_line1": "40 Finsbury Square",
        			"city": "London",
        			"state": "London",
        			"zip": "EC2A 1PX",
        			"country_code": "GB"
        		},
        		"date_of_birth": "1990-01-31"
        	}
        }
    parameters: []
    headers:
      - id: pair_017d1a96c2c64085b45753d167a4fd3e
        name: Content-Type
        value: application/json
      - description: ""
        disabled: false
        id: pair_8fadc48a31a0437b8ead98d3fa9cc164
        name: Idempotency-Key
        value: "{% uuid 'v4' %}"
    authentication:
      token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
      type: bearer
    metaSortKey: -1612882494770.5293
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: false
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_a59e6829409f458aae230f4ec6cac47b
    parentId: fld_634b87bdda1d45d49c452a432db9af96
    modified: 1724950021716
    created: 1707909564672
    url: "{{ _.ENVIRONMENT_URI }}/v3/payouts"
    name: 4C. Create payout to an external account - IBAN
    description: >
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/create-payout)


      A payout to an external account's bank details is also known as an [open-loop payout](https://docs.truelayer.com/docs/make-a-payout-to-an-external-account). This example pays a European account's IBAN.
    method: POST
    body:
      mimeType: application/json
      text: >-
        {
        	"merchant_account_id": "{% prompt 'Merchant Account ID', 'Please get your merchant_account_id by calling the GET List Merchant Accounts endpoint. ', '', '', false, true %}",
        	"amount_in_minor": 1,
        	"currency": "GBP",
        	"beneficiary": {
        		"type": "external_account",
        		"account_holder_name": "Ben Eficiary",
        		"account_identifier": {
        			"type": "iban",
        			"iban": ""
        		},
        		"reference": "Ref Payout",
        		"address": {
        			"address_line1": "40 Finsbury Square",
        			"city": "London",
        			"state": "London",
        			"zip": "EC2A 1PX",
        			"country_code": "GB"
        		},
        		"date_of_birth": "1990-01-31"
        	}
        }
    parameters: []
    headers:
      - id: pair_017d1a96c2c64085b45753d167a4fd3e
        name: Content-Type
        value: application/json
      - description: ""
        disabled: false
        id: pair_8fadc48a31a0437b8ead98d3fa9cc164
        name: Idempotency-Key
        value: "{% uuid 'v4' %}"
    authentication:
      token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
      type: bearer
    metaSortKey: -1612882494770.0715
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_ce1766cfd731402284c7804273f94daf
    parentId: fld_634b87bdda1d45d49c452a432db9af96
    modified: 1724950039821
    created: 1707909564671
    url: "{{ _.ENVIRONMENT_URI }}/v3/payouts/{% prompt 'PayOut ID', '', '', '',
      false, true %}"
    name: 4D. Get payout
    description: >
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/get-payout)
    method: GET
    body:
      mimeType: application/json
      text: ""
    parameters: []
    headers:
      - id: pair_017d1a96c2c64085b45753d167a4fd3e
        name: Content-Type
        value: application/json
      - description: ""
        disabled: false
        id: pair_8fadc48a31a0437b8ead98d3fa9cc164
        name: Idempotency-Key
        value: "{% uuid 'v4' %}"
    authentication:
      token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
      type: bearer
    metaSortKey: -1612882494769.7969
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_baf9c21f77b74c07bd93038457c28495
    parentId: fld_41fc2cfce4bb4afa8631be78ecc80154
    modified: 1724950140592
    created: 1707909564669
    url: "{{ _.ENVIRONMENT_URI }}/v3/payments/{% prompt 'Payment ID', '', '', '',
      false, true %}/refunds"
    name: 4E. Create a refund
    description: >-
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/create-payment-refund)


      To test this request, you must have an existing payment `id`, which you can provide as a path parameter by completing the prompt when you run the request.


      A refund, or multiple refunds, cannot exceed the value of an inital pay-in to your merchant account.


      [Learn more about refunds in our documentation](https://docs.truelayer.com/docs/refund-a-payment).
    method: POST
    body:
      mimeType: application/json
      text: |-
        {
        "amount_in_minor": 1,
        "reference": "My reference"
        }
    parameters: []
    headers:
      - id: pair_017d1a96c2c64085b45753d167a4fd3e
        name: Content-Type
        value: application/json
      - description: ""
        disabled: true
        id: pair_553c6144c2624ca5915a1b95677a46be
        name: "tl_version    "
        value: "2"
      - description: ""
        disabled: false
        id: pair_8fadc48a31a0437b8ead98d3fa9cc164
        name: Idempotency-Key
        value: "{% uuid 'v4' %}"
    authentication:
      token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
      type: bearer
    metaSortKey: -1650310796752.75
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: fld_41fc2cfce4bb4afa8631be78ecc80154
    parentId: fld_634b87bdda1d45d49c452a432db9af96
    modified: 1707909564669
    created: 1707909564669
    name: Refunds
    description: ""
    environment: {}
    environmentPropertyOrder: {}
    metaSortKey: -1612882494719.7969
    _type: request_group
  - _id: req_33a0c6d242fc49a0abed25f99f8d5fd2
    parentId: fld_41fc2cfce4bb4afa8631be78ecc80154
    modified: 1724950205513
    created: 1707909564669
    url: "{{ _.ENVIRONMENT_URI }}/v3/payments/{% prompt 'Payment ID', '', '', '',
      false, true %}/refunds/{% prompt 'Refund ID', '', '', '', false, true %}"
    name: 4F. Get refund
    description: >-
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/get-payment-refund)


      You can provide a refund `id` as a path parameter in the prompt when you run this request. This returns details of a single refund for a payment.
    method: GET
    body: {}
    parameters: []
    headers: []
    authentication:
      token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
      type: bearer
    metaSortKey: -1650310796702.75
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_2ef80263bdce45f6a4a1906c1589f225
    parentId: fld_41fc2cfce4bb4afa8631be78ecc80154
    modified: 1724950237114
    created: 1707909564670
    url: "{{ _.ENVIRONMENT_URI }}/v3/payments/{% prompt 'Payment ID', '', '', '',
      false, true %}/refunds"
    name: 4G. Get refunds
    description: >-
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/get-payment-refunds)


      You can provide a refund `id` as a path parameter in the prompt when you run this request. This returns details of all refunds made for a payment.
    method: GET
    body: {}
    parameters: []
    headers: []
    authentication:
      token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
      type: bearer
    metaSortKey: -1649730415032.375
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_766b53a21ecd4117aca62dee88e3bc85
    parentId: fld_d3eb67c792684f0e90e2fb66644f0e99
    modified: 1724950711607
    created: 1707909564704
    url: "{{ _.ENVIRONMENT_URI }}/v3/payment-links"
    name: 5A. Create a payment link
    description: >
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/create-payment-link)
    method: POST
    body:
      mimeType: application/json
      text: >-
        {
        	"expires_at": "2025-07-07T07:30:00.000Z",
        	"reference": "#TT8776618",
        	"return_uri": "https://console.truelayer.com/redirect-page",
        	"payment_configuration": {
        		"amount_in_minor": 110,
        		"currency": "GBP",
        		"payment_method": {
        			"type": "bank_transfer",
        			"provider_selection": {
        				"type": "user_selected"
        			},
        			"beneficiary": {
        				"type": "merchant_account",
        				"merchant_account_id": "{% prompt 'Your Merchant Account ID', 'Insert your Merchant Account ID', '', '', false, true %}"
        			}
        		},
        		"user": {
        			"id": "f61c0ec7-0f83-414e-8e5f-aace86e0ed35",
        			"name": "Jonathan Sandbridge",
        			"email": "john@sandbridge.com",
        			"phone": "+44123456789",
        			"date_of_birth": "1992-11-28",
        			"address": {
        				"address_line1": "40 Finsbury Square",
        				"city": "London",
        				"state": "London",
        				"zip": "EC2A 1PX",
        				"country_code": "GB"
        			}
        		}
        	},
        	"product_items": [
        		{
        			"name": "Table",
        			"price_in_minor": 10,
        			"quantity": 1,
        			"url": "https://www.example.com/table"
        		},
        		{
        			"name": "Sofa",
        			"price_in_minor": 20,
        			"quantity": 1,
        			"url": "https://www.example.com/sofa"
        		},
        		{
        			"name": "Chair",
        			"price_in_minor": 20,
        			"quantity": 4,
        			"url": "https://www.example.com/chair"
        		},
        		{
        			"name": "Shelf",
        			"price_in_minor": 30,
        			"quantity": 2,
        			"url": "https://www.example.com/table/shelf"
        		},
        		{
        			"name": "Bracket",
        			"price_in_minor": 20,
        			"quantity": 4,
        			"url": "https://www.example.com/bracket"
        		},
        		{
        			"name": "Rug",
        			"price_in_minor": 10,
        			"quantity": 1,
        			"url": "https://www.example.com/rug"
        		}
        	],
        	"type": "single_payment"
        }
    parameters: []
    headers:
      - name: Content-Type
        value: application/json
        id: pair_bd04265e2517437a84ccd81a56aebbe6
      - id: pair_6ac00e889bf24b1cb413278f596e3960
        name: Idempotency-key
        value: "{% uuid 'v4' %}"
        description: ""
    authentication:
      type: bearer
      token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
    metaSortKey: -1690386212214
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: fld_d3eb67c792684f0e90e2fb66644f0e99
    parentId: wrk_35ba728d03c548b68b087106738bcdec
    modified: 1724950244805
    created: 1707909564703
    name: 5. Payment links
    description: ""
    environment: {}
    environmentPropertyOrder: null
    metaSortKey: -818447180413
    _type: request_group
  - _id: req_7a75f6d55d61440fa3e5647ec4534c62
    parentId: fld_d3eb67c792684f0e90e2fb66644f0e99
    modified: 1724950694289
    created: 1707909564704
    url: "{{ _.ENVIRONMENT_URI }}/v3/payment-links/{% response 'body',
      'req_766b53a21ecd4117aca62dee88e3bc85', 'b64::JC5pZA==::46b',
      'when-expired', 60 %}"
    name: 5B. Get payment link
    description: >
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/get-payment-link)
    method: GET
    body: {}
    parameters: []
    headers:
      - id: pair_d0f185f90a20406e9e1471fb25918738
        name: Content-Type
        value: application/json
        description: ""
      - id: pair_9faa1269d62d4c4bbbcbf6d33c9f42da
        name: Idempotency-key
        value: "{% uuid 'v4' %}"
        description: ""
    authentication:
      type: bearer
      token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'never', 60 %}"
    metaSortKey: -1690386212164
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_101d2b3458874c18b8cd09cfd1e22617
    parentId: fld_d3eb67c792684f0e90e2fb66644f0e99
    modified: 1724950956481
    created: 1724950263207
    url: "{{ _.ENVIRONMENT_URI }}/v3/payment-links/{% response 'body',
      'req_766b53a21ecd4117aca62dee88e3bc85', 'b64::JC5pZA==::46b',
      'when-expired', 3600 %}/payments"
    name: 5C. Get payment link payments
    description: >
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/get-payment-link-payments)
    method: GET
    body: {}
    parameters: []
    headers: []
    authentication:
      type: bearer
      token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
    metaSortKey: -1690386212114
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_599a894d7617486d8f666f33e1ead94c
    parentId: fld_9f300b00a5e14c5c88c1749e01d53a6c
    modified: 1724951275735
    created: 1707909564699
    url: "{{ _.ENVIRONMENT_URI }}/v3/mandates"
    name: 6A. Create mandate paying a merchant account
    description: "## [See this request in our API
      reference](https://docs.truelayer.com/reference/create-mandate)"
    method: POST
    body:
      mimeType: application/json
      text: >-
        {
        	"mandate": {
        		"type": "sweeping",
        		"provider_filter": {
        			"countries": [
        				"GB"
        			],
        			"release_channel": "private_beta"
        		},
        		"provider_selection": {
        			"type": "user_selected"
        		},
        		"beneficiary": {
        			"type": "merchant_account",
        			"merchant_account_id": "{% prompt 'Merchant account id', 'Merchant account id', '123', '', false, true %}",
        		  "account_holder_name": "{% prompt 'Merchant Account Holder Name', 'Merchant Account Holder Name', 'Company.Inc', '', false, true %}"
        		}
        	},
        	"currency": "GBP",
        	"user": {
        		"id": "{% uuid 'v4' %}",
        		"name": "{% prompt 'Name', '', '', '', false, true %}",
        		"email": "{% prompt 'User Email', '', '', '', false, true %}",
        		"phone": "{% prompt 'Phone', 'Please prefix with + and country code', '', '', false, true %}"
        	},
        	"constraints": {
        		"valid_from": "{% now 'iso-8601', '' %}",
        		"valid_to": "2025-01-01T00:00:00.000Z",
        		"maximum_individual_amount": 50,
        		"periodic_limits": {
        			"day": {
        				"maximum_amount": 100,
        				"period_alignment": "calendar"
        			},
        			"month": {
        				"maximum_amount": 1000,
        				"period_alignment": "calendar"
        			}
        		}
        	}
        }
    parameters: []
    headers:
      - name: Content-Type
        value: application/json
        id: pair_e922a8f0d84549879a3912ed4e4fdbde
      - id: pair_bf90243f468e4fbcbdd08f362e2485fe
        name: Idempotency-Key
        value: "{% uuid 'v4' %}"
        description: ""
        disabled: false
    authentication:
      type: bearer
      token: "{% response 'body', 'req_e61a49eeb0ed4f2fb5b8074a71ea3f98',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 600 %}"
    metaSortKey: 50
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: fld_9f300b00a5e14c5c88c1749e01d53a6c
    parentId: fld_c341b44ffcb34b808bab919952012d2c
    modified: 1723735214322
    created: 1707909564694
    name: Mandate to merchant account
    description: ""
    environment: {}
    environmentPropertyOrder: null
    metaSortKey: -1648351513113.5
    _type: request_group
  - _id: fld_c341b44ffcb34b808bab919952012d2c
    parentId: wrk_35ba728d03c548b68b087106738bcdec
    modified: 1723735093660
    created: 1707909564689
    name: 6. VRP Mandates and Payments
    description: ""
    environment: {}
    environmentPropertyOrder: {}
    metaSortKey: -1000000000
    _type: request_group
  - _id: req_8f04c3b2801a47a5b0ece025d8b68ecf
    parentId: fld_9f300b00a5e14c5c88c1749e01d53a6c
    modified: 1724951302942
    created: 1707909564697
    url: "{{ _.ENVIRONMENT_URI }}/v3/mandates/{% response 'body',
      'req_599a894d7617486d8f666f33e1ead94c', 'b64::JC5pZA==::46b', 'never', 60
      %}/authorization-flow"
    name: 6B. Start authorisation flow
    description: "## [See this request in our API
      reference](https://docs.truelayer.com/reference/start-mandate-authorizati\
      on-flow)"
    method: POST
    body:
      mimeType: application/json
      text: |-
        {
        	"provider_selection": {},
        	"redirect": {
        		"return_uri": "{{ _.RETURN_URI }}"
        	}
        }
    parameters: []
    headers:
      - name: Content-Type
        value: application/json
        id: pair_bfeffde10e0a4221bb56d49e0ae607db
      - id: pair_8832413f21684be1bec72d1e62584eb0
        name: Idempotency-Key
        value: "{% uuid 'v4' %}"
        description: ""
    authentication:
      type: bearer
      token: "{% response 'body', 'req_e61a49eeb0ed4f2fb5b8074a71ea3f98',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 60 %}"
      disabled: false
    metaSortKey: 100
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_eb9dbb73b4ba4850aee21a1bd274a70b
    parentId: fld_9f300b00a5e14c5c88c1749e01d53a6c
    modified: 1724951345365
    created: 1707909564696
    url: "{{ _.ENVIRONMENT_URI }}/v3/mandates/{% response 'body',
      'req_599a894d7617486d8f666f33e1ead94c', 'b64::JC5pZA==::46b', 'never', 60
      %}/authorization-flow/actions/provider-selection"
    name: 6C. Provider selection
    description: "## [See this request in our API
      reference](https://docs.truelayer.com/reference/submit-mandate-provider-s\
      election)"
    method: POST
    body:
      mimeType: application/json
      text: |-
        {
          "provider_id": "ob-natwest-vrp-sandbox"
        }
    parameters: []
    headers:
      - name: Content-Type
        value: application/json
        id: pair_a79632b4400a4809a5a2d3fd7b190460
      - id: pair_33b8aaace00447e3ac2fb50e3f2e696a
        name: Idempotency-Key
        value: "{% uuid 'v4' %}"
        description: ""
    authentication:
      type: bearer
      token: "{% response 'body', 'req_e61a49eeb0ed4f2fb5b8074a71ea3f98',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 600 %}"
    metaSortKey: 200
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_68a7d886f49541e9bdbbb064506e7a0f
    parentId: fld_9f300b00a5e14c5c88c1749e01d53a6c
    modified: 1724951374524
    created: 1707909564698
    url: "{{ _.ENVIRONMENT_URI }}/v3/mandates/{% response 'body',
      'req_599a894d7617486d8f666f33e1ead94c', 'b64::JC5pZA==::46b', 'never', 60
      %}"
    name: 6D. Get mandate
    description: "## [See this request in our API
      reference](https://docs.truelayer.com/reference/get-mandate)"
    method: GET
    body: {}
    parameters: []
    headers: []
    authentication:
      type: bearer
      token: "{% response 'body', 'req_e61a49eeb0ed4f2fb5b8074a71ea3f98',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 600 %}"
    metaSortKey: 300
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_3f2e16653ece4ba8849d826ec889a53f
    parentId: fld_9f300b00a5e14c5c88c1749e01d53a6c
    modified: 1724951422388
    created: 1707909564698
    url: "{{ _.ENVIRONMENT_URI }}/v3/mandates?user_id={% response 'body',
      'req_599a894d7617486d8f666f33e1ead94c', 'b64::JC51c2VyLmlk::46b', 'never',
      60 %}&limit={% prompt 'Limit', 'mandates per page', '25', '', false, true
      %}"
    name: 6E. List mandates
    description: >-
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/list-mandate)


      As is, this request will always return 1 mandate. To get more than one mandate, make sure to disable generating a new random user_id on every Create Mandate request.


      Maximum number of items included in the returned window. Should be greater than 0 and less than 50.


      If not set, a default of 25 is considered.
    method: GET
    body: {}
    parameters: []
    headers: []
    authentication:
      type: bearer
      token: "{% response 'body', 'req_e61a49eeb0ed4f2fb5b8074a71ea3f98',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 600 %}"
    metaSortKey: 325
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_de9db67669fa43c18b5b371fdd09283c
    parentId: fld_9f300b00a5e14c5c88c1749e01d53a6c
    modified: 1724952071276
    created: 1707909564698
    url: "{{ _.ENVIRONMENT_URI }}/v3/mandates/{% response 'body',
      'req_599a894d7617486d8f666f33e1ead94c', 'b64::JC5pZA==::46b', 'never', 60
      %}/funds?amount_in_minor={% prompt 'Amount', 'amount', '1', '', false,
      true %}&currency=GBP"
    name: 6F. Confirm funds
    description: >-
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/confirm-mandate-funds)


      This request is meant to be used to confirm the amount of money a PSU has in their account.
    method: GET
    body: {}
    parameters: []
    headers: []
    authentication:
      type: bearer
      token: "{% response 'body', 'req_e61a49eeb0ed4f2fb5b8074a71ea3f98',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 600 %}"
    metaSortKey: 350
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_434b7677da934a508ba7e071670e062e
    parentId: fld_577b27450e024018819bbfa18474060a
    modified: 1724952344172
    created: 1707909564694
    url: "{{ _.ENVIRONMENT_URI }}/v3/payments"
    name: 6G. Create payment on a mandate
    description: >
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/create-payment)
    method: POST
    body:
      mimeType: application/json
      text: >-
        {
        	"payment_method": {
        		"type": "mandate",
        		"mandate_id": "{% response 'body', 'req_599a894d7617486d8f666f33e1ead94c', 'b64::JC5pZA==::46b', 'never', 60 %}"
        	},
        	"amount_in_minor": 1,
        	"reference": "{% prompt 'Reference', 'Reference', 'reference123', '', false, true %}",
        	"currency": "GBP"
        }
    parameters: []
    headers:
      - name: Content-Type
        value: application/json
        id: pair_e922a8f0d84549879a3912ed4e4fdbde
      - id: pair_bf90243f468e4fbcbdd08f362e2485fe
        name: Idempotency-Key
        value: "{% uuid 'v4' %}"
        description: ""
        disabled: false
    authentication:
      type: bearer
      token: "{% response 'body', 'req_e61a49eeb0ed4f2fb5b8074a71ea3f98',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 600 %}"
    metaSortKey: -1643121940133.5
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: fld_577b27450e024018819bbfa18474060a
    parentId: fld_9f300b00a5e14c5c88c1749e01d53a6c
    modified: 1723735209383
    created: 1707909564694
    name: Payment on mandate to merchant account
    description: ""
    environment: {}
    environmentPropertyOrder: null
    metaSortKey: 450
    _type: request_group
  - _id: req_186b95739be94f64a7ed49051028009a
    parentId: fld_577b27450e024018819bbfa18474060a
    modified: 1724952351193
    created: 1707909564695
    url: "{{ _.ENVIRONMENT_URI }}/v3/payments/{% response 'body',
      'req_434b7677da934a508ba7e071670e062e', 'b64::JC5pZA==::46b', 'never', 60
      %}"
    name: 6I. Get payment on a mandate (access token)
    description: >
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/get-payment-1)
    method: GET
    body: {}
    parameters: []
    headers: []
    authentication:
      type: bearer
      token: "{% response 'body', 'req_e61a49eeb0ed4f2fb5b8074a71ea3f98',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 600 %}"
    metaSortKey: -1643121940114.75
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_b8dac4c54ed24b8ba5528338a50e162c
    parentId: fld_577b27450e024018819bbfa18474060a
    modified: 1724952358865
    created: 1707909564695
    url: "{{ _.ENVIRONMENT_URI }}/v3/payments/{% response 'body',
      'req_434b7677da934a508ba7e071670e062e', 'b64::JC5pZA==::46b', 'never', 60
      %}"
    name: 6H. Get payment on a mandate (resource token)
    description: >
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/get-payment-1)
    method: GET
    body: {}
    parameters: []
    headers: []
    authentication:
      type: bearer
      token: "{% response 'body', 'req_434b7677da934a508ba7e071670e062e',
        'b64::JC5yZXNvdXJjZV90b2tlbg==::46b', 'never', 600 %}"
    metaSortKey: -1643121940096
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_11c6df39983a47369d4ec47fe57a064d
    parentId: fld_9f300b00a5e14c5c88c1749e01d53a6c
    modified: 1724951736836
    created: 1707909564696
    url: "{{ _.ENVIRONMENT_URI }}/v3/mandates/{% response 'body',
      'req_9f4b0ff4d37943008187c75ba2ddf44f', 'b64::JC5pZA==::46b', 'never', 60
      %}/revoke"
    name: 6J. Revoke mandate
    description: >
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/revoke-mandate)
    method: POST
    body: {}
    parameters: []
    headers:
      - id: pair_bf90243f468e4fbcbdd08f362e2485fe
        name: Idempotency-Key
        value: "{% uuid 'v4' %}"
        description: ""
        disabled: false
      - id: pair_565909f5f02d4a7c9b64c6a65de87b1a
        name: ""
        value: ""
        description: ""
    authentication:
      type: bearer
      token: "{% response 'body', 'req_6fc0e9ac772544ab942818fd81300b5e',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 600 %}"
    metaSortKey: 500
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_b1f9b99104cd44d0b8944ee0d7687c40
    parentId: fld_7dfc2c4d1b9243d3b1b8969d6ff5851f
    modified: 1724951814201
    created: 1707909564691
    url: "{{ _.ENVIRONMENT_URI }}/v3/mandates"
    name: 6K. Create mandate paying an external account
    description: >
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/create-mandate)
    method: POST
    body:
      mimeType: application/json
      text: >-
        {
        	"mandate": {
        		"type": "sweeping",
        		"provider_filter": {
        			"countries": [
        				"GB"
        			],
        			"release_channel": "private_beta"
        		},
        		"provider_selection": {
        			"type": "user_selected"
        		},
        		"beneficiary": {
        			"type": "external_account",
        			"account_holder_name": "Beneficiary Name",
        			"account_identifier": {
        				"type": "sort_code_account_number",
        				"sort_code": "123456",
        				"account_number": "12345678"
        			}
        		}
        	},
        	"currency": "GBP",
        	"user": {
        		"id": "{% uuid 'v4' %}",
        		"name": "{% prompt 'Name', '', '', '', false, true %}",
        		"email": "{% prompt 'User Email', '', '', '', false, true %}",
        		"phone": "{% prompt 'Phone', 'Please prefix with + and country code', '', '', false, true %}"
        	},
        	"constraints": {
        		"valid_from": "{% now 'iso-8601', '' %}",
        		"valid_to": "2025-01-01T00:00:00.000Z",
        		"maximum_individual_amount": 50,
        		"periodic_limits": {
        			"day": {
        				"maximum_amount": 100,
        				"period_alignment": "calendar"
        			},
        			"month": {
        				"maximum_amount": 1000,
        				"period_alignment": "calendar"
        			}
        		}
        	}
        }
    parameters: []
    headers:
      - name: Content-Type
        value: application/json
        id: pair_e922a8f0d84549879a3912ed4e4fdbde
      - id: pair_bf90243f468e4fbcbdd08f362e2485fe
        name: Idempotency-Key
        value: "{% uuid 'v4' %}"
        description: ""
        disabled: false
    authentication:
      type: bearer
      token: "{% response 'body', 'req_e61a49eeb0ed4f2fb5b8074a71ea3f98',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 600 %}"
    metaSortKey: 0
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: fld_7dfc2c4d1b9243d3b1b8969d6ff5851f
    parentId: fld_c341b44ffcb34b808bab919952012d2c
    modified: 1723735221406
    created: 1707909564690
    name: Mandate to external account
    description: ""
    environment: {}
    environmentPropertyOrder: null
    metaSortKey: -1648351513063.5
    _type: request_group
  - _id: req_e67382c1982e4b8fad02f81cf462c778
    parentId: fld_7dfc2c4d1b9243d3b1b8969d6ff5851f
    modified: 1724951838646
    created: 1707909564692
    url: "{{ _.ENVIRONMENT_URI }}/v3/mandates/{% response 'body',
      'req_b1f9b99104cd44d0b8944ee0d7687c40', 'b64::JC5pZA==::46b', 'never', 60
      %}/authorization-flow"
    name: 6L. Start authorisation flow
    description: >
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/start-mandate-authorization-flow)
    method: POST
    body:
      mimeType: application/json
      text: |-
        {
        	"provider_selection": {},
        	"redirect": {
        		"return_uri": "{{ _.RETURN_URI }}"
        	}
        }
    parameters: []
    headers:
      - name: Content-Type
        value: application/json
        id: pair_bfeffde10e0a4221bb56d49e0ae607db
      - id: pair_8832413f21684be1bec72d1e62584eb0
        name: Idempotency-Key
        value: "{% uuid 'v4' %}"
        description: ""
    authentication:
      type: bearer
      token: "{% response 'body', 'req_e61a49eeb0ed4f2fb5b8074a71ea3f98',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'never', 60 %}"
      disabled: false
    metaSortKey: 100
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_471aed1182b2476f8f7428fcf62ea970
    parentId: fld_7dfc2c4d1b9243d3b1b8969d6ff5851f
    modified: 1724951867303
    created: 1707909564692
    url: "{{ _.ENVIRONMENT_URI }}/v3/mandates/{% response 'body',
      'req_b1f9b99104cd44d0b8944ee0d7687c40', 'b64::JC5pZA==::46b', 'never', 60
      %}/authorization-flow/actions/provider-selection"
    name: 6M. Provider selection
    description: >
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/submit-mandate-provider-selection)
    method: POST
    body:
      mimeType: application/json
      text: |-
        {
          "provider_id": "ob-natwest-vrp-sandbox"
        }
    parameters: []
    headers:
      - name: Content-Type
        value: application/json
        id: pair_a79632b4400a4809a5a2d3fd7b190460
      - id: pair_33b8aaace00447e3ac2fb50e3f2e696a
        name: Idempotency-Key
        value: "{% uuid 'v4' %}"
        description: ""
    authentication:
      type: bearer
      token: "{% response 'body', 'req_6fc0e9ac772544ab942818fd81300b5e',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 600 %}"
    metaSortKey: 200
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_7e48b3b0ce1d47fe9db86048c70806f8
    parentId: fld_7dfc2c4d1b9243d3b1b8969d6ff5851f
    modified: 1724952036013
    created: 1707909564693
    url: "{{ _.ENVIRONMENT_URI }}/v3/mandates/{% response 'body',
      'req_b1f9b99104cd44d0b8944ee0d7687c40', 'b64::JC5pZA==::46b', 'never', 60
      %}"
    name: 6N. Get mandate
    description: >
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/get-mandate)
    method: GET
    body: {}
    parameters: []
    headers: []
    authentication:
      type: bearer
      token: "{% response 'body', 'req_6fc0e9ac772544ab942818fd81300b5e',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 600 %}"
    metaSortKey: 300
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_98d7f141ed694481a09e503cdb852faa
    parentId: fld_7dfc2c4d1b9243d3b1b8969d6ff5851f
    modified: 1724952054399
    created: 1707909564693
    url: "{{ _.ENVIRONMENT_URI }}/v3/mandates?user_id={% response 'body',
      'req_b1f9b99104cd44d0b8944ee0d7687c40', 'b64::JC51c2VyLmlk::46b',
      'when-expired', 600 %}&limit={% prompt 'Limit', 'mandates per page', '25',
      '', false, true %}"
    name: 6O. List mandates
    description: >-
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/list-mandate)


      As is, this request will always return 1 mandate. To get more than one mandate, make sure to disable generating a new random user_id on every Create Mandate request.


      Maximum number of items included in the returned window. Should be greater than 0 and less than 50.


      If not set, a default of 25 is considered.
    method: GET
    body: {}
    parameters: []
    headers: []
    authentication:
      type: bearer
      token: "{% response 'body', 'req_6fc0e9ac772544ab942818fd81300b5e',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'never', 600 %}"
    metaSortKey: 325
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_b1352b671f114eb2853abd24084e9b7c
    parentId: fld_7dfc2c4d1b9243d3b1b8969d6ff5851f
    modified: 1724952085440
    created: 1707909564693
    url: "{{ _.ENVIRONMENT_URI }}/v3/mandates/{% response 'body',
      'req_b1f9b99104cd44d0b8944ee0d7687c40', 'b64::JC5pZA==::46b', 'never', 60
      %}/funds?amount_in_minor={% prompt 'Amount', 'amount', '1', '', false,
      true %}&currency=GBP"
    name: 6P. Confirm funds
    description: >-
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/confirm-mandate-funds)


      This request is meant to be used to confirm the amount of money a PSU has in their account.
    method: GET
    body: {}
    parameters: []
    headers: []
    authentication:
      type: bearer
      token: "{% response 'body', 'req_6fc0e9ac772544ab942818fd81300b5e',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 600 %}"
    metaSortKey: 350
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_0e91256025834b58ba5ec3c6f18c9d3d
    parentId: fld_6dcae583ec8d4b0c8370b25066c4ed42
    modified: 1724952225171
    created: 1707909564690
    url: "{{ _.ENVIRONMENT_URI }}/v3/payments"
    name: 6Q. Create payment on a mandate
    description: >
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/create-payment)
    method: POST
    body:
      mimeType: application/json
      text: >-
        
        {
        		"payment_method": {
        				"type": "mandate",
        		"mandate_id": "{% response 'body', 'req_b1f9b99104cd44d0b8944ee0d7687c40', 'b64::JC5pZA==::46b', 'never', 60 %}"
        		},
        		"amount_in_minor": 1,
        		"reference": "{% prompt 'Reference', 'Reference', 'reference123', '', false, true %}",
        		"currency": "GBP"
        }
    parameters: []
    headers:
      - name: Content-Type
        value: application/json
        id: pair_e922a8f0d84549879a3912ed4e4fdbde
      - id: pair_bf90243f468e4fbcbdd08f362e2485fe
        name: Idempotency-Key
        value: "{% uuid 'v4' %}"
        description: ""
        disabled: false
    authentication:
      type: bearer
      token: "{% response 'body', 'req_6fc0e9ac772544ab942818fd81300b5e',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 600 %}"
    metaSortKey: -1643121940196
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: fld_6dcae583ec8d4b0c8370b25066c4ed42
    parentId: fld_7dfc2c4d1b9243d3b1b8969d6ff5851f
    modified: 1724949036409
    created: 1707909564690
    name: Payment on mandate to external account
    description: ""
    environment: {}
    environmentPropertyOrder: null
    metaSortKey: 400
    _type: request_group
  - _id: req_6ecc285b527e4f1ebe9c726c07a357cb
    parentId: fld_6dcae583ec8d4b0c8370b25066c4ed42
    modified: 1724952207779
    created: 1707909564690
    url: "{{ _.ENVIRONMENT_URI }}/v3/payments/{% response 'body',
      'req_0e91256025834b58ba5ec3c6f18c9d3d', 'b64::JC5pZA==::46b', 'never', 60
      %}"
    name: 6S. Get payment on a mandate (access token)
    description: >
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/get-payment-1)
    method: GET
    body: {}
    parameters: []
    headers: []
    authentication:
      type: bearer
      token: "{% response 'body', 'req_6fc0e9ac772544ab942818fd81300b5e',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 600 %}"
    metaSortKey: -1643121940158.5
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_258382c72f374a31b7fef335b6a15ae4
    parentId: fld_6dcae583ec8d4b0c8370b25066c4ed42
    modified: 1724952213990
    created: 1707909564691
    url: "{{ _.ENVIRONMENT_URI }}/v3/payments/{% response 'body',
      'req_0e91256025834b58ba5ec3c6f18c9d3d', 'b64::JC5pZA==::46b', 'never', 60
      %}"
    name: 6R. Get payment on a mandate (resource token)
    description: >
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/get-payment-1)
    method: GET
    body: {}
    parameters: []
    headers: []
    authentication:
      type: bearer
      token: "{% response 'body', 'req_0e91256025834b58ba5ec3c6f18c9d3d',
        'b64::JC5yZXNvdXJjZV90b2tlbg==::46b', 'never', 600 %}"
    metaSortKey: -1643121940108.5
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_183c765d1f2b4c4d978b7b8187768355
    parentId: fld_7dfc2c4d1b9243d3b1b8969d6ff5851f
    modified: 1724952406902
    created: 1707909564692
    url: "{{ _.ENVIRONMENT_URI }}/v3/mandates/{% response 'body',
      'req_c8bdfe4156f94d16a0c7ae27e5fb1f69', 'b64::JC5pZA==::46b', 'never', 60
      %}/revoke"
    name: 6T. Revoke mandate
    description: >
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/revoke-mandate)
    method: POST
    body: {}
    parameters: []
    headers:
      - id: pair_bf90243f468e4fbcbdd08f362e2485fe
        name: Idempotency-Key
        value: "{% uuid 'v4' %}"
        description: ""
        disabled: false
      - id: pair_565909f5f02d4a7c9b64c6a65de87b1a
        name: ""
        value: ""
        description: ""
    authentication:
      type: bearer
      token: "{% response 'body', 'req_6fc0e9ac772544ab942818fd81300b5e',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 600 %}"
    metaSortKey: 500
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_1e42872b2edc434d8e83ac1dca72fbc5
    parentId: fld_3295af04a65943b697a22ec844e2f48b
    modified: 1725551390687
    created: 1723737370397
    url: "{{ _.ENVIRONMENT_URI }}/v3/payments"
    name: 7A. Create payment
    description: >-
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/create-payment)


      ## Testing result thresholds


      When you make a identity data request to the `/signup-plus/payments` endpoint, the response you get depends on the value of the `amount_in_minor` parameter at payment creation. These are the possible results and thresholds:


      | Value of `amount_in_minor`      | Signup+ response | Response type |

      | :---------- | :----------------------------------  | ------- |

      | 0-1799      | Test user data 1: Tommie Burke.      | Success |

      | 1800-2099   | Test user data 2: Leon Gordon.       | Success |

      | 2100-2199   | Test user data 3: Isabella Allen.    | Success |

      | 2200-9999   | Range reserved for new test users. Defaults to test user data 3: Leon Gordon. | Success |

      | 10000-24999 | Joint accounts not supported.        | Error |

      | 25000-34999 | User data not found                  | Error |

      | >35000      | Range reserved for new scenarios. Defaults to User data not found error. | Error |


      [Learn more about testing Signup+ in Sandbox](https://docs.truelayer.com/docs/signup-sandbox).
    method: POST
    body:
      mimeType: application/json
      text: >-
        {
        	"amount_in_minor": 10000,
        	"currency": "GBP",
        	"payment_method": {
        		"provider_selection": {
        			"type": "user_selected"
        		},
        		"filter": {
        			"countries": [
        				"GB"
        			]
        		},
        		"type": "bank_transfer",
        		"beneficiary": {
        			"type": "merchant_account",
        			"merchant_account_id": "{% prompt 'Beneficiary Merchant Account ID', 'Please get your merchant_account_id by calling the GET List Merchant Accounts endpoint. ', '', '', false, true %}",
        			"reference": "Test payment"
        		}
        	},
        	"user": {
        		"name": "Jonathan Sandbridge",
        		"email": "john@sandbridge.com",
        		"phone": "+44123456789",
        		"date_of_birth": "1992-11-28",
        		"address": {
        			"address_line1": "40 Finsbury Square",
        			"city": "London",
        			"state": "London",
        			"zip": "EC2A 1PX",
        			"country_code": "GB"
        		}
        	},
        	"related_products": {
        		"signup_plus": {}
        	}
        }
    parameters: []
    headers:
      - id: pair_4901eb02eb9f41dfbff0b110f9bdd25d
        name: Content-Type
        value: application/json
      - id: pair_98be0a07c8ec4390bcaa878fd1d1a7c7
        name: Idempotency-Key
        value: "{% uuid 'v4' %}"
    authentication:
      token: "{% response 'body', 'req_6a1d85dcef0d45f7985245d59ef95360',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 60 %}"
      type: bearer
    metaSortKey: -1723737389742
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: fld_3295af04a65943b697a22ec844e2f48b
    parentId: fld_15510ce7703348eeb1e036b0e2567487
    modified: 1724949075968
    created: 1723737402203
    name: Standard pay-in
    description: ""
    environment: {}
    environmentPropertyOrder: null
    metaSortKey: -1723737402203
    _type: request_group
  - _id: fld_15510ce7703348eeb1e036b0e2567487
    parentId: wrk_35ba728d03c548b68b087106738bcdec
    modified: 1723737306855
    created: 1723737282321
    name: 7. Signup+
    description: ""
    environment: {}
    environmentPropertyOrder: null
    metaSortKey: -749999887.5
    _type: request_group
  - _id: req_a9662a802e5c40159087f91cbd9d98d4
    parentId: fld_3295af04a65943b697a22ec844e2f48b
    modified: 1724159426692
    created: 1723738360000
    url: https://payment.truelayer-sandbox.com/payments#payment_id={% response
      'body', 'req_1e42872b2edc434d8e83ac1dca72fbc5', 'b64::JC5pZA==::46b',
      'always', 60 %}&resource_token={% response 'body',
      'req_1e42872b2edc434d8e83ac1dca72fbc5',
      'b64::JC5yZXNvdXJjZV90b2tlbg==::46b', 'always', 60 %}&return_uri={{
      _.RETURN_URI }}
    name: 7B. Create HPP
    description: >-
      ## How to use the HPP link


      To test the HPP payment authorisation flow:


      - Click on the 'Query' tab.

      - Copy the content and open it in a browser page.


      [Learn more about the hosted payment page in our docs](https://docs.truelayer.com/docs/hosted-payment-page).
    method: BLD
    body:
      mimeType: ""
      text: "\n\n"
    parameters: []
    headers:
      - name: Content-Type
        value: text/plain
        id: pair_c40ac9014ee64fc3919b95533b6bb692
    authentication:
      token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
      type: bearer
    metaSortKey: -1723737389692
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_c2d7d7c1263b400aa0dcf5ee69c78ba1
    parentId: fld_3295af04a65943b697a22ec844e2f48b
    modified: 1725551373906
    created: 1723738498092
    url: "{{ _.ENVIRONMENT_URI }}/signup-plus/payments"
    name: 7C. Get Signup+ data for standard payment
    description: >-
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/getuserdatabypayment)


      ## Testing result thresholds


      When you make a identity data request to the `/signup-plus/payments` endpoint, the response you get depends on the value of the `amount_in_minor` parameter at payment creation. These are the possible results and thresholds:


      | Value of `amount_in_minor`      | Signup+ response | Response type |

      | :---------- | :----------------------------------  | ------- |

      | 0-1799      | Test user data 1: Tommie Burke.      | Success |

      | 1800-2099   | Test user data 2: Leon Gordon.       | Success |

      | 2100-2199   | Test user data 3: Isabella Allen.    | Success |

      | 2200-9999   | Range reserved for new test users. Defaults to test user data 3: Leon Gordon. | Success |

      | 10000-24999 | Joint accounts not supported.        | Error |

      | 25000-34999 | User data not found                  | Error |

      | >35000      | Range reserved for new scenarios. Defaults to User data not found error. | Error |


      [Learn more about testing Signup+ in Sandbox](https://docs.truelayer.com/docs/signup-sandbox).
    method: GET
    body: {}
    parameters:
      - id: pair_93e71676aa574a5a9726980b8e2cf6f3
        name: payment_id
        value: "{% prompt 'Payment ID (must have executed status)', '', '', '', false,
          true %}"
        description: ""
    headers: []
    authentication:
      type: bearer
      token: "{% response 'body', 'req_6a1d85dcef0d45f7985245d59ef95360',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'always', 60 %}"
    metaSortKey: -1723737389642
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_459739c39fce414caed0d24b0eb67db1
    parentId: fld_3666bfe18e4042199ba4885a4b41fccd
    modified: 1725551491872
    created: 1723738444185
    url: "{{ _.ENVIRONMENT_URI }}/v3/payments"
    name: 7D. Create payment
    description: >-
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/create-payment)


      > ## 📘 Enabling age verification in Sandbox

      >

      > Age verification is part of our Signup+ product. You need to contact us to enable the feature if you want to age verification in sandbox.


      ## Testing result thresholds


      When you make a payment creation request that includes the `verification.remitter_date_of_birth` parameter, The value of the `amount_in_minor` parameter determines which response you get.


      | Value of `amount_in_minor`	| Signup+ response | Response type |

      | :--- | :--- | :--- |

      |<1800	| Age not legal. |	Error |

      | 1800-9999	| Identity data found.	| Success |

      | 10000-24999 |	Joint accounts not supported. |	Error |

      | >25000 |	User data not found.	| Error |


      [Learn more about testing Signup+ in Sandbox](https://docs.truelayer.com/docs/signup-sandbox).
    method: POST
    body:
      mimeType: application/json
      text: >-
        {
        	"amount_in_minor": 2000,
        	"currency": "GBP",
        	"payment_method": {
        		"provider_selection": {
        			"type": "user_selected"
        		},
        		"filter": {
        			"countries": [
        				"GB"
        			]
        		},
        		"type": "bank_transfer",
        		"beneficiary": {
        			"type": "merchant_account",
              "verification": {
                "type": "automated",
                "remitter_date_of_birth": true
              },
        			"merchant_account_id": "{% prompt 'Beneficiary Merchant Account ID', 'Please get your merchant_account_id by calling the GET List Merchant Accounts endpoint. ', '', '', false, true %}",
        			"reference": "Test payment"
        		}
        	},
        	"user": {
        		"id": "f61c0ec7-0f83-414e-8e5f-aace86e0ed35",
        		"name": "Jonathan Sandbridge",
        		"email": "john@sandbridge.com",
        		"phone": "+44123456789",
        		"date_of_birth": "1992-11-28",
        		"address": {
        			"address_line1": "40 Finsbury Square",
        			"city": "London",
        			"state": "London",
        			"zip": "EC2A 1PX",
        			"country_code": "GB"
        		}
        	},
        	"related_product": {
        		"signup_plus": {}
        	}
        }
    parameters: []
    headers:
      - id: pair_4901eb02eb9f41dfbff0b110f9bdd25d
        name: Content-Type
        value: application/json
      - id: pair_98be0a07c8ec4390bcaa878fd1d1a7c7
        name: Idempotency-Key
        value: "{% uuid 'v4' %}"
    authentication:
      token: "{% response 'body', 'req_6a1d85dcef0d45f7985245d59ef95360',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 60 %}"
      type: bearer
    metaSortKey: -1723737389742
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: fld_3666bfe18e4042199ba4885a4b41fccd
    parentId: fld_15510ce7703348eeb1e036b0e2567487
    modified: 1723738444182
    created: 1723738444182
    name: Pay-in with age verification
    description: ""
    environment: {}
    environmentPropertyOrder: null
    metaSortKey: -1696560922592.5
    _type: request_group
  - _id: req_1abc4c37f60b46afa20e9b1f11181806
    parentId: fld_3666bfe18e4042199ba4885a4b41fccd
    modified: 1724159438452
    created: 1723738444187
    url: https://payment.truelayer-sandbox.com/payments#payment_id={% response
      'body', 'req_459739c39fce414caed0d24b0eb67db1', 'b64::JC5pZA==::46b',
      'always', 60 %}&resource_token={% response 'body',
      'req_459739c39fce414caed0d24b0eb67db1',
      'b64::JC5yZXNvdXJjZV90b2tlbg==::46b', 'always', 60 %}&return_uri={{
      _.RETURN_URI }}
    name: 7E. Create HPP
    description: >-
      ## How to use the HPP link


      To test the HPP payment authorisation flow:


      - Click on the 'Query' tab.

      - Copy the content and open it in a browser page.


      [Learn more about the hosted payment page in our docs](https://docs.truelayer.com/docs/hosted-payment-page).
    method: BLD
    body:
      mimeType: ""
      text: "\n\n"
    parameters: []
    headers:
      - name: Content-Type
        value: text/plain
        id: pair_c40ac9014ee64fc3919b95533b6bb692
    authentication:
      token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
      type: bearer
    metaSortKey: -1723737389692
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_543b22507d614ff3848fbeecaf4a1745
    parentId: fld_3666bfe18e4042199ba4885a4b41fccd
    modified: 1725551564370
    created: 1724083150124
    url: "{{ _.ENVIRONMENT_URI }}/signup-plus/payments"
    name: 7F. Get data for age-verified payment
    description: >-
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/getuserdatabypayment)


      ## Testing result thresholds


      When you make a identity data request to the `/signup-plus/payments` endpoint, the response you get depends on the value of the `amount_in_minor` parameter at payment creation. These are the possible results and thresholds:


      | Value of `amount_in_minor`      | Signup+ response | Response type |

      | :---------- | :----------------------------------  | ------- |

      | 0-1799      | Test user data 1: Tommie Burke.      | Success |

      | 1800-2099   | Test user data 2: Leon Gordon.       | Success |

      | 2100-2199   | Test user data 3: Isabella Allen.    | Success |

      | 2200-9999   | Range reserved for new test users. Defaults to test user data 3: Leon Gordon. | Success |

      | 10000-24999 | Joint accounts not supported.        | Error |

      | 25000-34999 | User data not found                  | Error |

      | >35000      | Range reserved for new scenarios. Defaults to User data not found error. | Error |


      [Learn more about testing Signup+ in Sandbox](https://docs.truelayer.com/docs/signup-sandbox).
    method: GET
    body: {}
    parameters:
      - id: pair_93e71676aa574a5a9726980b8e2cf6f3
        name: payment_id
        value: "{% prompt 'Payment ID (must have executed status)', '', '', '', false,
          true %}"
        description: ""
    headers: []
    authentication:
      type: bearer
      token: "{% response 'body', 'req_6a1d85dcef0d45f7985245d59ef95360',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'always', 60 %}"
    metaSortKey: -1723737389642
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_b2663ce7be5c4ee4a985012a8f1bcbd5
    parentId: fld_31cdaf9478de484097289917e9d7dc76
    modified: 1724953490838
    created: 1707910287142
    url: "{{ _.ENVIRONMENT_URI }}/v3/payments-providers/search"
    name: 8A. Get a list of providers
    description: >
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/search-payment-providers)
    method: POST
    body:
      mimeType: application/json
      text: |-
        {
        	"currencies": [
        		"GBP"
        	],
        	"countries": [
        		"GB"
        	],
        	"customer_segments": [
        		"retail"
        	],
        	"capabilities": {
        		"payments": {
        			"bank_transfer": {}
        		}
        	},
        	"authorization_flow": {
        		"configuration": {
        			"redirect": {}
        		}
        	}
        }
    parameters: []
    headers:
      - name: Content-Type
        value: application/json
    authentication:
      type: bearer
      token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'never', 60 %}"
    metaSortKey: -1675074171422.75
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: fld_31cdaf9478de484097289917e9d7dc76
    parentId: wrk_35ba728d03c548b68b087106738bcdec
    modified: 1724953443630
    created: 1707909564706
    name: 8. Payments API V3 providers endpoint
    description: ""
    environment: {}
    environmentPropertyOrder: null
    metaSortKey: -499999775
    _type: request_group
  - _id: req_4c64faaa76104cc497df8a49364c5317
    parentId: fld_31cdaf9478de484097289917e9d7dc76
    modified: 1724953516825
    created: 1707909564707
    url: "{{ _.ENVIRONMENT_URI }}/v3/payments-providers/search"
    name: 8B. Get a list of providers - with user form in authorisation flow
    description: >
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/search-payment-providers)
    method: POST
    body:
      mimeType: application/json
      text: |-
        {
        	"currencies": [
        		"GBP",
        		"EUR"
        	],
        	"countries": [
        		"GB",
        		"FR",
        		"ES"
        	],
        	"customer_segments": [
        		"retail"
        	],
        	"capabilities": {
        		"payments": {
        			"bank_transfer": {}
        		},
        		"mandates": {
        			"vrp_sweeping": {}
        		}
        	},
        	"authorization_flow": {
        		"configuration": {
        			"redirect": {},
        			"form": {
        				"input_types": [
        					"text",
        					"select",
        					"text_with_image"
        				]
        			}
        		}
        	}
        }
    parameters: []
    headers:
      - name: Content-Type
        value: application/json
    authentication:
      type: bearer
      token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'never', 60 %}"
    metaSortKey: -1675074171322.75
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: req_0f03d96e804d409e8cfec5333676961b
    parentId: fld_31cdaf9478de484097289917e9d7dc76
    modified: 1724953533809
    created: 1707909564706
    url: "{{ _.ENVIRONMENT_URI }}/v3/payments-providers/"
    name: 8C. Get a payments provider
    description: >
      ## [See this request in our API
      reference](https://docs.truelayer.com/reference/get-payment-provider)
    method: GET
    body: {}
    parameters:
      - id: pair_7f9081057ee548d2aa940ed34e7af0b8
        name: ""
        value: ""
        description: ""
        disabled: false
      - id: pair_4327c28824274b07a88057caa10ae5e6
        name: ""
        value: ""
        description: ""
        disabled: false
    headers:
      - name: User-Agent
        value: insomnia/2023.5.8
    authentication:
      type: bearer
      token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
        'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'never', 60 %}"
    metaSortKey: -1675074171272.75
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: env_5cde1fdf29084b2bac783e3c034f76c1
    parentId: wrk_35ba728d03c548b68b087106738bcdec
    modified: 1707909564656
    created: 1707909564656
    name: Base Environment
    data: {}
    dataPropertyOrder: null
    color: null
    isPrivate: false
    metaSortKey: 1686653298731
    _type: environment
  - _id: jar_aa415129f54b4943a38a43be132f2d22
    parentId: wrk_35ba728d03c548b68b087106738bcdec
    modified: 1707909564660
    created: 1707909564660
    name: Default Jar
    cookies: []
    _type: cookie_jar
  - _id: spc_c1ebe0498fc64cf686c4e59d7b0a7f66
    parentId: wrk_35ba728d03c548b68b087106738bcdec
    modified: 1720014088327
    created: 1720014088327
    fileName: TL Payments v3 collection
    contents: ""
    contentType: yaml
    _type: api_spec
  - _id: env_7910ef6a3a5b428ab862c93939cf506d
    parentId: env_5cde1fdf29084b2bac783e3c034f76c1
    modified: 1707909564657
    created: 1707909564657
    name: Production Sample Env
    data: {}
    dataPropertyOrder: {}
    color: null
    isPrivate: false
    metaSortKey: 1690384195128
    _type: environment
  - _id: env_28d8b3df6b3a4507ae84389efd86b93b
    parentId: env_5cde1fdf29084b2bac783e3c034f76c1
    modified: 1725445953605
    created: 1707909564658
    name: Sandbox Sample Env
    data:
      ENVIRONMENT_URI: https://api.truelayer-sandbox.com
      AUTH_SERVER_URI: https://auth.truelayer-sandbox.com
      REQUIRE_JWS: true
      CLIENT_ID: <Your sandbox client_id>
      CLIENT_SECRET: <This was generated when you created your Console account>
      CERTIFICATE_ID: <KID from Console>
      PRIVATE_KEY: <Your private key>
      RETURN_URI: <Return_URI - make sure you register this in Console!>
    dataPropertyOrder:
      "&":
        - ENVIRONMENT_URI
        - AUTH_SERVER_URI
        - REQUIRE_JWS
        - CLIENT_ID
        - CLIENT_SECRET
        - CERTIFICATE_ID
        - PRIVATE_KEY
        - RETURN_URI
    color: null
    isPrivate: false
    metaSortKey: 1690384196662
    _type: environment
=======
type: collection.insomnia.rest/5.0
name: TrueLayer API collection
meta:
  id: wrk_308b090508e64c5c88ff1e3956013159
  created: 1757517700030
  modified: 1757517700030
  description: ""
collection:
  - name: 1. Authentication
    meta:
      id: fld_109dcf76bf694238baf9afe06ee0e81b
      created: 1707909564663
      modified: 1723734613355
      sortKey: -1635961782159
      description: ""
    children:
      - url: "{{ _.AUTH_SERVER_URI }}/connect/token"
        name: 1B. Generate access token - Mandate
        meta:
          id: req_04347fd307f642c5ade1eb1b8e90c4d8
          created: 1707909564664
          modified: 1725547133394
          isPrivate: false
          description: >-
            ## [See this request in our API
            reference](https://docs.truelayer.com/reference/generateaccesstoken)


            Use this request to generate an `access_token` for the VRP-related
            requests in this collection.


            Note that payments on a mandate should also have the
            `recurring_payments:sweeping` or `recurring_payments:commercial`
            scopes, not just mandates themselves.
          sortKey: -1612882494723.3125
        method: POST
        body:
          mimeType: application/x-www-form-urlencoded
          params:
            - name: client_id
              value: "{{ _.CLIENT_ID }}"
              description: ""
              id: pair_c22e9af536f74fe0a5e747fc6eecad6d
            - name: client_secret
              value: "{{ _.CLIENT_SECRET }}"
              description: ""
              id: pair_df17b794d78f4d03be3b6c37527422c8
            - name: scope
              value: recurring_payments:sweeping
              description: ""
              disabled: true
              id: pair_b84a19cd1a1c4b23890b5d38cd2d94f1
            - name: grant_type
              value: client_credentials
              description: ""
              disabled: false
              id: pair_6e922ac379d94ced8366d885e25bf73f
            - name: scope
              value: payments recurring_payments:sweeping
              description: ""
              id: pair_60b83516aa964b7688b31d7bb4593622
        headers:
          - name: Content-Type
            value: application/x-www-form-urlencoded
          - name: ""
            value: ""
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.AUTH_SERVER_URI }}/connect/token"
        name: 1A. Generate access token
        meta:
          id: req_a922ee6a716e496c9f3542dfd5e92c04
          created: 1707909564664
          modified: 1757509558538
          isPrivate: false
          description: >-
            ## [See this request in our API
            reference](https://docs.truelayer.com/reference/generateaccesstoken)


            Use this request to generate an `access_token` for most of the
            requests in this collection except for VRP and Signup+ requests.


            You can reference the result of this request as a 'Bearer' token for
            any new requests you make.
          sortKey: -1612882494823.3125
        method: POST
        body:
          mimeType: application/x-www-form-urlencoded
          params:
            - name: client_id
              value: "{{ _.CLIENT_ID }}"
              description: ""
              id: pair_c22e9af536f74fe0a5e747fc6eecad6d
            - name: client_secret
              value: "{{ _.CLIENT_SECRET }}"
              description: ""
              id: pair_df17b794d78f4d03be3b6c37527422c8
            - name: scope
              value: payments
              description: ""
              id: pair_b84a19cd1a1c4b23890b5d38cd2d94f1
            - name: grant_type
              value: client_credentials
              description: ""
              id: pair_6e922ac379d94ced8366d885e25bf73f
        headers:
          - name: Content-Type
            value: application/x-www-form-urlencoded
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.AUTH_SERVER_URI }}/connect/token"
        name: 1C. Generate access token - Signup+
        meta:
          id: req_5abf3991d8aa40199571c3b1315983ad
          created: 1723737465425
          modified: 1725547159019
          isPrivate: false
          description: >-
            ## [See this request in our API
            reference](https://docs.truelayer.com/reference/generateaccesstoken)


            Use this request to generate an `access_token` for the Signup+
            requests in this collection.
          sortKey: -1612882494623.3125
        method: POST
        body:
          mimeType: application/x-www-form-urlencoded
          params:
            - name: client_id
              value: "{{ _.CLIENT_ID }}"
              description: ""
              id: pair_c22e9af536f74fe0a5e747fc6eecad6d
            - name: client_secret
              value: "{{ _.CLIENT_SECRET }}"
              description: ""
              id: pair_df17b794d78f4d03be3b6c37527422c8
            - name: scope
              value: payments signupplus
              description: ""
              id: pair_b84a19cd1a1c4b23890b5d38cd2d94f1
            - name: grant_type
              value: client_credentials
              description: ""
              id: pair_6e922ac379d94ced8366d885e25bf73f
        headers:
          - name: Content-Type
            value: application/x-www-form-urlencoded
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
    scripts:
      afterResponse: ""
      preRequest: ""
  - name: 2. Merchant accounts
    meta:
      id: fld_a3b9b8c7e1f041d785a65469e83e1c1f
      created: 1707909564665
      modified: 1725378784314
      sortKey: -1635944926822.625
      description: ""
    children:
      - url: "{{ _.ENVIRONMENT_URI }}/v3/merchant-accounts"
        name: 2A. List merchant accounts
        meta:
          id: req_563e3ced61e54b19869fee96719ae52a
          created: 1707909564665
          modified: 1757517788453
          isPrivate: false
          description: |-
            ## [See this request in our API reference](https://docs.truelayer.com/reference/list-operating-accounts)
            The merchant accounts returned here are based on the `client_id` and `client_secret` you provided when you generated an `access_token`.

            In this Insomnia collection, these are likely stored in your environment variables.
          sortKey: -1635957334614.5
        method: GET
        authentication:
          type: bearer
          token: "{% response 'body', 'req_a922ee6a716e496c9f3542dfd5e92c04',
            'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.ENVIRONMENT_URI }}/v3/merchant-accounts/{% prompt 'Merchant Account
          ID', '', '', '', false, true %}"
        name: 2B. Get merchant account details
        meta:
          id: req_63bf79a95ad24a5e84103c200059b8a8
          created: 1707909564666
          modified: 1724949229909
          isPrivate: false
          description: |-
            ## [See this request in our API reference](https://docs.truelayer.com/reference/get-operating-account)
            This endpoint returns various details about a given merchant account, such as its bank details and the current and available balance of the account.

            You specify the merchant account to return details about as a path parameter.
          sortKey: -1635918451979.75
        method: GET
        authentication:
          type: bearer
          token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
            'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.ENVIRONMENT_URI }}/v3/merchant-accounts/{% prompt 'Merchant Account
          ID', '', '', '', false, true %}/transactions"
        name: 2C. Get merchant account transactions
        meta:
          id: req_e2f52f93581c41139e20c6a55b403f5c
          created: 1707909564666
          modified: 1724949244826
          isPrivate: false
          description: |-
            ## [See this request in our API reference](https://docs.truelayer.com/reference/merchant-account-get-transactions)

            This endpoint returns a list of transactions and payment sources for your merchant account`id`, which you provide as a path parameter in your request.

            ## Pagination

            > By default, all `client_id`s made after December 2023 include a `pagination` object. It can be enabled for `client_id`s that were made earlier by including the `tl-enable-pagination:true` with your request.

            Pagination means that if your response would contain more than 1000 transactions, you receive 1000, and then make additional requests to get more. This avoids a problem where it would take a long time to retrieve transactions for merchant accounts with many transactions.

            If your response contains more than 2000 transactions, the final `pagination` object in the response contains a `next_cursor` object, with an associated string. If you include this string in your subsequent request, you'll receive the next page, which contains the next 2000 transactions. You can repeat this until the response no longer contains the `next_cursor` object.

            The **Query** and **Headers** tabs in this request in Insomnia enable you to test paginated responses.

            Learn more about [this endpoint](https://docs.truelayer.com/docs/get-your-merchant-account-transactions-or-payment-sources) and [pagination](https://docs.truelayer.com/docs/get-your-merchant-account-transactions-or-payment-sources#pagination-for-the-transactions-endpoint) in our docs.
          sortKey: -1635903870991.7188
        method: GET
        parameters:
          - name: from
            value: "{% prompt 'From Date', '', '2024-08-01T01:01:01Z', '', false, true %}"
            id: pair_e51a46377bb941869e1d413bba2089bb
          - name: to
            value: "{% now 'iso-8601', '' %}"
            id: pair_86e29d89e8584c3399b1a20e8eeec028
          - name: cursor
            value: "{% response 'body', 'req_9dbcbb34a3764acba445e3d1d7d4d8d9',
              'b64::JC5wYWdpbmF0aW9uLm5leHRfY3Vyc29y::46b', 'always', 60 %}"
            disabled: true
            id: pair_4718c64d0df64b18a006fbd29f18026a
        headers:
          - name: Idempotency-Key
            value: "{% uuid 'v4' %}"
          - name: tl-enable-pagination
            value: "true"
        authentication:
          type: bearer
          token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
            'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: false
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.ENVIRONMENT_URI }}/v3/merchant-accounts/{% prompt 'Merchant Account
          ID', '', '', '', false, true %}/sweeping"
        name: 2D. Set up or update sweeping settings
        meta:
          id: req_5289c814c6244de3a0fa333116e1219a
          created: 1707909564667
          modified: 1725547332407
          isPrivate: false
          description: |-
            ## [See this request in our API reference](https://docs.truelayer.com/reference/merchant-account-setup-sweeping)

            Use this request to set up sweeping settings for your GBP merchant account.

            Note that while you can set the sweeping amount and frequency, and see these reflected in the sandbox environment in Console, sandbox doesn't actually sweep funds.
          sortKey: -1635889289953.6875
        method: POST
        body:
          mimeType: application/json
          text: |-
            {
             "max_amount_in_minor": 4000000,
             "frequency": "daily"
            }
        headers:
          - name: Content-Type
            value: application/json
          - name: Idempotency-Key
            value: "{% uuid 'v4' %}"
        authentication:
          type: bearer
          token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
            'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.ENVIRONMENT_URI }}/v3/merchant-accounts/{% prompt 'Merchant Account
          ID', '', '', '', false, true %}/sweeping"
        name: 2G. Delete sweeping settings
        meta:
          id: req_876e755517454a1b978d2723180076be
          created: 1707909564667
          modified: 1725547491488
          isPrivate: false
          description: |-
            ## [See this request in our API reference](https://docs.truelayer.com/reference/merchant-account-disable-sweeping)

            Use this request to delete the existing sweeping settings for a merchant account. You get a **204 No Response** response to your request, but this means it's successful.

            You can check it was successful with the **2F. Get existing sweeping settings** request.
          sortKey: -1635884429649.3438
        method: DELETE
        body:
          mimeType: application/json
          text: ""
        headers:
          - name: Content-Type
            value: application/json
          - name: Idempotency-Key
            value: "{% uuid 'v4' %}"
        authentication:
          type: bearer
          token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
            'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.ENVIRONMENT_URI }}/v3/merchant-accounts/{% prompt 'Merchant Account
          ID', '', '', '', false, true %}/sweeping"
        name: 2F. Get existing sweeping settings
        meta:
          id: req_79470455363245808aa4dafc92577487
          created: 1707909564668
          modified: 1725547500483
          isPrivate: false
          description: |-
            ## [See this request in our API reference](https://docs.truelayer.com/reference/merchant-account-get-sweeping)

            Use this request to check your existing sweeping settings for your merchant account without editing them.

            You can also check your sweeping settings in the **Merchant Account** tab in Console.
          sortKey: -1635886859801.5156
        method: GET
        body:
          mimeType: application/json
          text: ""
        headers:
          - name: Content-Type
            value: application/json
          - name: Idempotency-Key
            value: "{% uuid 'v4' %}"
        authentication:
          type: bearer
          token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
            'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.ENVIRONMENT_URI }}/v3/merchant-accounts/{% prompt 'Merchant Account
          ID', '', '', '', false, true %}/sweeping"
        name: 2E. Set up or update sweeping settings - EUR merchant account
        meta:
          id: req_a59764f73d6e405297c61687a97900d1
          created: 1707909564668
          modified: 1725547343519
          isPrivate: false
          description: |-
            ## [See this request in our API reference](https://docs.truelayer.com/reference/merchant-account-setup-sweeping)

            Use this request to set up sweeping settings for your GBP merchant account.

            Note that while you can set the sweeping amount and frequency, and see these reflected in the sandbox environment in Console, sandbox doesn't actually sweep funds.
          sortKey: -1635888074877.6016
        method: POST
        body:
          mimeType: application/json
          text: |-
            {
             "max_amount_in_minor": 400000,
             "currency": "EUR",
             "frequency": "daily"
            }
        headers:
          - name: Content-Type
            value: application/json
          - name: Idempotency-Key
            value: "{% uuid 'v4' %}"
        authentication:
          type: bearer
          token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
            'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.ENVIRONMENT_URI }}/v3/merchant-accounts/{% prompt 'Merchant Account
          ID', '', '', '', false, true %}/payment-sources"
        name: 2H. Get merchant account payment sources
        meta:
          id: req_14db02b767724573962b3d1f6d8cf96a
          created: 1724247859008
          modified: 1725548353269
          isPrivate: false
          description: |-
            ## [See this request in our API reference](https://docs.truelayer.com/reference/get-merchant-account-payment-sources)

            Use this endpoint to get the full list of payment sources that have made a payment to your merchant account. A payment source includes a user's name, payment source `id`, and bank details.

            You use the payment source `id` as the basis of a closed-loop payout.

            Note that in the sandbox environment, you only get a single payment source in response to this endpoint.
          sortKey: -1635884429599.3438
        method: GET
        parameters:
          - name: user_id
            value: "{% prompt 'User ID', 'Provide the user ID you want to return payment
              sources for.', '', '', false, true %}"
            id: pair_56b2b30bf6a945f48d31b04d509d0568
        authentication:
          type: bearer
          token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
            'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
    scripts:
      afterResponse: ""
      preRequest: ""
  - name: 4. Payouts
    meta:
      id: fld_f4c1c0b65cf14e3d859f5fbf0beb4614
      created: 1707909564668
      modified: 1723734850030
      sortKey: -1635894360826
      description: ""
    children:
      - name: Refunds
        meta:
          id: fld_9b36615dab00474ca823cb8ca20fdbcc
          created: 1707909564669
          modified: 1707909564669
          sortKey: -1612882494719.7969
          description: ""
        children:
          - url: "{{ _.ENVIRONMENT_URI }}/v3/payments/{% prompt 'Payment ID', '', '', '',
              false, true %}/refunds/{% prompt 'Refund ID', '', '', '', false,
              true %}"
            name: 4F. Get refund
            meta:
              id: req_775ada4864f648e8824bc73b5572c04e
              created: 1707909564669
              modified: 1724950205513
              isPrivate: false
              description: |-
                ## [See this request in our API reference](https://docs.truelayer.com/reference/get-payment-refund)

                You can provide a refund `id` as a path parameter in the prompt when you run this request. This returns details of a single refund for a payment.
              sortKey: -1650310796702.75
            method: GET
            authentication:
              type: bearer
              token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
          - url: "{{ _.ENVIRONMENT_URI }}/v3/payments/{% prompt 'Payment ID', '', '', '',
              false, true %}/refunds"
            name: 4E. Create a refund
            meta:
              id: req_e48e1f31f03648909847359c6cdfc858
              created: 1707909564669
              modified: 1724950140592
              isPrivate: false
              description: |-
                ## [See this request in our API reference](https://docs.truelayer.com/reference/create-payment-refund)

                To test this request, you must have an existing payment `id`, which you can provide as a path parameter by completing the prompt when you run the request.

                A refund, or multiple refunds, cannot exceed the value of an inital pay-in to your merchant account.

                [Learn more about refunds in our documentation](https://docs.truelayer.com/docs/refund-a-payment).
              sortKey: -1650310796752.75
            method: POST
            body:
              mimeType: application/json
              text: |-
                {
                "amount_in_minor": 1,
                "reference": "My reference"
                }
            headers:
              - name: Content-Type
                value: application/json
              - name: "tl_version    "
                value: "2"
              - name: Idempotency-Key
                value: "{% uuid 'v4' %}"
            authentication:
              type: bearer
              token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
          - url: "{{ _.ENVIRONMENT_URI }}/v3/payments/{% prompt 'Payment ID', '', '', '',
              false, true %}/refunds"
            name: 4G. Get refunds
            meta:
              id: req_ca3d7bd62254493fa1729cbcd2aa6353
              created: 1707909564670
              modified: 1724950237114
              isPrivate: false
              description: |-
                ## [See this request in our API reference](https://docs.truelayer.com/reference/get-payment-refunds)

                You can provide a refund `id` as a path parameter in the prompt when you run this request. This returns details of all refunds made for a payment.
              sortKey: -1649730415032.375
            method: GET
            authentication:
              type: bearer
              token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
        scripts:
          afterResponse: ""
          preRequest: ""
      - name: "Verified Payout "
        meta:
          id: fld_2ff1916aed6c4102abc8bb919d93540a
          created: 1757512432569
          modified: 1757516982582
          sortKey: -1612882494744.7969
          description: ""
        children:
          - url: "{{ _.ENVIRONMENT_URI }}/v3/payouts"
            name: Create User_determined Payout
            meta:
              id: req_6ca22c4065934181bcf7804669d33da6
              created: 1757512432573
              modified: 1757512491151
              isPrivate: false
              description: ""
              sortKey: -1752832909058
            method: POST
            body:
              mimeType: application/json
              text: >-
                {
                	"amount_in_minor": 1,
                	"merchant_account_id": "{% prompt 'Merchant Account ID', 'Enter your Merchant Account ID', '', '', false, true %}",
                	"currency": "GBP",
                	"beneficiary": {
                		"user": {
                			"name": "{% prompt 'Beneficiary User name', 'Enter beneficiary User name', 'Transaction account 1', '', false, true %}",
                			"email": "{% prompt 'Beneficiary User email', 'Enter beneficiary User email', '', '', false, true %}",
                			"phone": "+445901234567",
                			"id": "{% faker 'guid' %}"
                		},
                		"verification": {
                			"verify_name": true,
                			"transaction_search_criteria": {
                				"amount_in_minor": 1000,
                				"currency": "GBP",
                				"created_at": "2024-05-01",
                				"tokens": [
                					"Betropolis"
                				]
                			}
                		},
                		"provider_selection": {
                			"type": "user_selected"
                		},
                		"type": "user_determined",
                		"reference": "{% prompt 'Verified Payout Reference', 'Enter Verified Payout Reference', 'Test reference TVP', '', false, true %}"
                	}
                }
            headers:
              - name: Content-Type
                value: application/json
              - name: Idempotency-Key
                value: "{% uuid 'v4' %}"
            authentication:
              type: bearer
              token: "{% response 'body', 'req_f8313a4d44204235b68efc08bb269230',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
          - url: "{{ _.HP2_URI }}/payouts#payout_id={% response 'body',
              'req_0a158512d39743ee9aaaeab1e08d2eae', 'b64::JC5pZA==::46b',
              'never', 60 %}&resource_token={% response 'body',
              'req_0a158512d39743ee9aaaeab1e08d2eae',
              'b64::JC5yZXNvdXJjZV90b2tlbg==::46b', 'never', 60 %}&return_uri={{
              _.RETURN_URI }}"
            name: Create HPP TVP
            meta:
              id: req_0e85688337894d6c86434ad235a09d02
              created: 1757512432575
              modified: 1757512752467
              isPrivate: false
              description: |-
                How to create and use the HPP url: 
                - Click on the 'Query' tab
                - Copy the content and open it in a browser page"

                See docs: https://docs.truelayer.com/docs/hosted-payment-page-for-payments-v3
              sortKey: -1752832908958
            method: BLD
            body:
              mimeType: ""
              text: "\n\n"
            headers:
              - name: Content-Type
                value: text/plain
            authentication:
              type: bearer
              token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
        scripts:
          afterResponse: ""
          preRequest: ""
      - url: "{{ _.ENVIRONMENT_URI }}/v3/payouts"
        name: 4A. Create payout to a payment source
        meta:
          id: req_5cd5d315d7484c84a18b55986909ffbd
          created: 1707909564671
          modified: 1757512801059
          isPrivate: false
          description: |-
            ## [See this request in our API reference](https://docs.truelayer.com/reference/create-payout)

            A payout back to a user's bank details they paid in with (payment source) is also known as a [closed-loop payout](https://docs.truelayer.com/docs/make-a-payout-to-an-account-that-paid-in).
          sortKey: -1612882494770.9688
        method: POST
        body:
          mimeType: application/json
          text: >-
            {
            	"merchant_account_id": "{% prompt 'Merchant Account ID', 'Please get your merchant_account_id by calling the GET List Merchant Accounts endpoint. ', '', '', false, true %}",
            	"amount_in_minor": 10,
            	"currency": "GBP",
            	"beneficiary": {
            		"type": "payment_source",
            		"user_id": "{% prompt 'User_ID', '', '', '', false, true %}",
            		"payment_source_id": "{% prompt 'Payment_Source.ID', 'Get the Payment Source ID from the Payin payment \'settled\' status body', '', '', false, true %}",
            		"reference": "PayOutRef 1"
            	}
            }
        headers:
          - name: Content-Type
            value: application/json
          - name: Idempotency-Key
            value: "{% uuid 'v4' %}"
        authentication:
          type: bearer
          token: "{% response 'body', 'req_f8313a4d44204235b68efc08bb269230',
            'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: false
          rebuildPath: true
      - url: "{{ _.ENVIRONMENT_URI }}/v3/payouts/{% prompt 'PayOut ID', '', '', '',
          false, true %}"
        name: 4D. Get payout
        meta:
          id: req_c65e954a783340ed9caeec45b419ceff
          created: 1707909564671
          modified: 1724950039821
          isPrivate: false
          description: >
            ## [See this request in our API
            reference](https://docs.truelayer.com/reference/get-payout)
          sortKey: -1612882494769.7969
        method: GET
        body:
          mimeType: application/json
          text: ""
        headers:
          - name: Content-Type
            value: application/json
          - name: Idempotency-Key
            value: "{% uuid 'v4' %}"
        authentication:
          type: bearer
          token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
            'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.ENVIRONMENT_URI }}/v3/payouts"
        name: 4C. Create payout to an external account - IBAN
        meta:
          id: req_6c8494ca8de34a85a218a91c8ba3b6ff
          created: 1707909564672
          modified: 1724950021716
          isPrivate: false
          description: |
            ## [See this request in our API reference](https://docs.truelayer.com/reference/create-payout)

            A payout to an external account's bank details is also known as an [open-loop payout](https://docs.truelayer.com/docs/make-a-payout-to-an-external-account). This example pays a European account's IBAN.
          sortKey: -1612882494770.0715
        method: POST
        body:
          mimeType: application/json
          text: >-
            {
            	"merchant_account_id": "{% prompt 'Merchant Account ID', 'Please get your merchant_account_id by calling the GET List Merchant Accounts endpoint. ', '', '', false, true %}",
            	"amount_in_minor": 1,
            	"currency": "GBP",
            	"beneficiary": {
            		"type": "external_account",
            		"account_holder_name": "Ben Eficiary",
            		"account_identifier": {
            			"type": "iban",
            			"iban": ""
            		},
            		"reference": "Ref Payout",
            		"address": {
            			"address_line1": "40 Finsbury Square",
            			"city": "London",
            			"state": "London",
            			"zip": "EC2A 1PX",
            			"country_code": "GB"
            		},
            		"date_of_birth": "1990-01-31"
            	}
            }
        headers:
          - name: Content-Type
            value: application/json
          - name: Idempotency-Key
            value: "{% uuid 'v4' %}"
        authentication:
          type: bearer
          token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
            'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.ENVIRONMENT_URI }}/v3/payouts"
        name: 4B. Create payout to an external account - SCAN
        meta:
          id: req_97afed3c69f54b6a903d6b4d09e602d6
          created: 1707909564673
          modified: 1724949854252
          isPrivate: false
          description: |-
            ## [See this request in our API reference](https://docs.truelayer.com/reference/create-payout)

            A payout to an external account's bank details is also known as an [open-loop payout](https://docs.truelayer.com/docs/make-a-payout-to-an-external-account). This example pays a UK account's sort code and account number (SCAN).
          sortKey: -1612882494770.5293
        method: POST
        body:
          mimeType: application/json
          text: >-
            {
            	"merchant_account_id": "{% prompt 'Merchant Account ID', 'Please get your merchant_account_id by calling the GET List Merchant Accounts endpoint. ', '', '', false, true %}",
            	"amount_in_minor": 1,
            	"currency": "GBP",
            	"beneficiary": {
            		"type": "external_account",
            		"account_holder_name": "Ben Eficiary",
            		"account_identifier": {
            			"type": "sort_code_account_number",
            			"sort_code": "123456",
            			"account_number": "12345678"
            		},
            		"reference": "Payout reference",
            		"address": {
            			"address_line1": "40 Finsbury Square",
            			"city": "London",
            			"state": "London",
            			"zip": "EC2A 1PX",
            			"country_code": "GB"
            		},
            		"date_of_birth": "1990-01-31"
            	}
            }
        headers:
          - name: Content-Type
            value: application/json
          - name: Idempotency-Key
            value: "{% uuid 'v4' %}"
        authentication:
          type: bearer
          token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
            'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: false
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
    scripts:
      afterResponse: ""
      preRequest: ""
  - name: 6. VRP Mandates and Payments
    meta:
      id: fld_68e917a09a614a99815ae5fb3ce7761e
      created: 1707909564689
      modified: 1723735093660
      sortKey: -1000000000
      description: ""
    children:
      - name: Mandate to external account
        meta:
          id: fld_57f83bb8d43f4727a74510759fe3d8a2
          created: 1707909564690
          modified: 1723735221406
          sortKey: -1648351513063.5
          description: ""
        children:
          - name: Payment on mandate to external account
            meta:
              id: fld_d7f9b0344ce840a4b9cded56244c2962
              created: 1707909564690
              modified: 1724949036409
              sortKey: 400
              description: ""
            children:
              - url: "{{ _.ENVIRONMENT_URI }}/v3/payments"
                name: 6Q. Create payment on a mandate
                meta:
                  id: req_51f392ce0d454fdea6075fcae587ca9e
                  created: 1707909564690
                  modified: 1724952225171
                  isPrivate: false
                  description: |
                    ## [See this request in our API reference](https://docs.truelayer.com/reference/create-payment)
                  sortKey: -1643121940196
                method: POST
                body:
                  mimeType: application/json
                  text: >-
                    
                    {
                    		"payment_method": {
                    				"type": "mandate",
                    		"mandate_id": "{% response 'body', 'req_b1f9b99104cd44d0b8944ee0d7687c40', 'b64::JC5pZA==::46b', 'never', 60 %}"
                    		},
                    		"amount_in_minor": 1,
                    		"reference": "{% prompt 'Reference', 'Reference', 'reference123', '', false, true %}",
                    		"currency": "GBP"
                    }
                headers:
                  - name: Content-Type
                    value: application/json
                  - name: Idempotency-Key
                    value: "{% uuid 'v4' %}"
                authentication:
                  type: bearer
                  token: "{% response 'body', 'req_6fc0e9ac772544ab942818fd81300b5e',
                    'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 600 %}"
                scripts:
                  preRequest: ""
                  afterResponse: ""
                settings:
                  renderRequestBody: true
                  encodeUrl: true
                  followRedirects: global
                  cookies:
                    send: true
                    store: true
                  rebuildPath: true
              - url: "{{ _.ENVIRONMENT_URI }}/v3/payments/{% response 'body',
                  'req_0e91256025834b58ba5ec3c6f18c9d3d', 'b64::JC5pZA==::46b',
                  'never', 60 %}"
                name: 6S. Get payment on a mandate (access token)
                meta:
                  id: req_55208aefe1944567bfcaf990b45f0d53
                  created: 1707909564690
                  modified: 1724952207779
                  isPrivate: false
                  description: |
                    ## [See this request in our API reference](https://docs.truelayer.com/reference/get-payment-1)
                  sortKey: -1643121940158.5
                method: GET
                authentication:
                  type: bearer
                  token: "{% response 'body', 'req_6fc0e9ac772544ab942818fd81300b5e',
                    'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 600 %}"
                scripts:
                  preRequest: ""
                  afterResponse: ""
                settings:
                  renderRequestBody: true
                  encodeUrl: true
                  followRedirects: global
                  cookies:
                    send: true
                    store: true
                  rebuildPath: true
              - url: "{{ _.ENVIRONMENT_URI }}/v3/payments/{% response 'body',
                  'req_0e91256025834b58ba5ec3c6f18c9d3d', 'b64::JC5pZA==::46b',
                  'never', 60 %}"
                name: 6R. Get payment on a mandate (resource token)
                meta:
                  id: req_9d844ee431424f28a12b6b69821e9308
                  created: 1707909564691
                  modified: 1724952213990
                  isPrivate: false
                  description: |
                    ## [See this request in our API reference](https://docs.truelayer.com/reference/get-payment-1)
                  sortKey: -1643121940108.5
                method: GET
                authentication:
                  type: bearer
                  token: "{% response 'body', 'req_0e91256025834b58ba5ec3c6f18c9d3d',
                    'b64::JC5yZXNvdXJjZV90b2tlbg==::46b', 'never', 600 %}"
                scripts:
                  preRequest: ""
                  afterResponse: ""
                settings:
                  renderRequestBody: true
                  encodeUrl: true
                  followRedirects: global
                  cookies:
                    send: true
                    store: true
                  rebuildPath: true
            scripts:
              afterResponse: ""
              preRequest: ""
          - url: "{{ _.ENVIRONMENT_URI }}/v3/mandates"
            name: 6K. Create mandate paying an external account
            meta:
              id: req_25c4dc9c23eb449a98754a113364cc41
              created: 1707909564691
              modified: 1724951814201
              isPrivate: false
              description: >
                ## [See this request in our API
                reference](https://docs.truelayer.com/reference/create-mandate)
              sortKey: 0
            method: POST
            body:
              mimeType: application/json
              text: >-
                {
                	"mandate": {
                		"type": "sweeping",
                		"provider_filter": {
                			"countries": [
                				"GB"
                			],
                			"release_channel": "private_beta"
                		},
                		"provider_selection": {
                			"type": "user_selected"
                		},
                		"beneficiary": {
                			"type": "external_account",
                			"account_holder_name": "Beneficiary Name",
                			"account_identifier": {
                				"type": "sort_code_account_number",
                				"sort_code": "123456",
                				"account_number": "12345678"
                			}
                		}
                	},
                	"currency": "GBP",
                	"user": {
                		"id": "{% uuid 'v4' %}",
                		"name": "{% prompt 'Name', '', '', '', false, true %}",
                		"email": "{% prompt 'User Email', '', '', '', false, true %}",
                		"phone": "{% prompt 'Phone', 'Please prefix with + and country code', '', '', false, true %}"
                	},
                	"constraints": {
                		"valid_from": "{% now 'iso-8601', '' %}",
                		"valid_to": "2025-01-01T00:00:00.000Z",
                		"maximum_individual_amount": 50,
                		"periodic_limits": {
                			"day": {
                				"maximum_amount": 100,
                				"period_alignment": "calendar"
                			},
                			"month": {
                				"maximum_amount": 1000,
                				"period_alignment": "calendar"
                			}
                		}
                	}
                }
            headers:
              - name: Content-Type
                value: application/json
              - name: Idempotency-Key
                value: "{% uuid 'v4' %}"
            authentication:
              type: bearer
              token: "{% response 'body', 'req_e61a49eeb0ed4f2fb5b8074a71ea3f98',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 600 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
          - url: "{{ _.ENVIRONMENT_URI }}/v3/mandates/{% response 'body',
              'req_b1f9b99104cd44d0b8944ee0d7687c40', 'b64::JC5pZA==::46b',
              'never', 60 %}/authorization-flow"
            name: 6L. Start authorisation flow
            meta:
              id: req_416615db27384adeb72d4b8233309b0f
              created: 1707909564692
              modified: 1724951838646
              isPrivate: false
              description: |
                ## [See this request in our API reference](https://docs.truelayer.com/reference/start-mandate-authorization-flow)
              sortKey: 100
            method: POST
            body:
              mimeType: application/json
              text: |-
                {
                	"provider_selection": {},
                	"redirect": {
                		"return_uri": "{{ _.RETURN_URI }}"
                	}
                }
            headers:
              - name: Content-Type
                value: application/json
              - name: Idempotency-Key
                value: "{% uuid 'v4' %}"
            authentication:
              type: bearer
              disabled: false
              token: "{% response 'body', 'req_e61a49eeb0ed4f2fb5b8074a71ea3f98',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'never', 60 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
          - url: "{{ _.ENVIRONMENT_URI }}/v3/mandates/{% response 'body',
              'req_c8bdfe4156f94d16a0c7ae27e5fb1f69', 'b64::JC5pZA==::46b',
              'never', 60 %}/revoke"
            name: 6T. Revoke mandate
            meta:
              id: req_7fda5f6c9b5b4553820cefd66b6d2166
              created: 1707909564692
              modified: 1724952406902
              isPrivate: false
              description: >
                ## [See this request in our API
                reference](https://docs.truelayer.com/reference/revoke-mandate)
              sortKey: 500
            method: POST
            headers:
              - name: Idempotency-Key
                value: "{% uuid 'v4' %}"
              - name: ""
                value: ""
            authentication:
              type: bearer
              token: "{% response 'body', 'req_6fc0e9ac772544ab942818fd81300b5e',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 600 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
          - url: "{{ _.ENVIRONMENT_URI }}/v3/mandates/{% response 'body',
              'req_b1f9b99104cd44d0b8944ee0d7687c40', 'b64::JC5pZA==::46b',
              'never', 60 %}/authorization-flow/actions/provider-selection"
            name: 6M. Provider selection
            meta:
              id: req_9e2cfcdb263d4a1abbbc74e20730a4ca
              created: 1707909564692
              modified: 1724951867303
              isPrivate: false
              description: |
                ## [See this request in our API reference](https://docs.truelayer.com/reference/submit-mandate-provider-selection)
              sortKey: 200
            method: POST
            body:
              mimeType: application/json
              text: |-
                {
                  "provider_id": "ob-natwest-vrp-sandbox"
                }
            headers:
              - name: Content-Type
                value: application/json
              - name: Idempotency-Key
                value: "{% uuid 'v4' %}"
            authentication:
              type: bearer
              token: "{% response 'body', 'req_6fc0e9ac772544ab942818fd81300b5e',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 600 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
          - url: "{{ _.ENVIRONMENT_URI }}/v3/mandates/{% response 'body',
              'req_b1f9b99104cd44d0b8944ee0d7687c40', 'b64::JC5pZA==::46b',
              'never', 60 %}/funds?amount_in_minor={% prompt 'Amount', 'amount',
              '1', '', false, true %}&currency=GBP"
            name: 6P. Confirm funds
            meta:
              id: req_4afc7ea16aa44321b10ad4e5c2067801
              created: 1707909564693
              modified: 1724952085440
              isPrivate: false
              description: |-
                ## [See this request in our API reference](https://docs.truelayer.com/reference/confirm-mandate-funds)

                This request is meant to be used to confirm the amount of money a PSU has in their account.
              sortKey: 350
            method: GET
            authentication:
              type: bearer
              token: "{% response 'body', 'req_6fc0e9ac772544ab942818fd81300b5e',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 600 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
          - url: "{{ _.ENVIRONMENT_URI }}/v3/mandates?user_id={% response 'body',
              'req_b1f9b99104cd44d0b8944ee0d7687c40', 'b64::JC51c2VyLmlk::46b',
              'when-expired', 600 %}&limit={% prompt 'Limit', 'mandates per
              page', '25', '', false, true %}"
            name: 6O. List mandates
            meta:
              id: req_7ec16edf51444f988b2ca8e7db6fedbe
              created: 1707909564693
              modified: 1724952054399
              isPrivate: false
              description: >-
                ## [See this request in our API
                reference](https://docs.truelayer.com/reference/list-mandate)


                As is, this request will always return 1 mandate. To get more
                than one mandate, make sure to disable generating a new random
                user_id on every Create Mandate request.


                Maximum number of items included in the returned window. Should
                be greater than 0 and less than 50.


                If not set, a default of 25 is considered.
              sortKey: 325
            method: GET
            authentication:
              type: bearer
              token: "{% response 'body', 'req_6fc0e9ac772544ab942818fd81300b5e',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'never', 600 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
          - url: "{{ _.ENVIRONMENT_URI }}/v3/mandates/{% response 'body',
              'req_b1f9b99104cd44d0b8944ee0d7687c40', 'b64::JC5pZA==::46b',
              'never', 60 %}"
            name: 6N. Get mandate
            meta:
              id: req_9428542cf8214e7ca93bc2f44c69901b
              created: 1707909564693
              modified: 1724952036013
              isPrivate: false
              description: >
                ## [See this request in our API
                reference](https://docs.truelayer.com/reference/get-mandate)
              sortKey: 300
            method: GET
            authentication:
              type: bearer
              token: "{% response 'body', 'req_6fc0e9ac772544ab942818fd81300b5e',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 600 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
        scripts:
          afterResponse: ""
          preRequest: ""
      - name: Mandate to merchant account
        meta:
          id: fld_71463610ada7410ca4bbf00843a7cad3
          created: 1707909564694
          modified: 1723735214322
          sortKey: -1648351513113.5
          description: ""
        children:
          - name: Payment on mandate to merchant account
            meta:
              id: fld_60eea0b2ea144f4a8cc5b77709c95d40
              created: 1707909564694
              modified: 1723735209383
              sortKey: 450
              description: ""
            children:
              - url: "{{ _.ENVIRONMENT_URI }}/v3/payments"
                name: 6G. Create payment on a mandate
                meta:
                  id: req_1a0f99d0239d4b8b8dc10c2cf1fdef78
                  created: 1707909564694
                  modified: 1724952344172
                  isPrivate: false
                  description: |
                    ## [See this request in our API reference](https://docs.truelayer.com/reference/create-payment)
                  sortKey: -1643121940133.5
                method: POST
                body:
                  mimeType: application/json
                  text: >-
                    {
                    	"payment_method": {
                    		"type": "mandate",
                    		"mandate_id": "{% response 'body', 'req_599a894d7617486d8f666f33e1ead94c', 'b64::JC5pZA==::46b', 'never', 60 %}"
                    	},
                    	"amount_in_minor": 1,
                    	"reference": "{% prompt 'Reference', 'Reference', 'reference123', '', false, true %}",
                    	"currency": "GBP"
                    }
                headers:
                  - name: Content-Type
                    value: application/json
                  - name: Idempotency-Key
                    value: "{% uuid 'v4' %}"
                authentication:
                  type: bearer
                  token: "{% response 'body', 'req_e61a49eeb0ed4f2fb5b8074a71ea3f98',
                    'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 600 %}"
                scripts:
                  preRequest: ""
                  afterResponse: ""
                settings:
                  renderRequestBody: true
                  encodeUrl: true
                  followRedirects: global
                  cookies:
                    send: true
                    store: true
                  rebuildPath: true
              - url: "{{ _.ENVIRONMENT_URI }}/v3/payments/{% response 'body',
                  'req_434b7677da934a508ba7e071670e062e', 'b64::JC5pZA==::46b',
                  'never', 60 %}"
                name: 6I. Get payment on a mandate (access token)
                meta:
                  id: req_39c9f4a9cb83431a88873da58d4e6790
                  created: 1707909564695
                  modified: 1724952351193
                  isPrivate: false
                  description: |
                    ## [See this request in our API reference](https://docs.truelayer.com/reference/get-payment-1)
                  sortKey: -1643121940114.75
                method: GET
                authentication:
                  type: bearer
                  token: "{% response 'body', 'req_e61a49eeb0ed4f2fb5b8074a71ea3f98',
                    'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 600 %}"
                scripts:
                  preRequest: ""
                  afterResponse: ""
                settings:
                  renderRequestBody: true
                  encodeUrl: true
                  followRedirects: global
                  cookies:
                    send: true
                    store: true
                  rebuildPath: true
              - url: "{{ _.ENVIRONMENT_URI }}/v3/payments/{% response 'body',
                  'req_434b7677da934a508ba7e071670e062e', 'b64::JC5pZA==::46b',
                  'never', 60 %}"
                name: 6H. Get payment on a mandate (resource token)
                meta:
                  id: req_8f93bda0b0354b32abd91e3f4be0cf03
                  created: 1707909564695
                  modified: 1724952358865
                  isPrivate: false
                  description: |
                    ## [See this request in our API reference](https://docs.truelayer.com/reference/get-payment-1)
                  sortKey: -1643121940096
                method: GET
                authentication:
                  type: bearer
                  token: "{% response 'body', 'req_434b7677da934a508ba7e071670e062e',
                    'b64::JC5yZXNvdXJjZV90b2tlbg==::46b', 'never', 600 %}"
                scripts:
                  preRequest: ""
                  afterResponse: ""
                settings:
                  renderRequestBody: true
                  encodeUrl: true
                  followRedirects: global
                  cookies:
                    send: true
                    store: true
                  rebuildPath: true
            scripts:
              afterResponse: ""
              preRequest: ""
          - url: "{{ _.ENVIRONMENT_URI }}/v3/mandates/{% response 'body',
              'req_9f4b0ff4d37943008187c75ba2ddf44f', 'b64::JC5pZA==::46b',
              'never', 60 %}/revoke"
            name: 6J. Revoke mandate
            meta:
              id: req_aa253b2fb9604e3daf29f3243ebc7525
              created: 1707909564696
              modified: 1724951736836
              isPrivate: false
              description: >
                ## [See this request in our API
                reference](https://docs.truelayer.com/reference/revoke-mandate)
              sortKey: 500
            method: POST
            headers:
              - name: Idempotency-Key
                value: "{% uuid 'v4' %}"
              - name: ""
                value: ""
            authentication:
              type: bearer
              token: "{% response 'body', 'req_6fc0e9ac772544ab942818fd81300b5e',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 600 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
          - url: "{{ _.ENVIRONMENT_URI }}/v3/mandates/{% response 'body',
              'req_599a894d7617486d8f666f33e1ead94c', 'b64::JC5pZA==::46b',
              'never', 60 %}/authorization-flow/actions/provider-selection"
            name: 6C. Provider selection
            meta:
              id: req_fe9e27e313334e418c4937f371406bcc
              created: 1707909564696
              modified: 1724951345365
              isPrivate: false
              description: "## [See this request in our API
                reference](https://docs.truelayer.com/reference/submit-mandate-\
                provider-selection)"
              sortKey: 200
            method: POST
            body:
              mimeType: application/json
              text: |-
                {
                  "provider_id": "ob-natwest-vrp-sandbox"
                }
            headers:
              - name: Content-Type
                value: application/json
              - name: Idempotency-Key
                value: "{% uuid 'v4' %}"
            authentication:
              type: bearer
              token: "{% response 'body', 'req_e61a49eeb0ed4f2fb5b8074a71ea3f98',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 600 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
          - url: "{{ _.ENVIRONMENT_URI }}/v3/mandates/{% response 'body',
              'req_599a894d7617486d8f666f33e1ead94c', 'b64::JC5pZA==::46b',
              'never', 60 %}/authorization-flow"
            name: 6B. Start authorisation flow
            meta:
              id: req_2bdf9d8ec83848fdb3077b3bc2961c07
              created: 1707909564697
              modified: 1724951302942
              isPrivate: false
              description: "## [See this request in our API
                reference](https://docs.truelayer.com/reference/start-mandate-a\
                uthorization-flow)"
              sortKey: 100
            method: POST
            body:
              mimeType: application/json
              text: |-
                {
                	"provider_selection": {},
                	"redirect": {
                		"return_uri": "{{ _.RETURN_URI }}"
                	}
                }
            headers:
              - name: Content-Type
                value: application/json
              - name: Idempotency-Key
                value: "{% uuid 'v4' %}"
            authentication:
              type: bearer
              disabled: false
              token: "{% response 'body', 'req_e61a49eeb0ed4f2fb5b8074a71ea3f98',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 60 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
          - url: "{{ _.ENVIRONMENT_URI }}/v3/mandates?user_id={% response 'body',
              'req_599a894d7617486d8f666f33e1ead94c', 'b64::JC51c2VyLmlk::46b',
              'never', 60 %}&limit={% prompt 'Limit', 'mandates per page', '25',
              '', false, true %}"
            name: 6E. List mandates
            meta:
              id: req_65eef68c4dac4a24a89ae4b2a318247f
              created: 1707909564698
              modified: 1724951422388
              isPrivate: false
              description: >-
                ## [See this request in our API
                reference](https://docs.truelayer.com/reference/list-mandate)


                As is, this request will always return 1 mandate. To get more
                than one mandate, make sure to disable generating a new random
                user_id on every Create Mandate request.


                Maximum number of items included in the returned window. Should
                be greater than 0 and less than 50.


                If not set, a default of 25 is considered.
              sortKey: 325
            method: GET
            authentication:
              type: bearer
              token: "{% response 'body', 'req_e61a49eeb0ed4f2fb5b8074a71ea3f98',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 600 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
          - url: "{{ _.ENVIRONMENT_URI }}/v3/mandates/{% response 'body',
              'req_599a894d7617486d8f666f33e1ead94c', 'b64::JC5pZA==::46b',
              'never', 60 %}"
            name: 6D. Get mandate
            meta:
              id: req_b5952d9bd75e468d86198906eda0626c
              created: 1707909564698
              modified: 1724951374524
              isPrivate: false
              description: "## [See this request in our API
                reference](https://docs.truelayer.com/reference/get-mandate)"
              sortKey: 300
            method: GET
            authentication:
              type: bearer
              token: "{% response 'body', 'req_e61a49eeb0ed4f2fb5b8074a71ea3f98',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 600 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
          - url: "{{ _.ENVIRONMENT_URI }}/v3/mandates/{% response 'body',
              'req_599a894d7617486d8f666f33e1ead94c', 'b64::JC5pZA==::46b',
              'never', 60 %}/funds?amount_in_minor={% prompt 'Amount', 'amount',
              '1', '', false, true %}&currency=GBP"
            name: 6F. Confirm funds
            meta:
              id: req_f3efb596314247b2b4e69905c2b06203
              created: 1707909564698
              modified: 1724952071276
              isPrivate: false
              description: |-
                ## [See this request in our API reference](https://docs.truelayer.com/reference/confirm-mandate-funds)

                This request is meant to be used to confirm the amount of money a PSU has in their account.
              sortKey: 350
            method: GET
            authentication:
              type: bearer
              token: "{% response 'body', 'req_e61a49eeb0ed4f2fb5b8074a71ea3f98',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 600 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
          - url: "{{ _.ENVIRONMENT_URI }}/v3/mandates"
            name: 6A. Create mandate paying a merchant account
            meta:
              id: req_193f40298ef34613851e5daf2f1ee7b7
              created: 1707909564699
              modified: 1724951275735
              isPrivate: false
              description: "## [See this request in our API
                reference](https://docs.truelayer.com/reference/create-mandate)"
              sortKey: 50
            method: POST
            body:
              mimeType: application/json
              text: >-
                {
                	"mandate": {
                		"type": "sweeping",
                		"provider_filter": {
                			"countries": [
                				"GB"
                			],
                			"release_channel": "private_beta"
                		},
                		"provider_selection": {
                			"type": "user_selected"
                		},
                		"beneficiary": {
                			"type": "merchant_account",
                			"merchant_account_id": "{% prompt 'Merchant account id', 'Merchant account id', '123', '', false, true %}",
                		  "account_holder_name": "{% prompt 'Merchant Account Holder Name', 'Merchant Account Holder Name', 'Company.Inc', '', false, true %}"
                		}
                	},
                	"currency": "GBP",
                	"user": {
                		"id": "{% uuid 'v4' %}",
                		"name": "{% prompt 'Name', '', '', '', false, true %}",
                		"email": "{% prompt 'User Email', '', '', '', false, true %}",
                		"phone": "{% prompt 'Phone', 'Please prefix with + and country code', '', '', false, true %}"
                	},
                	"constraints": {
                		"valid_from": "{% now 'iso-8601', '' %}",
                		"valid_to": "2025-01-01T00:00:00.000Z",
                		"maximum_individual_amount": 50,
                		"periodic_limits": {
                			"day": {
                				"maximum_amount": 100,
                				"period_alignment": "calendar"
                			},
                			"month": {
                				"maximum_amount": 1000,
                				"period_alignment": "calendar"
                			}
                		}
                	}
                }
            headers:
              - name: Content-Type
                value: application/json
              - name: Idempotency-Key
                value: "{% uuid 'v4' %}"
            authentication:
              type: bearer
              token: "{% response 'body', 'req_e61a49eeb0ed4f2fb5b8074a71ea3f98',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 600 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
        scripts:
          afterResponse: ""
          preRequest: ""
    scripts:
      afterResponse: ""
      preRequest: ""
  - name: 5. Payment links
    meta:
      id: fld_d3ef491046d143139f36dd0498acb9d9
      created: 1707909564703
      modified: 1724950244805
      sortKey: -818447180413
      description: ""
    children:
      - url: "{{ _.ENVIRONMENT_URI }}/v3/payment-links/{% response 'body',
          'req_766b53a21ecd4117aca62dee88e3bc85', 'b64::JC5pZA==::46b',
          'when-expired', 60 %}"
        name: 5B. Get payment link
        meta:
          id: req_6cc12a9d7b5043379b60403740a9cdb6
          created: 1707909564704
          modified: 1724950694289
          isPrivate: false
          description: >
            ## [See this request in our API
            reference](https://docs.truelayer.com/reference/get-payment-link)
          sortKey: -1690386212164
        method: GET
        headers:
          - name: Content-Type
            value: application/json
          - name: Idempotency-key
            value: "{% uuid 'v4' %}"
        authentication:
          type: bearer
          token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
            'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'never', 60 %}"
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.ENVIRONMENT_URI }}/v3/payment-links"
        name: 5A. Create a payment link
        meta:
          id: req_a0f38c728dd345468b98feb85c3645b9
          created: 1707909564704
          modified: 1724950711607
          isPrivate: false
          description: >
            ## [See this request in our API
            reference](https://docs.truelayer.com/reference/create-payment-link)
          sortKey: -1690386212214
        method: POST
        body:
          mimeType: application/json
          text: >-
            {
            	"expires_at": "2025-07-07T07:30:00.000Z",
            	"reference": "#TT8776618",
            	"return_uri": "https://console.truelayer.com/redirect-page",
            	"payment_configuration": {
            		"amount_in_minor": 110,
            		"currency": "GBP",
            		"payment_method": {
            			"type": "bank_transfer",
            			"provider_selection": {
            				"type": "user_selected"
            			},
            			"beneficiary": {
            				"type": "merchant_account",
            				"merchant_account_id": "{% prompt 'Your Merchant Account ID', 'Insert your Merchant Account ID', '', '', false, true %}"
            			}
            		},
            		"user": {
            			"id": "f61c0ec7-0f83-414e-8e5f-aace86e0ed35",
            			"name": "Jonathan Sandbridge",
            			"email": "john@sandbridge.com",
            			"phone": "+44123456789",
            			"date_of_birth": "1992-11-28",
            			"address": {
            				"address_line1": "40 Finsbury Square",
            				"city": "London",
            				"state": "London",
            				"zip": "EC2A 1PX",
            				"country_code": "GB"
            			}
            		}
            	},
            	"product_items": [
            		{
            			"name": "Table",
            			"price_in_minor": 10,
            			"quantity": 1,
            			"url": "https://www.example.com/table"
            		},
            		{
            			"name": "Sofa",
            			"price_in_minor": 20,
            			"quantity": 1,
            			"url": "https://www.example.com/sofa"
            		},
            		{
            			"name": "Chair",
            			"price_in_minor": 20,
            			"quantity": 4,
            			"url": "https://www.example.com/chair"
            		},
            		{
            			"name": "Shelf",
            			"price_in_minor": 30,
            			"quantity": 2,
            			"url": "https://www.example.com/table/shelf"
            		},
            		{
            			"name": "Bracket",
            			"price_in_minor": 20,
            			"quantity": 4,
            			"url": "https://www.example.com/bracket"
            		},
            		{
            			"name": "Rug",
            			"price_in_minor": 10,
            			"quantity": 1,
            			"url": "https://www.example.com/rug"
            		}
            	],
            	"type": "single_payment"
            }
        headers:
          - name: Content-Type
            value: application/json
          - name: Idempotency-key
            value: "{% uuid 'v4' %}"
        authentication:
          type: bearer
          token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
            'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.ENVIRONMENT_URI }}/v3/payment-links/{% response 'body',
          'req_766b53a21ecd4117aca62dee88e3bc85', 'b64::JC5pZA==::46b',
          'when-expired', 3600 %}/payments"
        name: 5C. Get payment link payments
        meta:
          id: req_bd7c49c129cb47d49d0ad2d31fe72080
          created: 1724950263207
          modified: 1724950956481
          isPrivate: false
          description: |
            ## [See this request in our API reference](https://docs.truelayer.com/reference/get-payment-link-payments)
          sortKey: -1690386212114
        method: GET
        authentication:
          type: bearer
          token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
            'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
    scripts:
      afterResponse: ""
      preRequest: ""
  - name: 8. Payments API V3 providers endpoint
    meta:
      id: fld_9d18316a18d14f69b2269349041e6fa4
      created: 1707909564706
      modified: 1724953443630
      sortKey: -499999775
      description: ""
    children:
      - url: "{{ _.ENVIRONMENT_URI }}/v3/payments-providers/"
        name: 8C. Get a payments provider
        meta:
          id: req_90a65bf7071448a38ccf0ef5129ba318
          created: 1707909564706
          modified: 1724953533809
          isPrivate: false
          description: |
            ## [See this request in our API reference](https://docs.truelayer.com/reference/get-payment-provider)
          sortKey: -1675074171272.75
        method: GET
        parameters:
          - name: ""
            value: ""
            disabled: false
            id: pair_7f9081057ee548d2aa940ed34e7af0b8
          - name: ""
            value: ""
            disabled: false
            id: pair_4327c28824274b07a88057caa10ae5e6
        headers:
          - name: User-Agent
            value: insomnia/2023.5.8
        authentication:
          type: bearer
          token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
            'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'never', 60 %}"
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.ENVIRONMENT_URI }}/v3/payments-providers/search"
        name: 8B. Get a list of providers - with user form in authorisation flow
        meta:
          id: req_a083550ec9994a34b42a4c0eb295fd79
          created: 1707909564707
          modified: 1724953516825
          isPrivate: false
          description: |
            ## [See this request in our API reference](https://docs.truelayer.com/reference/search-payment-providers)
          sortKey: -1675074171322.75
        method: POST
        body:
          mimeType: application/json
          text: |-
            {
            	"currencies": [
            		"GBP",
            		"EUR"
            	],
            	"countries": [
            		"GB",
            		"FR",
            		"ES"
            	],
            	"customer_segments": [
            		"retail"
            	],
            	"capabilities": {
            		"payments": {
            			"bank_transfer": {}
            		},
            		"mandates": {
            			"vrp_sweeping": {}
            		}
            	},
            	"authorization_flow": {
            		"configuration": {
            			"redirect": {},
            			"form": {
            				"input_types": [
            					"text",
            					"select",
            					"text_with_image"
            				]
            			}
            		}
            	}
            }
        headers:
          - name: Content-Type
            value: application/json
        authentication:
          type: bearer
          token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
            'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'never', 60 %}"
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.ENVIRONMENT_URI }}/v3/payments-providers/search"
        name: 8A. Get a list of providers
        meta:
          id: req_7cddb0434cac41e0a65cc46832b8380b
          created: 1707910287142
          modified: 1724953490838
          isPrivate: false
          description: |
            ## [See this request in our API reference](https://docs.truelayer.com/reference/search-payment-providers)
          sortKey: -1675074171422.75
        method: POST
        body:
          mimeType: application/json
          text: |-
            {
            	"currencies": [
            		"GBP"
            	],
            	"countries": [
            		"GB"
            	],
            	"customer_segments": [
            		"retail"
            	],
            	"capabilities": {
            		"payments": {
            			"bank_transfer": {}
            		}
            	},
            	"authorization_flow": {
            		"configuration": {
            			"redirect": {}
            		}
            	}
            }
        headers:
          - name: Content-Type
            value: application/json
        authentication:
          type: bearer
          token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
            'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'never', 60 %}"
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
    scripts:
      afterResponse: ""
      preRequest: ""
  - name: 7. Signup+
    meta:
      id: fld_8e121dec265c4fc98e9806a853ffc523
      created: 1723737282321
      modified: 1723737306855
      sortKey: -749999887.5
      description: ""
    children:
      - name: Standard pay-in
        meta:
          id: fld_8efecd413b944c0e9c4ff4a4fe2fe748
          created: 1723737402203
          modified: 1724949075968
          sortKey: -1723737402203
          description: ""
        children:
          - url: "{{ _.ENVIRONMENT_URI }}/v3/payments"
            name: 7A. Create payment
            meta:
              id: req_1d4374cb666e4268b1508392b8f8ab6a
              created: 1723737370397
              modified: 1725551390687
              isPrivate: false
              description: >-
                ## [See this request in our API
                reference](https://docs.truelayer.com/reference/create-payment)


                ## Testing result thresholds


                When you make a identity data request to the
                `/signup-plus/payments` endpoint, the response you get depends
                on the value of the `amount_in_minor` parameter at payment
                creation. These are the possible results and thresholds:


                | Value of `amount_in_minor`      | Signup+ response | Response
                type |

                | :---------- | :----------------------------------  | ------- |

                | 0-1799      | Test user data 1: Tommie Burke.      | Success |

                | 1800-2099   | Test user data 2: Leon Gordon.       | Success |

                | 2100-2199   | Test user data 3: Isabella Allen.    | Success |

                | 2200-9999   | Range reserved for new test users. Defaults to
                test user data 3: Leon Gordon. | Success |

                | 10000-24999 | Joint accounts not supported.        | Error |

                | 25000-34999 | User data not found                  | Error |

                | >35000      | Range reserved for new scenarios. Defaults to
                User data not found error. | Error |


                [Learn more about testing Signup+ in
                Sandbox](https://docs.truelayer.com/docs/signup-sandbox).
              sortKey: -1723737389742
            method: POST
            body:
              mimeType: application/json
              text: >-
                {
                	"amount_in_minor": 10000,
                	"currency": "GBP",
                	"payment_method": {
                		"provider_selection": {
                			"type": "user_selected"
                		},
                		"filter": {
                			"countries": [
                				"GB"
                			]
                		},
                		"type": "bank_transfer",
                		"beneficiary": {
                			"type": "merchant_account",
                			"merchant_account_id": "{% prompt 'Beneficiary Merchant Account ID', 'Please get your merchant_account_id by calling the GET List Merchant Accounts endpoint. ', '', '', false, true %}",
                			"reference": "Test payment"
                		}
                	},
                	"user": {
                		"name": "Jonathan Sandbridge",
                		"email": "john@sandbridge.com",
                		"phone": "+44123456789",
                		"date_of_birth": "1992-11-28",
                		"address": {
                			"address_line1": "40 Finsbury Square",
                			"city": "London",
                			"state": "London",
                			"zip": "EC2A 1PX",
                			"country_code": "GB"
                		}
                	},
                	"related_products": {
                		"signup_plus": {}
                	}
                }
            headers:
              - name: Content-Type
                value: application/json
              - name: Idempotency-Key
                value: "{% uuid 'v4' %}"
            authentication:
              type: bearer
              token: "{% response 'body', 'req_6a1d85dcef0d45f7985245d59ef95360',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 60 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
          - url: https://payment.truelayer-sandbox.com/payments#payment_id={% response
              'body', 'req_1e42872b2edc434d8e83ac1dca72fbc5',
              'b64::JC5pZA==::46b', 'always', 60 %}&resource_token={% response
              'body', 'req_1e42872b2edc434d8e83ac1dca72fbc5',
              'b64::JC5yZXNvdXJjZV90b2tlbg==::46b', 'always', 60
              %}&return_uri={{ _.RETURN_URI }}
            name: 7B. Create HPP
            meta:
              id: req_1531469d16474038b5e878b38f49af1a
              created: 1723738360000
              modified: 1724159426692
              isPrivate: false
              description: >-
                ## How to use the HPP link


                To test the HPP payment authorisation flow:


                - Click on the 'Query' tab.

                - Copy the content and open it in a browser page.


                [Learn more about the hosted payment page in our
                docs](https://docs.truelayer.com/docs/hosted-payment-page).
              sortKey: -1723737389692
            method: BLD
            body:
              mimeType: ""
              text: "\n\n"
            headers:
              - name: Content-Type
                value: text/plain
            authentication:
              type: bearer
              token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
          - url: "{{ _.ENVIRONMENT_URI }}/signup-plus/payments"
            name: 7C. Get Signup+ data for standard payment
            meta:
              id: req_59be6a2e0446439ba7928a0c2eae1dc8
              created: 1723738498092
              modified: 1725551373906
              isPrivate: false
              description: |-
                ## [See this request in our API reference](https://docs.truelayer.com/reference/getuserdatabypayment)

                ## Testing result thresholds

                When you make a identity data request to the `/signup-plus/payments` endpoint, the response you get depends on the value of the `amount_in_minor` parameter at payment creation. These are the possible results and thresholds:

                | Value of `amount_in_minor`      | Signup+ response | Response type |
                | :---------- | :----------------------------------  | ------- |
                | 0-1799      | Test user data 1: Tommie Burke.      | Success |
                | 1800-2099   | Test user data 2: Leon Gordon.       | Success |
                | 2100-2199   | Test user data 3: Isabella Allen.    | Success |
                | 2200-9999   | Range reserved for new test users. Defaults to test user data 3: Leon Gordon. | Success |
                | 10000-24999 | Joint accounts not supported.        | Error |
                | 25000-34999 | User data not found                  | Error |
                | >35000      | Range reserved for new scenarios. Defaults to User data not found error. | Error |

                [Learn more about testing Signup+ in Sandbox](https://docs.truelayer.com/docs/signup-sandbox).
              sortKey: -1723737389642
            method: GET
            parameters:
              - name: payment_id
                value: "{% prompt 'Payment ID (must have executed status)', '', '', '', false,
                  true %}"
                id: pair_93e71676aa574a5a9726980b8e2cf6f3
            authentication:
              type: bearer
              token: "{% response 'body', 'req_6a1d85dcef0d45f7985245d59ef95360',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'always', 60 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
        scripts:
          afterResponse: ""
          preRequest: ""
      - name: Pay-in with age verification
        meta:
          id: fld_aead7ab68b94440abfa637b80ccd83ad
          created: 1723738444182
          modified: 1723738444182
          sortKey: -1696560922592.5
          description: ""
        children:
          - url: "{{ _.ENVIRONMENT_URI }}/v3/payments"
            name: 7D. Create payment
            meta:
              id: req_90995e2e6f944111a0d461c0188b5c79
              created: 1723738444185
              modified: 1725551491872
              isPrivate: false
              description: >-
                ## [See this request in our API
                reference](https://docs.truelayer.com/reference/create-payment)


                > ## 📘 Enabling age verification in Sandbox

                >

                > Age verification is part of our Signup+ product. You need to
                contact us to enable the feature if you want to age verification
                in sandbox.


                ## Testing result thresholds


                When you make a payment creation request that includes the
                `verification.remitter_date_of_birth` parameter, The value of
                the `amount_in_minor` parameter determines which response you
                get.


                | Value of `amount_in_minor`	| Signup+ response | Response type
                |

                | :--- | :--- | :--- |

                |<1800	| Age not legal. |	Error |

                | 1800-9999	| Identity data found.	| Success |

                | 10000-24999 |	Joint accounts not supported. |	Error |

                | >25000 |	User data not found.	| Error |


                [Learn more about testing Signup+ in
                Sandbox](https://docs.truelayer.com/docs/signup-sandbox).
              sortKey: -1723737389742
            method: POST
            body:
              mimeType: application/json
              text: >-
                {
                	"amount_in_minor": 2000,
                	"currency": "GBP",
                	"payment_method": {
                		"provider_selection": {
                			"type": "user_selected"
                		},
                		"filter": {
                			"countries": [
                				"GB"
                			]
                		},
                		"type": "bank_transfer",
                		"beneficiary": {
                			"type": "merchant_account",
                      "verification": {
                        "type": "automated",
                        "remitter_date_of_birth": true
                      },
                			"merchant_account_id": "{% prompt 'Beneficiary Merchant Account ID', 'Please get your merchant_account_id by calling the GET List Merchant Accounts endpoint. ', '', '', false, true %}",
                			"reference": "Test payment"
                		}
                	},
                	"user": {
                		"id": "f61c0ec7-0f83-414e-8e5f-aace86e0ed35",
                		"name": "Jonathan Sandbridge",
                		"email": "john@sandbridge.com",
                		"phone": "+44123456789",
                		"date_of_birth": "1992-11-28",
                		"address": {
                			"address_line1": "40 Finsbury Square",
                			"city": "London",
                			"state": "London",
                			"zip": "EC2A 1PX",
                			"country_code": "GB"
                		}
                	},
                	"related_product": {
                		"signup_plus": {}
                	}
                }
            headers:
              - name: Content-Type
                value: application/json
              - name: Idempotency-Key
                value: "{% uuid 'v4' %}"
            authentication:
              type: bearer
              token: "{% response 'body', 'req_6a1d85dcef0d45f7985245d59ef95360',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 60 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
          - url: https://payment.truelayer-sandbox.com/payments#payment_id={% response
              'body', 'req_459739c39fce414caed0d24b0eb67db1',
              'b64::JC5pZA==::46b', 'always', 60 %}&resource_token={% response
              'body', 'req_459739c39fce414caed0d24b0eb67db1',
              'b64::JC5yZXNvdXJjZV90b2tlbg==::46b', 'always', 60
              %}&return_uri={{ _.RETURN_URI }}
            name: 7E. Create HPP
            meta:
              id: req_c2eb1da0b01345ba87e219bdb169fbba
              created: 1723738444187
              modified: 1724159438452
              isPrivate: false
              description: >-
                ## How to use the HPP link


                To test the HPP payment authorisation flow:


                - Click on the 'Query' tab.

                - Copy the content and open it in a browser page.


                [Learn more about the hosted payment page in our
                docs](https://docs.truelayer.com/docs/hosted-payment-page).
              sortKey: -1723737389692
            method: BLD
            body:
              mimeType: ""
              text: "\n\n"
            headers:
              - name: Content-Type
                value: text/plain
            authentication:
              type: bearer
              token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
          - url: "{{ _.ENVIRONMENT_URI }}/signup-plus/payments"
            name: 7F. Get data for age-verified payment
            meta:
              id: req_38dd0d52dc7d4e8c8a7296c2af4a5a89
              created: 1724083150124
              modified: 1725551564370
              isPrivate: false
              description: |-
                ## [See this request in our API reference](https://docs.truelayer.com/reference/getuserdatabypayment)

                ## Testing result thresholds

                When you make a identity data request to the `/signup-plus/payments` endpoint, the response you get depends on the value of the `amount_in_minor` parameter at payment creation. These are the possible results and thresholds:

                | Value of `amount_in_minor`      | Signup+ response | Response type |
                | :---------- | :----------------------------------  | ------- |
                | 0-1799      | Test user data 1: Tommie Burke.      | Success |
                | 1800-2099   | Test user data 2: Leon Gordon.       | Success |
                | 2100-2199   | Test user data 3: Isabella Allen.    | Success |
                | 2200-9999   | Range reserved for new test users. Defaults to test user data 3: Leon Gordon. | Success |
                | 10000-24999 | Joint accounts not supported.        | Error |
                | 25000-34999 | User data not found                  | Error |
                | >35000      | Range reserved for new scenarios. Defaults to User data not found error. | Error |

                [Learn more about testing Signup+ in Sandbox](https://docs.truelayer.com/docs/signup-sandbox).
              sortKey: -1723737389642
            method: GET
            parameters:
              - name: payment_id
                value: "{% prompt 'Payment ID (must have executed status)', '', '', '', false,
                  true %}"
                id: pair_93e71676aa574a5a9726980b8e2cf6f3
            authentication:
              type: bearer
              token: "{% response 'body', 'req_6a1d85dcef0d45f7985245d59ef95360',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'always', 60 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
        scripts:
          afterResponse: ""
          preRequest: ""
    scripts:
      afterResponse: ""
      preRequest: ""
  - name: 3. Pay-Ins
    meta:
      id: fld_ffc399aa424e4a9d80e8f1e9d7eb97ad
      created: 1757511721996
      modified: 1757511798816
      sortKey: -1635910952791.5918
      description: ""
    children:
      - name: Create a payment to an External Account
        meta:
          id: fld_fe732bb3bd6f43c39ca1a5eccda54763
          created: 1757511721999
          modified: 1757511721999
          sortKey: -1635952895766
          description: ""
        children:
          - name: Pay-in with Hosted Payment Page
            meta:
              id: fld_d0574b9989d144c696a228e924694bd4
              created: 1757511721999
              modified: 1757511721999
              sortKey: -1647882182551
              description: ""
            children:
              - url: https://payment.truelayer-sandbox.com/payments#payment_id={% response
                  'body', 'req_e31912011730437390c77bfd336d1c28',
                  'b64::JC5pZA==::46b', 'never', 60 %}&resource_token={%
                  response 'body', 'req_e31912011730437390c77bfd336d1c28',
                  'b64::JC5yZXNvdXJjZV90b2tlbg==::46b', 'never', 60
                  %}&return_uri={{ _.RETURN_URI }}
                name: Create HPP
                meta:
                  id: req_a40dd7be51334ee19b3be03dd377ae14
                  created: 1757511722001
                  modified: 1757512260970
                  isPrivate: false
                  description: |-
                    How to create and use the HPP url: 
                    - Click on the 'Query' tab
                    - Copy the content and open it in a browser page"

                    See docs: https://docs.truelayer.com/docs/hosted-payment-page-for-payments-v3
                  sortKey: -1612882494348.3125
                method: BLD
                body:
                  mimeType: ""
                  text: "\n\n"
                headers:
                  - name: Content-Type
                    value: text/plain
                authentication:
                  type: bearer
                  token: "{% response 'body', 'req_f8313a4d44204235b68efc08bb269230',
                    'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
                scripts:
                  preRequest: ""
                  afterResponse: ""
                settings:
                  renderRequestBody: true
                  encodeUrl: true
                  followRedirects: global
                  cookies:
                    send: true
                    store: true
                  rebuildPath: true
              - url: "{{ _.ENVIRONMENT_URI }}/v3/payments"
                name: Create Payment
                meta:
                  id: req_2153a897196440279594dddf80e46d52
                  created: 1757511722005
                  modified: 1757512062147
                  isPrivate: false
                  description: ""
                  sortKey: -1612882494398.3125
                method: POST
                body:
                  mimeType: application/json
                  text: |-
                    {
                    	"amount_in_minor": 1,
                    	"currency": "GBP",
                    	"payment_method": {
                    		"provider_selection": {
                    			"type": "user_selected"
                    		},
                    		"type": "bank_transfer",
                    		"beneficiary": {
                    			"type": "external_account",
                    			"account_holder_name": "John Sandbridge",
                    			"reference": "Test Reference",
                    			"account_identifier": {
                    				"type": "sort_code_account_number",
                    				"sort_code": "040668",
                    				"account_number": "00000871"
                    			}
                    		},
                    		"metadata": {
                    			"newKey": "Optional Metadata"
                    		}
                    	},
                    	"user": {
                    		"name": "John Sandbridge",
                    		"email": "john@sandbridge.com",
                    		"phone": "+44123456789"
                    	}
                    }
                headers:
                  - name: Content-Type
                    value: application/json
                  - name: Idempotency-Key
                    value: "{% uuid 'v4' %}"
                authentication:
                  type: bearer
                  token: "{% response 'body', 'req_f8313a4d44204235b68efc08bb269230',
                    'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
                scripts:
                  preRequest: ""
                  afterResponse: ""
                settings:
                  renderRequestBody: true
                  encodeUrl: true
                  followRedirects: global
                  cookies:
                    send: true
                    store: true
                  rebuildPath: true
              - url: "{{ _.ENVIRONMENT_URI }}/v3/payments"
                name: Create Payment - Preselected sandbox provider
                meta:
                  id: req_4508ddcae5584a3292ab2803c9f6edfc
                  created: 1757511722005
                  modified: 1757517424844
                  isPrivate: false
                  description: >
                    Use the GET \merchant-accounts end point from the Merchants
                    API to get your Account ID
                  sortKey: -1612882494248.3125
                method: POST
                body:
                  mimeType: application/json
                  text: |-
                    {
                    	"amount_in_minor": 1,
                    	"currency": "GBP",
                    	"payment_method": {
                    		"type": "bank_transfer",
                    		"provider_selection": {
                    			"type": "preselected",
                    			"provider_id": "mock-payments-gb-redirect",
                    			"scheme_selection": {
                    				"type": "instant_preferred"
                    			},
                    			"remitter": {
                    				"account_identifier": {
                    					"type": "sort_code_account_number",
                    					"sort_code": "123456",
                    					"account_number": "12345678"
                    				},
                    				"account_holder_name": "Optional Remitter object"
                    			}
                    		},
                    		"beneficiary": {
                    			"type": "external_account",
                    			"account_holder_name": "Federico Casali",
                    			"reference": "Test Reference",
                    			"account_identifier": {
                    				"type": "sort_code_account_number",
                    				"sort_code": "123456",
                    				"account_number": "12345678"
                    			}
                    		}
                    	},
                    	"metadata": {
                    		"newKey": "Optional Metadata"
                    	},
                    	"user": {
                    		"id": "f61c0ec7-0f83-414e-8e5f-aace86e0ed35",
                    		"name": "Jonathan Sandbridge",
                    		"email": "john@sandbridge.com"
                    	}
                    }
                headers:
                  - name: Content-Type
                    value: application/json
                  - name: Idempotency-Key
                    value: "{% uuid 'v4' %}"
                authentication:
                  type: bearer
                  token: "{% response 'body', 'req_87fee500a28149e89155da1b0d9e5d36',
                    'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'never', 60 %}"
                scripts:
                  preRequest: ""
                  afterResponse: ""
                settings:
                  renderRequestBody: true
                  encodeUrl: true
                  followRedirects: global
                  cookies:
                    send: true
                    store: true
                  rebuildPath: true
              - url: https://payment.truelayer-sandbox.com/payments#payment_id={% response
                  'body', 'req_5e7112df808747b1964935ac7680d2fe',
                  'b64::JC5pZA==::46b', 'never', 60 %}&resource_token={%
                  response 'body', 'req_5e7112df808747b1964935ac7680d2fe',
                  'b64::JC5yZXNvdXJjZV90b2tlbg==::46b', 'never', 60
                  %}&return_uri={{ _.RETURN_URI }}
                name: Create HPP - Preselected sandbox provider
                meta:
                  id: req_1a7c7922638744019e1a7ac90932d231
                  created: 1757511722006
                  modified: 1757511722006
                  isPrivate: false
                  description: |-
                    How to create and use the HPP url: 
                    - Click on the 'Query' tab
                    - Copy the content and open it in a browser page"

                    See docs: https://docs.truelayer.com/docs/hosted-payment-page-for-payments-v3
                  sortKey: -1612882494148.3125
                method: BLD
                body:
                  mimeType: ""
                  text: "\n\n"
                headers:
                  - name: Content-Type
                    value: text/plain
                authentication:
                  type: bearer
                  token: "{% response 'body', 'req_42dac02e96cd4c4180227e29310e56a3',
                    'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
                scripts:
                  preRequest: ""
                  afterResponse: ""
                settings:
                  renderRequestBody: true
                  encodeUrl: true
                  followRedirects: global
                  cookies:
                    send: true
                    store: true
                  rebuildPath: true
            scripts:
              afterResponse: ""
              preRequest: ""
          - url: "{{ _.ENVIRONMENT_URI }}/v3/payments"
            name: Create EXT Payment with hosted_page object
            meta:
              id: req_85e6d79c72684e73893604f8830a1de7
              created: 1757517385049
              modified: 1757517471487
              isPrivate: false
              description: ""
              sortKey: -1647882182651
            method: POST
            body:
              mimeType: application/json
              text: |-
                {
                	"amount_in_minor": 1,
                	"currency": "GBP",
                	"payment_method": {
                		"provider_selection": {
                			"type": "user_selected"
                		},
                		"type": "bank_transfer",
                		"beneficiary": {
                			"type": "external_account",
                			"account_holder_name": "John Sandbridge",
                			"reference": "Test Reference",
                			"account_identifier": {
                				"type": "sort_code_account_number",
                				"sort_code": "040668",
                				"account_number": "00000871"
                			}
                		},
                		"metadata": {
                			"newKey": "Optional Metadata"
                		}
                	},
                	"hosted_page": {
                    "country_code": "GB",
                    "return_uri": "http://localhost:8080/redirect.php",
                    "language_code": "en"
                  },
                	"user": {
                		"name": "John Sandbridge",
                		"email": "john@sandbridge.com",
                		"phone": "+44123456789"
                	}
                }
            headers:
              - name: Content-Type
                value: application/json
              - name: Idempotency-Key
                value: "{% uuid 'v4' %}"
            authentication:
              type: bearer
              token: "{% response 'body', 'req_f8313a4d44204235b68efc08bb269230',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
          - url: "{{ _.ENVIRONMENT_URI }}/v3/payments"
            name: Create EXT Payment - Preselected sandbox with hosted_page obj
            meta:
              id: req_36052b9250034b67a9ca855285cc729b
              created: 1757517442779
              modified: 1757517466286
              isPrivate: false
              description: >
                Use the GET \merchant-accounts end point from the Merchants API
                to get your Account ID
              sortKey: -1647882182601
            method: POST
            body:
              mimeType: application/json
              text: |-
                {
                	"amount_in_minor": 1,
                	"currency": "GBP",
                	"payment_method": {
                		"type": "bank_transfer",
                		"provider_selection": {
                			"type": "preselected",
                			"provider_id": "mock-payments-gb-redirect",
                			"scheme_selection": {
                				"type": "instant_preferred"
                			},
                			"remitter": {
                				"account_identifier": {
                					"type": "sort_code_account_number",
                					"sort_code": "123456",
                					"account_number": "12345678"
                				},
                				"account_holder_name": "Optional Remitter object"
                			}
                		},
                		"beneficiary": {
                			"type": "external_account",
                			"account_holder_name": "Federico Casali",
                			"reference": "Test Reference",
                			"account_identifier": {
                				"type": "sort_code_account_number",
                				"sort_code": "123456",
                				"account_number": "12345678"
                			}
                		}
                	},
                	"metadata": {
                		"newKey": "Optional Metadata"
                	},
                	"hosted_page": {
                    "country_code": "GB",
                    "return_uri": "http://localhost:8080/redirect.php",
                    "language_code": "en"
                  },
                	"user": {
                		"id": "f61c0ec7-0f83-414e-8e5f-aace86e0ed35",
                		"name": "Jonathan Sandbridge",
                		"email": "john@sandbridge.com"
                	}
                }
            headers:
              - name: Content-Type
                value: application/json
              - name: Idempotency-Key
                value: "{% uuid 'v4' %}"
            authentication:
              type: bearer
              token: "{% response 'body', 'req_f8313a4d44204235b68efc08bb269230',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'never', 60 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
        scripts:
          afterResponse: ""
          preRequest: ""
      - name: Pay-In to Merchant Account
        meta:
          id: fld_c408f5347d284269ad15ac9d9a9a335b
          created: 1757511722006
          modified: 1757511722006
          sortKey: -1647883794652
          description: ""
        children:
          - name: Pay-in with Hosted Payment Page
            meta:
              id: fld_ae888f5273c34ed2a203892dd198607f
              created: 1757511722007
              modified: 1757511722007
              sortKey: -1647885020011
              description: ""
            children:
              - url: "{{ _.ENVIRONMENT_URI }}/v3/payments"
                name: Create Payment
                meta:
                  id: req_51cbb4cbc800426198ce629e1a9b6a86
                  created: 1757511722008
                  modified: 1757511851816
                  isPrivate: false
                  description: ""
                  sortKey: -1647883846405
                method: POST
                body:
                  mimeType: application/json
                  text: >-
                    {
                    	"amount_in_minor": 1,
                    	"currency": "GBP",
                    	"payment_method": {
                    		"provider_selection": {
                    			"type": "user_selected"
                    		},
                    		"filter": {
                    			"countries": [
                    				"GB"
                    			]
                    		},
                    		"type": "bank_transfer",
                    		"beneficiary": {
                    			"type": "merchant_account",
                    			"merchant_account_id": "{% prompt 'Beneficiary Merchant Account ID', 'Please get your merchant_account_id by calling the GET List Merchant Accounts endpoint. ', '', '', false, true %}",
                    			"reference": "Test Reference"
                    		}
                    	},
                    	"metadata": {
                    		"newKey": "Optional Metadata"
                    	},
                    	"user": {
                    		"id": "f61c0ec7-0f83-414e-8e5f-aace86e0ed35",
                    		"name": "Jonathan Sandbridge",
                    		"email": "john@sandbridge.com",
                    		"phone": "+44123456789",
                    		"date_of_birth": "1992-11-28",
                    		"address": {
                    			"address_line1": "40 Finsbury Square",
                    			"city": "London",
                    			"state": "London",
                    			"zip": "EC2A 1PX",
                    			"country_code": "GB"
                    		}
                    	}
                    }
                headers:
                  - name: Content-Type
                    value: application/json
                  - name: Idempotency-Key
                    value: "{% uuid 'v4' %}"
                authentication:
                  type: bearer
                  token: "{% response 'body', 'req_f8313a4d44204235b68efc08bb269230',
                    'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'never', 60 %}"
                scripts:
                  preRequest: ""
                  afterResponse: ""
                settings:
                  renderRequestBody: true
                  encodeUrl: true
                  followRedirects: global
                  cookies:
                    send: true
                    store: true
                  rebuildPath: true
              - url: https://payment.truelayer-sandbox.com/payments#payment_id={% response
                  'body', 'req_402e06ca6b7f4056982d3f311041ab93',
                  'b64::JC5pZA==::46b', 'never', 60 %}&resource_token={%
                  response 'body', 'req_402e06ca6b7f4056982d3f311041ab93',
                  'b64::JC5yZXNvdXJjZV90b2tlbg==::46b', 'never', 60
                  %}&return_uri={{ _.RETURN_URI }}
                name: Create HPP
                meta:
                  id: req_ed9305cd3be34bf7a44b585e692ce154
                  created: 1757511722008
                  modified: 1757511916963
                  isPrivate: false
                  description: |-
                    How to create and use the HPP url: 
                    - Click on the 'Query' tab
                    - Copy the content and open it in a browser page"

                    See docs: https://docs.truelayer.com/docs/hosted-payment-page-for-payments-v3
                  sortKey: -1647883820553.5
                method: BLD
                body:
                  mimeType: ""
                  text: "\n\n"
                headers:
                  - name: Content-Type
                    value: text/plain
                authentication:
                  type: bearer
                  token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
                    'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
                scripts:
                  preRequest: ""
                  afterResponse: ""
                settings:
                  renderRequestBody: true
                  encodeUrl: true
                  followRedirects: global
                  cookies:
                    send: true
                    store: true
                  rebuildPath: true
              - url: "{{ _.ENVIRONMENT_URI }}/v3/payments"
                name: Create Payment - Preselected sandbox provider
                meta:
                  id: req_d96c08fd3e564846b1f519a9a026b0e7
                  created: 1757511722009
                  modified: 1757511995989
                  isPrivate: false
                  description: >
                    Use the GET \merchant-accounts end point from the Merchants
                    API to get your Account ID
                  sortKey: -1647883820453.5
                method: POST
                body:
                  mimeType: application/json
                  text: >-
                    {
                    	"amount_in_minor": 1,
                    	"currency": "GBP",
                    	"payment_method": {
                    		"type": "bank_transfer",
                    		"provider_selection": {
                    			"type": "preselected",
                    			"provider_id": "mock-payments-gb-redirect",
                    			"scheme_selection": {
                    				"type": "instant_preferred"
                    			},
                    			"remitter": {
                    				"account_identifier": {
                    					"type": "sort_code_account_number",
                    					"sort_code": "123456",
                    					"account_number": "12345678"
                    				},
                    				"account_holder_name": "Optional Remitter object"
                    			}
                    		},
                    		"beneficiary": {
                    			"type": "merchant_account",
                    			"account_holder_name": "Merchant Account name",
                    			"merchant_account_id": "{% prompt 'Beneficiary Merchant Account ID', 'Please get your merchant_account_id by calling the GET List Merchant Accounts endpoint. ', '', '', false, true %}",
                    			"reference": "Test Reference"
                    		}
                    	},
                    	"metadata": {
                    		"newKey": "Optional Metadata"
                    	},
                    	"user": {
                    		"id": "f61c0ec7-0f83-414e-8e5f-aace86e0ed35",
                    		"name": "Jonathan Sandbridge",
                    		"email": "john@sandbridge.com",
                    		"phone": "+44123456789",
                    		"date_of_birth": "1992-11-28",
                    		"address": {
                    			"address_line1": "40 Finsbury Square",
                    			"city": "London",
                    			"state": "London",
                    			"zip": "EC2A 1PX",
                    			"country_code": "GB"
                    		}
                    	}
                    }
                headers:
                  - name: Content-Type
                    value: application/json
                  - name: Idempotency-Key
                    value: "{% uuid 'v4' %}"
                authentication:
                  type: bearer
                  token: "{% response 'body', 'req_f8313a4d44204235b68efc08bb269230',
                    'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'never', 60 %}"
                scripts:
                  preRequest: ""
                  afterResponse: ""
                settings:
                  renderRequestBody: true
                  encodeUrl: true
                  followRedirects: global
                  cookies:
                    send: true
                    store: true
                  rebuildPath: true
              - url: https://payment.truelayer-sandbox.com/payments#payment_id={% response
                  'body', 'req_377a07d8673048e8a0a5f527ebd054bc',
                  'b64::JC5pZA==::46b', 'never', 60 %}&resource_token={%
                  response 'body', 'req_377a07d8673048e8a0a5f527ebd054bc',
                  'b64::JC5yZXNvdXJjZV90b2tlbg==::46b', 'never', 60
                  %}&return_uri={{ _.RETURN_URI }}
                name: Create HPP - Preselected sandbox provider
                meta:
                  id: req_9f68a0da96004845962504b82c7b3dcd
                  created: 1757511722010
                  modified: 1757512040917
                  isPrivate: false
                  description: |-
                    How to create and use the HPP url: 
                    - Click on the 'Query' tab
                    - Copy the content and open it in a browser page"

                    See docs: https://docs.truelayer.com/docs/hosted-payment-page-for-payments-v3
                  sortKey: -1647883820353.5
                method: BLD
                body:
                  mimeType: ""
                  text: "\n\n"
                headers:
                  - name: Content-Type
                    value: text/plain
                authentication:
                  type: bearer
                  token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
                    'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
                scripts:
                  preRequest: ""
                  afterResponse: ""
                settings:
                  renderRequestBody: true
                  encodeUrl: true
                  followRedirects: global
                  cookies:
                    send: true
                    store: true
                  rebuildPath: true
            scripts:
              afterResponse: ""
              preRequest: ""
          - url: "{{ _.ENVIRONMENT_URI }}/v3/payments"
            name: Create Payment with hosted_page object
            meta:
              id: req_2591cf24cdb64477ba31ce368c6e90b7
              created: 1757517231510
              modified: 1757517819204
              isPrivate: false
              description: ""
              sortKey: -1647885020111
            method: POST
            body:
              mimeType: application/json
              text: >-
                {
                	"amount_in_minor": 1,
                	"currency": "GBP",
                	"payment_method": {
                		"provider_selection": {
                			"type": "user_selected"
                		},
                		"filter": {
                			"countries": [
                				"GB"
                			]
                		},
                		"type": "bank_transfer",
                		"beneficiary": {
                			"type": "merchant_account",
                			"merchant_account_id": "{% prompt 'Beneficiary Merchant Account ID', 'Please get your merchant_account_id by calling the GET List Merchant Accounts endpoint. ', '', '', false, true %}",
                			"reference": "Test Reference"
                		}
                	},
                	"metadata": {
                		"newKey": "Optional Metadata"
                	},
                	 "hosted_page": {
                    "country_code": "GB",
                    "return_uri": "http://localhost:8080/redirect.php",
                    "language_code": "en"
                  },
                	"user": {
                		"id": "f61c0ec7-0f83-414e-8e5f-aace86e0ed35",
                		"name": "Jonathan Sandbridge",
                		"email": "john@sandbridge.com",
                		"phone": "+44123456789",
                		"date_of_birth": "1992-11-28",
                		"address": {
                			"address_line1": "40 Finsbury Square",
                			"city": "London",
                			"state": "London",
                			"zip": "EC2A 1PX",
                			"country_code": "GB"
                		}
                	}
                }
            headers:
              - name: Content-Type
                value: application/json
              - name: Idempotency-Key
                value: "{% uuid 'v4' %}"
            authentication:
              type: bearer
              token: "{% response 'body', 'req_f8313a4d44204235b68efc08bb269230',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'never', 60 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
          - url: "{{ _.ENVIRONMENT_URI }}/v3/payments"
            name: Create Payment - Preselected sandbox with hosted_page object
            meta:
              id: req_4bdcb2e35df1483f88344953a4eb64ab
              created: 1757517303155
              modified: 1757517848856
              isPrivate: false
              description: >
                Use the GET \merchant-accounts end point from the Merchants API
                to get your Account ID
              sortKey: -1647885020061
            method: POST
            body:
              mimeType: application/json
              text: >-
                {
                	"amount_in_minor": 1,
                	"currency": "GBP",
                	"payment_method": {
                		"type": "bank_transfer",
                		"provider_selection": {
                			"type": "preselected",
                			"provider_id": "mock-payments-gb-redirect",
                			"scheme_selection": {
                				"type": "instant_preferred"
                			},
                			"remitter": {
                				"account_identifier": {
                					"type": "sort_code_account_number",
                					"sort_code": "123456",
                					"account_number": "12345678"
                				},
                				"account_holder_name": "Optional Remitter object"
                			}
                		},
                		"beneficiary": {
                			"type": "merchant_account",
                			"account_holder_name": "Merchant Account name",
                			"merchant_account_id": "{% prompt 'Beneficiary Merchant Account ID', 'Please get your merchant_account_id by calling the GET List Merchant Accounts endpoint. ', '', '', false, true %}",
                			"reference": "Test Reference"
                		}
                	},
                	"metadata": {
                		"newKey": "Optional Metadata"
                	},
                	 "hosted_page": {
                    "country_code": "GB",
                    "return_uri": "http://localhost:8080/redirect.php",
                    "language_code": "en"
                  },
                	"user": {
                		"id": "f61c0ec7-0f83-414e-8e5f-aace86e0ed35",
                		"name": "Jonathan Sandbridge",
                		"email": "john@sandbridge.com",
                		"phone": "+44123456789",
                		"date_of_birth": "1992-11-28",
                		"address": {
                			"address_line1": "40 Finsbury Square",
                			"city": "London",
                			"state": "London",
                			"zip": "EC2A 1PX",
                			"country_code": "GB"
                		}
                	}
                }
            headers:
              - name: Content-Type
                value: application/json
              - name: Idempotency-Key
                value: "{% uuid 'v4' %}"
            authentication:
              type: bearer
              token: "{% response 'body', 'req_f8313a4d44204235b68efc08bb269230',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'never', 60 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
        scripts:
          afterResponse: ""
          preRequest: ""
      - url: "{{ _.ENVIRONMENT_URI }}/v3/payments/{% prompt 'Payment ID', '', '', '',
          false, true %}"
        name: Get Payment status
        meta:
          id: req_2919ca774e7045c1863140f7d78dd50d
          created: 1757511722011
          modified: 1757511816876
          isPrivate: false
          description: ""
          sortKey: -1647883794683.25
        method: GET
        authentication:
          type: bearer
          token: "{% response 'body', 'req_f8313a4d44204235b68efc08bb269230',
            'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.ENVIRONMENT_URI }}/v3/merchant-accounts/signup-plus/payments/{%
          prompt 'Payment ID', 'Insert PaymentID', '', '', false, true %}"
        name: Get Signup plus
        meta:
          id: req_5f7acd1ebdb748cea7c0aae93e6c4f1d
          created: 1757511722011
          modified: 1757511824537
          isPrivate: false
          description: ""
          sortKey: -1647883794680.125
        method: GET
        authentication:
          type: bearer
          token: "{% response 'body', 'req_2bb13fc53c654497b995e7c3a5b13553',
            'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.ENVIRONMENT_URI }}/v3/payments/{% prompt 'Payment ID', '', '', '',
          false, true %}/actions/cancel"
        name: Cancel Payment
        meta:
          id: req_6e243c25b8404527a6cab042188f5123
          created: 1757511722012
          modified: 1757511829731
          isPrivate: false
          description: ""
          sortKey: -1647883794677
        method: POST
        body:
          mimeType: application/json
          text: ""
        headers:
          - name: Content-Type
            value: application/json
          - name: Idempotency-Key
            value: "{% uuid 'v4' %}"
        authentication:
          type: bearer
          token: "{% response 'body', 'req_f8313a4d44204235b68efc08bb269230',
            'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
    scripts:
      afterResponse: ""
      preRequest: ""
cookieJar:
  name: Default Jar
  meta:
    id: jar_c2959ca8c1914f64b5df4b04a3b41096
    created: 1707909564660
    modified: 1707909564660
environments:
  name: Base Environment
  meta:
    id: env_b8662a94eae2482992e1364f3558c9e2
    created: 1707909564656
    modified: 1707909564656
    isPrivate: false
  subEnvironments:
    - name: Production Sample Env
      meta:
        id: env_fa9830832c5e45e391ddd61f312e2525
        created: 1707909564657
        modified: 1707909564657
        isPrivate: false
        sortKey: 1690384195128
    - name: Sandbox Sample Env
      meta:
        id: env_966fedb51c424cb7844bceb0187e7b80
        created: 1707909564658
        modified: 1725445953605
        isPrivate: false
        sortKey: 1690384196662
      data:
        ENVIRONMENT_URI: https://api.truelayer-sandbox.com
        AUTH_SERVER_URI: https://auth.truelayer-sandbox.com
        REQUIRE_JWS: true
        CLIENT_ID: <Your sandbox client_id>
        CLIENT_SECRET: <This was generated when you created your Console account>
        CERTIFICATE_ID: <KID from Console>
        PRIVATE_KEY: <Your private key>
        RETURN_URI: <Return_URI - make sure you register this in Console!>
>>>>>>> Stashed changes
