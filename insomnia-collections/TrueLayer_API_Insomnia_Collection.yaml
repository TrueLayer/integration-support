type: collection.insomnia.rest/5.0
name: TrueLayer API collection
meta:
  id: wrk_6687dc452791487fadc77f61daff7ca2
  created: 1757518404817
  modified: 1757518404817
  description: ""
collection:
  - name: 1. Authentication
    meta:
      id: fld_ec061a6e941249a68fed42b04de4aaa1
      created: 1707909564663
      modified: 1723734613355
      sortKey: -1635961782159
      description: ""
    children:
      - url: "{{ _.AUTH_SERVER_URI }}/connect/token"
        name: 1B. Generate access token - Mandate
        meta:
          id: req_16a660ec6de4467b8fc24dc3ed6e3324
          created: 1707909564664
          modified: 1725547133394
          isPrivate: false
          description: >-
            ## [See this request in our API
            reference](https://docs.truelayer.com/reference/generateaccesstoken)


            Use this request to generate an `access_token` for the VRP-related
            requests in this collection.


            Note that payments on a mandate should also have the
            `recurring_payments:sweeping` or `recurring_payments:commercial`
            scopes, not just mandates themselves.
          sortKey: -1612882494723.3125
        method: POST
        body:
          mimeType: application/x-www-form-urlencoded
          params:
            - name: client_id
              value: "{{ _.CLIENT_ID }}"
              description: ""
              id: pair_c22e9af536f74fe0a5e747fc6eecad6d
            - name: client_secret
              value: "{{ _.CLIENT_SECRET }}"
              description: ""
              id: pair_df17b794d78f4d03be3b6c37527422c8
            - name: scope
              value: recurring_payments:sweeping
              description: ""
              disabled: true
              id: pair_b84a19cd1a1c4b23890b5d38cd2d94f1
            - name: grant_type
              value: client_credentials
              description: ""
              disabled: false
              id: pair_6e922ac379d94ced8366d885e25bf73f
            - name: scope
              value: payments recurring_payments:sweeping
              description: ""
              id: pair_60b83516aa964b7688b31d7bb4593622
        headers:
          - name: Content-Type
            value: application/x-www-form-urlencoded
          - name: ""
            value: ""
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.AUTH_SERVER_URI }}/connect/token"
        name: 1A. Generate access token
        meta:
          id: req_b6a218ac5317449ebec1ff105c3c711f
          created: 1707909564664
          modified: 1757509558538
          isPrivate: false
          description: >-
            ## [See this request in our API
            reference](https://docs.truelayer.com/reference/generateaccesstoken)


            Use this request to generate an `access_token` for most of the
            requests in this collection except for VRP and Signup+ requests.


            You can reference the result of this request as a 'Bearer' token for
            any new requests you make.
          sortKey: -1612882494823.3125
        method: POST
        body:
          mimeType: application/x-www-form-urlencoded
          params:
            - name: client_id
              value: "{{ _.CLIENT_ID }}"
              description: ""
              id: pair_c22e9af536f74fe0a5e747fc6eecad6d
            - name: client_secret
              value: "{{ _.CLIENT_SECRET }}"
              description: ""
              id: pair_df17b794d78f4d03be3b6c37527422c8
            - name: scope
              value: payments
              description: ""
              id: pair_b84a19cd1a1c4b23890b5d38cd2d94f1
            - name: grant_type
              value: client_credentials
              description: ""
              id: pair_6e922ac379d94ced8366d885e25bf73f
        headers:
          - name: Content-Type
            value: application/x-www-form-urlencoded
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.AUTH_SERVER_URI }}/connect/token"
        name: 1C. Generate access token - Signup+
        meta:
          id: req_28d67eb39a624af8adaf43d0370d785a
          created: 1723737465425
          modified: 1725547159019
          isPrivate: false
          description: >-
            ## [See this request in our API
            reference](https://docs.truelayer.com/reference/generateaccesstoken)


            Use this request to generate an `access_token` for the Signup+
            requests in this collection.
          sortKey: -1612882494623.3125
        method: POST
        body:
          mimeType: application/x-www-form-urlencoded
          params:
            - name: client_id
              value: "{{ _.CLIENT_ID }}"
              description: ""
              id: pair_c22e9af536f74fe0a5e747fc6eecad6d
            - name: client_secret
              value: "{{ _.CLIENT_SECRET }}"
              description: ""
              id: pair_df17b794d78f4d03be3b6c37527422c8
            - name: scope
              value: payments signupplus
              description: ""
              id: pair_b84a19cd1a1c4b23890b5d38cd2d94f1
            - name: grant_type
              value: client_credentials
              description: ""
              id: pair_6e922ac379d94ced8366d885e25bf73f
        headers:
          - name: Content-Type
            value: application/x-www-form-urlencoded
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
    scripts:
      afterResponse: ""
      preRequest: ""
  - name: 2. Merchant accounts
    meta:
      id: fld_5e711b5f83624a80ad9b76425707bd85
      created: 1707909564665
      modified: 1725378784314
      sortKey: -1635944926822.625
      description: ""
    children:
      - url: "{{ _.ENVIRONMENT_URI }}/v3/merchant-accounts"
        name: 2A. List merchant accounts
        meta:
          id: req_ba8f39c4753e43e7bb6a86bae8e7ef06
          created: 1707909564665
          modified: 1757509834704
          isPrivate: false
          description: |-
            ## [See this request in our API reference](https://docs.truelayer.com/reference/list-operating-accounts)
            The merchant accounts returned here are based on the `client_id` and `client_secret` you provided when you generated an `access_token`.

            In this Insomnia collection, these are likely stored in your environment variables.
          sortKey: -1635957334614.5
        method: GET
        authentication:
          type: bearer
          token: "{% response 'body', 'req_f8313a4d44204235b68efc08bb269230',
            'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.ENVIRONMENT_URI }}/v3/merchant-accounts/{% prompt 'Merchant Account
          ID', '', '', '', false, true %}"
        name: 2B. Get merchant account details
        meta:
          id: req_5f1477009dc3471dbaff540933708073
          created: 1707909564666
          modified: 1724949229909
          isPrivate: false
          description: |-
            ## [See this request in our API reference](https://docs.truelayer.com/reference/get-operating-account)
            This endpoint returns various details about a given merchant account, such as its bank details and the current and available balance of the account.

            You specify the merchant account to return details about as a path parameter.
          sortKey: -1635918451979.75
        method: GET
        authentication:
          type: bearer
          token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
            'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.ENVIRONMENT_URI }}/v3/merchant-accounts/{% prompt 'Merchant Account
          ID', '', '', '', false, true %}/transactions"
        name: 2C. Get merchant account transactions
        meta:
          id: req_f62cbc5bd63546129f131ff33ae7fb48
          created: 1707909564666
          modified: 1724949244826
          isPrivate: false
          description: |-
            ## [See this request in our API reference](https://docs.truelayer.com/reference/merchant-account-get-transactions)

            This endpoint returns a list of transactions and payment sources for your merchant account`id`, which you provide as a path parameter in your request.

            ## Pagination

            > By default, all `client_id`s made after December 2023 include a `pagination` object. It can be enabled for `client_id`s that were made earlier by including the `tl-enable-pagination:true` with your request.

            Pagination means that if your response would contain more than 1000 transactions, you receive 1000, and then make additional requests to get more. This avoids a problem where it would take a long time to retrieve transactions for merchant accounts with many transactions.

            If your response contains more than 2000 transactions, the final `pagination` object in the response contains a `next_cursor` object, with an associated string. If you include this string in your subsequent request, you'll receive the next page, which contains the next 2000 transactions. You can repeat this until the response no longer contains the `next_cursor` object.

            The **Query** and **Headers** tabs in this request in Insomnia enable you to test paginated responses.

            Learn more about [this endpoint](https://docs.truelayer.com/docs/get-your-merchant-account-transactions-or-payment-sources) and [pagination](https://docs.truelayer.com/docs/get-your-merchant-account-transactions-or-payment-sources#pagination-for-the-transactions-endpoint) in our docs.
          sortKey: -1635903870991.7188
        method: GET
        parameters:
          - name: from
            value: "{% prompt 'From Date', '', '2024-08-01T01:01:01Z', '', false, true %}"
            id: pair_e51a46377bb941869e1d413bba2089bb
          - name: to
            value: "{% now 'iso-8601', '' %}"
            id: pair_86e29d89e8584c3399b1a20e8eeec028
          - name: cursor
            value: "{% response 'body', 'req_9dbcbb34a3764acba445e3d1d7d4d8d9',
              'b64::JC5wYWdpbmF0aW9uLm5leHRfY3Vyc29y::46b', 'always', 60 %}"
            disabled: true
            id: pair_4718c64d0df64b18a006fbd29f18026a
        headers:
          - name: Idempotency-Key
            value: "{% uuid 'v4' %}"
          - name: tl-enable-pagination
            value: "true"
        authentication:
          type: bearer
          token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
            'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: false
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.ENVIRONMENT_URI }}/v3/merchant-accounts/{% prompt 'Merchant Account
          ID', '', '', '', false, true %}/sweeping"
        name: 2G. Delete sweeping settings
        meta:
          id: req_44c49697ee65497ba9aeffbe21bf73a3
          created: 1707909564667
          modified: 1725547491488
          isPrivate: false
          description: |-
            ## [See this request in our API reference](https://docs.truelayer.com/reference/merchant-account-disable-sweeping)

            Use this request to delete the existing sweeping settings for a merchant account. You get a **204 No Response** response to your request, but this means it's successful.

            You can check it was successful with the **2F. Get existing sweeping settings** request.
          sortKey: -1635884429649.3438
        method: DELETE
        body:
          mimeType: application/json
          text: ""
        headers:
          - name: Content-Type
            value: application/json
          - name: Idempotency-Key
            value: "{% uuid 'v4' %}"
        authentication:
          type: bearer
          token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
            'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.ENVIRONMENT_URI }}/v3/merchant-accounts/{% prompt 'Merchant Account
          ID', '', '', '', false, true %}/sweeping"
        name: 2D. Set up or update sweeping settings
        meta:
          id: req_8a05e8ba908249a5a0a8fe23a998f44e
          created: 1707909564667
          modified: 1725547332407
          isPrivate: false
          description: |-
            ## [See this request in our API reference](https://docs.truelayer.com/reference/merchant-account-setup-sweeping)

            Use this request to set up sweeping settings for your GBP merchant account.

            Note that while you can set the sweeping amount and frequency, and see these reflected in the sandbox environment in Console, sandbox doesn't actually sweep funds.
          sortKey: -1635889289953.6875
        method: POST
        body:
          mimeType: application/json
          text: |-
            {
             "max_amount_in_minor": 4000000,
             "frequency": "daily"
            }
        headers:
          - name: Content-Type
            value: application/json
          - name: Idempotency-Key
            value: "{% uuid 'v4' %}"
        authentication:
          type: bearer
          token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
            'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.ENVIRONMENT_URI }}/v3/merchant-accounts/{% prompt 'Merchant Account
          ID', '', '', '', false, true %}/sweeping"
        name: 2F. Get existing sweeping settings
        meta:
          id: req_5df87c9129b04f4390437de5516a02b1
          created: 1707909564668
          modified: 1725547500483
          isPrivate: false
          description: |-
            ## [See this request in our API reference](https://docs.truelayer.com/reference/merchant-account-get-sweeping)

            Use this request to check your existing sweeping settings for your merchant account without editing them.

            You can also check your sweeping settings in the **Merchant Account** tab in Console.
          sortKey: -1635886859801.5156
        method: GET
        body:
          mimeType: application/json
          text: ""
        headers:
          - name: Content-Type
            value: application/json
          - name: Idempotency-Key
            value: "{% uuid 'v4' %}"
        authentication:
          type: bearer
          token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
            'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.ENVIRONMENT_URI }}/v3/merchant-accounts/{% prompt 'Merchant Account
          ID', '', '', '', false, true %}/sweeping"
        name: 2E. Set up or update sweeping settings - EUR merchant account
        meta:
          id: req_6422460520de42a3b664e8c6d0d24464
          created: 1707909564668
          modified: 1725547343519
          isPrivate: false
          description: |-
            ## [See this request in our API reference](https://docs.truelayer.com/reference/merchant-account-setup-sweeping)

            Use this request to set up sweeping settings for your GBP merchant account.

            Note that while you can set the sweeping amount and frequency, and see these reflected in the sandbox environment in Console, sandbox doesn't actually sweep funds.
          sortKey: -1635888074877.6016
        method: POST
        body:
          mimeType: application/json
          text: |-
            {
             "max_amount_in_minor": 400000,
             "currency": "EUR",
             "frequency": "daily"
            }
        headers:
          - name: Content-Type
            value: application/json
          - name: Idempotency-Key
            value: "{% uuid 'v4' %}"
        authentication:
          type: bearer
          token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
            'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.ENVIRONMENT_URI }}/v3/merchant-accounts/{% prompt 'Merchant Account
          ID', '', '', '', false, true %}/payment-sources"
        name: 2H. Get merchant account payment sources
        meta:
          id: req_3a71a8b34d314e75bce83d0877c5b2aa
          created: 1724247859008
          modified: 1725548353269
          isPrivate: false
          description: |-
            ## [See this request in our API reference](https://docs.truelayer.com/reference/get-merchant-account-payment-sources)

            Use this endpoint to get the full list of payment sources that have made a payment to your merchant account. A payment source includes a user's name, payment source `id`, and bank details.

            You use the payment source `id` as the basis of a closed-loop payout.

            Note that in the sandbox environment, you only get a single payment source in response to this endpoint.
          sortKey: -1635884429599.3438
        method: GET
        parameters:
          - name: user_id
            value: "{% prompt 'User ID', 'Provide the user ID you want to return payment
              sources for.', '', '', false, true %}"
            id: pair_56b2b30bf6a945f48d31b04d509d0568
        authentication:
          type: bearer
          token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
            'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
    scripts:
      afterResponse: ""
      preRequest: ""
  - name: 4. Payouts
    meta:
      id: fld_98dbca38f41a4c5d9cd959d8f60f0516
      created: 1707909564668
      modified: 1723734850030
      sortKey: -1635894360826
      description: ""
    children:
      - name: Refunds
        meta:
          id: fld_0745042d1ad5416890b12105eb51dfd7
          created: 1707909564669
          modified: 1707909564669
          sortKey: -1612882494719.7969
          description: ""
        children:
          - url: "{{ _.ENVIRONMENT_URI }}/v3/payments/{% prompt 'Payment ID', '', '', '',
              false, true %}/refunds/{% prompt 'Refund ID', '', '', '', false,
              true %}"
            name: 4F. Get refund
            meta:
              id: req_72b4d9103fb243b2be2f212fc449f4ea
              created: 1707909564669
              modified: 1724950205513
              isPrivate: false
              description: |-
                ## [See this request in our API reference](https://docs.truelayer.com/reference/get-payment-refund)

                You can provide a refund `id` as a path parameter in the prompt when you run this request. This returns details of a single refund for a payment.
              sortKey: -1650310796702.75
            method: GET
            authentication:
              type: bearer
              token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
          - url: "{{ _.ENVIRONMENT_URI }}/v3/payments/{% prompt 'Payment ID', '', '', '',
              false, true %}/refunds"
            name: 4E. Create a refund
            meta:
              id: req_be03cc71c1104325a38da40550048606
              created: 1707909564669
              modified: 1724950140592
              isPrivate: false
              description: |-
                ## [See this request in our API reference](https://docs.truelayer.com/reference/create-payment-refund)

                To test this request, you must have an existing payment `id`, which you can provide as a path parameter by completing the prompt when you run the request.

                A refund, or multiple refunds, cannot exceed the value of an inital pay-in to your merchant account.

                [Learn more about refunds in our documentation](https://docs.truelayer.com/docs/refund-a-payment).
              sortKey: -1650310796752.75
            method: POST
            body:
              mimeType: application/json
              text: |-
                {
                "amount_in_minor": 1,
                "reference": "My reference"
                }
            headers:
              - name: Content-Type
                value: application/json
              - name: "tl_version    "
                value: "2"
              - name: Idempotency-Key
                value: "{% uuid 'v4' %}"
            authentication:
              type: bearer
              token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
          - url: "{{ _.ENVIRONMENT_URI }}/v3/payments/{% prompt 'Payment ID', '', '', '',
              false, true %}/refunds"
            name: 4G. Get refunds
            meta:
              id: req_7492d1c2132e424598658b80bcef759d
              created: 1707909564670
              modified: 1724950237114
              isPrivate: false
              description: |-
                ## [See this request in our API reference](https://docs.truelayer.com/reference/get-payment-refunds)

                You can provide a refund `id` as a path parameter in the prompt when you run this request. This returns details of all refunds made for a payment.
              sortKey: -1649730415032.375
            method: GET
            authentication:
              type: bearer
              token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
        scripts:
          afterResponse: ""
          preRequest: ""
      - name: "Verified Payout "
        meta:
          id: fld_29a4261fd3a24ef1bcead073959fdde4
          created: 1757512432569
          modified: 1757516982582
          sortKey: -1612882494744.7969
          description: ""
        children:
          - url: "{{ _.ENVIRONMENT_URI }}/v3/payouts"
            name: Create User_determined Payout
            meta:
              id: req_52e6ab1b972e44078798500359906f0a
              created: 1757512432573
              modified: 1757512491151
              isPrivate: false
              description: ""
              sortKey: -1752832909058
            method: POST
            body:
              mimeType: application/json
              text: >-
                {
                	"amount_in_minor": 1,
                	"merchant_account_id": "{% prompt 'Merchant Account ID', 'Enter your Merchant Account ID', '', '', false, true %}",
                	"currency": "GBP",
                	"beneficiary": {
                		"user": {
                			"name": "{% prompt 'Beneficiary User name', 'Enter beneficiary User name', 'Transaction account 1', '', false, true %}",
                			"email": "{% prompt 'Beneficiary User email', 'Enter beneficiary User email', '', '', false, true %}",
                			"phone": "+445901234567",
                			"id": "{% faker 'guid' %}"
                		},
                		"verification": {
                			"verify_name": true,
                			"transaction_search_criteria": {
                				"amount_in_minor": 1000,
                				"currency": "GBP",
                				"created_at": "2024-05-01",
                				"tokens": [
                					"Betropolis"
                				]
                			}
                		},
                		"provider_selection": {
                			"type": "user_selected"
                		},
                		"type": "user_determined",
                		"reference": "{% prompt 'Verified Payout Reference', 'Enter Verified Payout Reference', 'Test reference TVP', '', false, true %}"
                	}
                }
            headers:
              - name: Content-Type
                value: application/json
              - name: Idempotency-Key
                value: "{% uuid 'v4' %}"
            authentication:
              type: bearer
              token: "{% response 'body', 'req_f8313a4d44204235b68efc08bb269230',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
          - url: "{{ _.HP2_URI }}/payouts#payout_id={% response 'body',
              'req_0a158512d39743ee9aaaeab1e08d2eae', 'b64::JC5pZA==::46b',
              'never', 60 %}&resource_token={% response 'body',
              'req_0a158512d39743ee9aaaeab1e08d2eae',
              'b64::JC5yZXNvdXJjZV90b2tlbg==::46b', 'never', 60 %}&return_uri={{
              _.RETURN_URI }}"
            name: Create HPP TVP
            meta:
              id: req_9184c6e2bb1549f986c70d395fa7458d
              created: 1757512432575
              modified: 1757512752467
              isPrivate: false
              description: |-
                How to create and use the HPP url: 
                - Click on the 'Query' tab
                - Copy the content and open it in a browser page"

                See docs: https://docs.truelayer.com/docs/hosted-payment-page-for-payments-v3
              sortKey: -1752832908958
            method: BLD
            body:
              mimeType: ""
              text: "\n\n"
            headers:
              - name: Content-Type
                value: text/plain
            authentication:
              type: bearer
              token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
        scripts:
          afterResponse: ""
          preRequest: ""
      - url: "{{ _.ENVIRONMENT_URI }}/v3/payouts"
        name: 4A. Create payout to a payment source
        meta:
          id: req_49e9c8c7fe2f451686283ed406b99100
          created: 1707909564671
          modified: 1757512801059
          isPrivate: false
          description: |-
            ## [See this request in our API reference](https://docs.truelayer.com/reference/create-payout)

            A payout back to a user's bank details they paid in with (payment source) is also known as a [closed-loop payout](https://docs.truelayer.com/docs/make-a-payout-to-an-account-that-paid-in).
          sortKey: -1612882494770.9688
        method: POST
        body:
          mimeType: application/json
          text: >-
            {
            	"merchant_account_id": "{% prompt 'Merchant Account ID', 'Please get your merchant_account_id by calling the GET List Merchant Accounts endpoint. ', '', '', false, true %}",
            	"amount_in_minor": 10,
            	"currency": "GBP",
            	"beneficiary": {
            		"type": "payment_source",
            		"user_id": "{% prompt 'User_ID', '', '', '', false, true %}",
            		"payment_source_id": "{% prompt 'Payment_Source.ID', 'Get the Payment Source ID from the Payin payment \'settled\' status body', '', '', false, true %}",
            		"reference": "PayOutRef 1"
            	}
            }
        headers:
          - name: Content-Type
            value: application/json
          - name: Idempotency-Key
            value: "{% uuid 'v4' %}"
        authentication:
          type: bearer
          token: "{% response 'body', 'req_f8313a4d44204235b68efc08bb269230',
            'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: false
          rebuildPath: true
      - url: "{{ _.ENVIRONMENT_URI }}/v3/payouts/{% prompt 'PayOut ID', '', '', '',
          false, true %}"
        name: 4D. Get payout
        meta:
          id: req_ede2daf6d7ba45adb03982ae24d77a6f
          created: 1707909564671
          modified: 1724950039821
          isPrivate: false
          description: >
            ## [See this request in our API
            reference](https://docs.truelayer.com/reference/get-payout)
          sortKey: -1612882494769.7969
        method: GET
        body:
          mimeType: application/json
          text: ""
        headers:
          - name: Content-Type
            value: application/json
          - name: Idempotency-Key
            value: "{% uuid 'v4' %}"
        authentication:
          type: bearer
          token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
            'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.ENVIRONMENT_URI }}/v3/payouts"
        name: 4C. Create payout to an external account - IBAN
        meta:
          id: req_e2f8ea0fca944b2c93315e0533c3a0d9
          created: 1707909564672
          modified: 1724950021716
          isPrivate: false
          description: |
            ## [See this request in our API reference](https://docs.truelayer.com/reference/create-payout)

            A payout to an external account's bank details is also known as an [open-loop payout](https://docs.truelayer.com/docs/make-a-payout-to-an-external-account). This example pays a European account's IBAN.
          sortKey: -1612882494770.0715
        method: POST
        body:
          mimeType: application/json
          text: >-
            {
            	"merchant_account_id": "{% prompt 'Merchant Account ID', 'Please get your merchant_account_id by calling the GET List Merchant Accounts endpoint. ', '', '', false, true %}",
            	"amount_in_minor": 1,
            	"currency": "GBP",
            	"beneficiary": {
            		"type": "external_account",
            		"account_holder_name": "Ben Eficiary",
            		"account_identifier": {
            			"type": "iban",
            			"iban": ""
            		},
            		"reference": "Ref Payout",
            		"address": {
            			"address_line1": "40 Finsbury Square",
            			"city": "London",
            			"state": "London",
            			"zip": "EC2A 1PX",
            			"country_code": "GB"
            		},
            		"date_of_birth": "1990-01-31"
            	}
            }
        headers:
          - name: Content-Type
            value: application/json
          - name: Idempotency-Key
            value: "{% uuid 'v4' %}"
        authentication:
          type: bearer
          token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
            'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.ENVIRONMENT_URI }}/v3/payouts"
        name: 4B. Create payout to an external account - SCAN
        meta:
          id: req_5aeb74b9bebb421bbb3a0d69127b6e6f
          created: 1707909564673
          modified: 1724949854252
          isPrivate: false
          description: |-
            ## [See this request in our API reference](https://docs.truelayer.com/reference/create-payout)

            A payout to an external account's bank details is also known as an [open-loop payout](https://docs.truelayer.com/docs/make-a-payout-to-an-external-account). This example pays a UK account's sort code and account number (SCAN).
          sortKey: -1612882494770.5293
        method: POST
        body:
          mimeType: application/json
          text: >-
            {
            	"merchant_account_id": "{% prompt 'Merchant Account ID', 'Please get your merchant_account_id by calling the GET List Merchant Accounts endpoint. ', '', '', false, true %}",
            	"amount_in_minor": 1,
            	"currency": "GBP",
            	"beneficiary": {
            		"type": "external_account",
            		"account_holder_name": "Ben Eficiary",
            		"account_identifier": {
            			"type": "sort_code_account_number",
            			"sort_code": "123456",
            			"account_number": "12345678"
            		},
            		"reference": "Payout reference",
            		"address": {
            			"address_line1": "40 Finsbury Square",
            			"city": "London",
            			"state": "London",
            			"zip": "EC2A 1PX",
            			"country_code": "GB"
            		},
            		"date_of_birth": "1990-01-31"
            	}
            }
        headers:
          - name: Content-Type
            value: application/json
          - name: Idempotency-Key
            value: "{% uuid 'v4' %}"
        authentication:
          type: bearer
          token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
            'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: false
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
    scripts:
      afterResponse: ""
      preRequest: ""
  - name: 6. VRP Mandates and Payments
    meta:
      id: fld_9f68ccdf8abd4d0da73a39c9d5d13927
      created: 1707909564689
      modified: 1723735093660
      sortKey: -1000000000
      description: ""
    children:
      - name: Mandate to external account
        meta:
          id: fld_fa23b77c3c00404388860df75a09e907
          created: 1707909564690
          modified: 1723735221406
          sortKey: -1648351513063.5
          description: ""
        children:
          - name: Payment on mandate to external account
            meta:
              id: fld_e87f1ada0d74456ba0a56314593102e9
              created: 1707909564690
              modified: 1724949036409
              sortKey: 400
              description: ""
            children:
              - url: "{{ _.ENVIRONMENT_URI }}/v3/payments/{% response 'body',
                  'req_0e91256025834b58ba5ec3c6f18c9d3d', 'b64::JC5pZA==::46b',
                  'never', 60 %}"
                name: 6S. Get payment on a mandate (access token)
                meta:
                  id: req_80564095452e44bba56c4f77d53d613e
                  created: 1707909564690
                  modified: 1724952207779
                  isPrivate: false
                  description: |
                    ## [See this request in our API reference](https://docs.truelayer.com/reference/get-payment-1)
                  sortKey: -1643121940158.5
                method: GET
                authentication:
                  type: bearer
                  token: "{% response 'body', 'req_6fc0e9ac772544ab942818fd81300b5e',
                    'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 600 %}"
                scripts:
                  preRequest: ""
                  afterResponse: ""
                settings:
                  renderRequestBody: true
                  encodeUrl: true
                  followRedirects: global
                  cookies:
                    send: true
                    store: true
                  rebuildPath: true
              - url: "{{ _.ENVIRONMENT_URI }}/v3/payments"
                name: 6Q. Create payment on a mandate
                meta:
                  id: req_8884becc8f6c41b9a0a1cf6f2913e7a8
                  created: 1707909564690
                  modified: 1724952225171
                  isPrivate: false
                  description: |
                    ## [See this request in our API reference](https://docs.truelayer.com/reference/create-payment)
                  sortKey: -1643121940196
                method: POST
                body:
                  mimeType: application/json
                  text: >-
                    
                    {
                    		"payment_method": {
                    				"type": "mandate",
                    		"mandate_id": "{% response 'body', 'req_b1f9b99104cd44d0b8944ee0d7687c40', 'b64::JC5pZA==::46b', 'never', 60 %}"
                    		},
                    		"amount_in_minor": 1,
                    		"reference": "{% prompt 'Reference', 'Reference', 'reference123', '', false, true %}",
                    		"currency": "GBP"
                    }
                headers:
                  - name: Content-Type
                    value: application/json
                  - name: Idempotency-Key
                    value: "{% uuid 'v4' %}"
                authentication:
                  type: bearer
                  token: "{% response 'body', 'req_6fc0e9ac772544ab942818fd81300b5e',
                    'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 600 %}"
                scripts:
                  preRequest: ""
                  afterResponse: ""
                settings:
                  renderRequestBody: true
                  encodeUrl: true
                  followRedirects: global
                  cookies:
                    send: true
                    store: true
                  rebuildPath: true
              - url: "{{ _.ENVIRONMENT_URI }}/v3/payments/{% response 'body',
                  'req_0e91256025834b58ba5ec3c6f18c9d3d', 'b64::JC5pZA==::46b',
                  'never', 60 %}"
                name: 6R. Get payment on a mandate (resource token)
                meta:
                  id: req_4f250503a121403a886c17dc09b46c6c
                  created: 1707909564691
                  modified: 1724952213990
                  isPrivate: false
                  description: |
                    ## [See this request in our API reference](https://docs.truelayer.com/reference/get-payment-1)
                  sortKey: -1643121940108.5
                method: GET
                authentication:
                  type: bearer
                  token: "{% response 'body', 'req_0e91256025834b58ba5ec3c6f18c9d3d',
                    'b64::JC5yZXNvdXJjZV90b2tlbg==::46b', 'never', 600 %}"
                scripts:
                  preRequest: ""
                  afterResponse: ""
                settings:
                  renderRequestBody: true
                  encodeUrl: true
                  followRedirects: global
                  cookies:
                    send: true
                    store: true
                  rebuildPath: true
            scripts:
              afterResponse: ""
              preRequest: ""
          - url: "{{ _.ENVIRONMENT_URI }}/v3/mandates"
            name: 6K. Create mandate paying an external account
            meta:
              id: req_e4d43712d3de4553999a68df5c75c520
              created: 1707909564691
              modified: 1724951814201
              isPrivate: false
              description: >
                ## [See this request in our API
                reference](https://docs.truelayer.com/reference/create-mandate)
              sortKey: 0
            method: POST
            body:
              mimeType: application/json
              text: >-
                {
                	"mandate": {
                		"type": "sweeping",
                		"provider_filter": {
                			"countries": [
                				"GB"
                			],
                			"release_channel": "private_beta"
                		},
                		"provider_selection": {
                			"type": "user_selected"
                		},
                		"beneficiary": {
                			"type": "external_account",
                			"account_holder_name": "Beneficiary Name",
                			"account_identifier": {
                				"type": "sort_code_account_number",
                				"sort_code": "123456",
                				"account_number": "12345678"
                			}
                		}
                	},
                	"currency": "GBP",
                	"user": {
                		"id": "{% uuid 'v4' %}",
                		"name": "{% prompt 'Name', '', '', '', false, true %}",
                		"email": "{% prompt 'User Email', '', '', '', false, true %}",
                		"phone": "{% prompt 'Phone', 'Please prefix with + and country code', '', '', false, true %}"
                	},
                	"constraints": {
                		"valid_from": "{% now 'iso-8601', '' %}",
                		"valid_to": "2025-01-01T00:00:00.000Z",
                		"maximum_individual_amount": 50,
                		"periodic_limits": {
                			"day": {
                				"maximum_amount": 100,
                				"period_alignment": "calendar"
                			},
                			"month": {
                				"maximum_amount": 1000,
                				"period_alignment": "calendar"
                			}
                		}
                	}
                }
            headers:
              - name: Content-Type
                value: application/json
              - name: Idempotency-Key
                value: "{% uuid 'v4' %}"
            authentication:
              type: bearer
              token: "{% response 'body', 'req_e61a49eeb0ed4f2fb5b8074a71ea3f98',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 600 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
          - url: "{{ _.ENVIRONMENT_URI }}/v3/mandates/{% response 'body',
              'req_b1f9b99104cd44d0b8944ee0d7687c40', 'b64::JC5pZA==::46b',
              'never', 60 %}/authorization-flow"
            name: 6L. Start authorisation flow
            meta:
              id: req_726ee22ed5cf4a73ae0af097acfa6a55
              created: 1707909564692
              modified: 1724951838646
              isPrivate: false
              description: |
                ## [See this request in our API reference](https://docs.truelayer.com/reference/start-mandate-authorization-flow)
              sortKey: 100
            method: POST
            body:
              mimeType: application/json
              text: |-
                {
                	"provider_selection": {},
                	"redirect": {
                		"return_uri": "{{ _.RETURN_URI }}"
                	}
                }
            headers:
              - name: Content-Type
                value: application/json
              - name: Idempotency-Key
                value: "{% uuid 'v4' %}"
            authentication:
              type: bearer
              disabled: false
              token: "{% response 'body', 'req_e61a49eeb0ed4f2fb5b8074a71ea3f98',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'never', 60 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
          - url: "{{ _.ENVIRONMENT_URI }}/v3/mandates/{% response 'body',
              'req_b1f9b99104cd44d0b8944ee0d7687c40', 'b64::JC5pZA==::46b',
              'never', 60 %}/authorization-flow/actions/provider-selection"
            name: 6M. Provider selection
            meta:
              id: req_936e6ad99c11469fb3e2184ee2937eea
              created: 1707909564692
              modified: 1724951867303
              isPrivate: false
              description: |
                ## [See this request in our API reference](https://docs.truelayer.com/reference/submit-mandate-provider-selection)
              sortKey: 200
            method: POST
            body:
              mimeType: application/json
              text: |-
                {
                  "provider_id": "ob-natwest-vrp-sandbox"
                }
            headers:
              - name: Content-Type
                value: application/json
              - name: Idempotency-Key
                value: "{% uuid 'v4' %}"
            authentication:
              type: bearer
              token: "{% response 'body', 'req_6fc0e9ac772544ab942818fd81300b5e',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 600 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
          - url: "{{ _.ENVIRONMENT_URI }}/v3/mandates/{% response 'body',
              'req_c8bdfe4156f94d16a0c7ae27e5fb1f69', 'b64::JC5pZA==::46b',
              'never', 60 %}/revoke"
            name: 6T. Revoke mandate
            meta:
              id: req_a375f690d54547dda14f5770e1357772
              created: 1707909564692
              modified: 1724952406902
              isPrivate: false
              description: >
                ## [See this request in our API
                reference](https://docs.truelayer.com/reference/revoke-mandate)
              sortKey: 500
            method: POST
            headers:
              - name: Idempotency-Key
                value: "{% uuid 'v4' %}"
              - name: ""
                value: ""
            authentication:
              type: bearer
              token: "{% response 'body', 'req_6fc0e9ac772544ab942818fd81300b5e',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 600 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
          - url: "{{ _.ENVIRONMENT_URI }}/v3/mandates?user_id={% response 'body',
              'req_b1f9b99104cd44d0b8944ee0d7687c40', 'b64::JC51c2VyLmlk::46b',
              'when-expired', 600 %}&limit={% prompt 'Limit', 'mandates per
              page', '25', '', false, true %}"
            name: 6O. List mandates
            meta:
              id: req_106e73b15d4e4eb894a0441d04f03631
              created: 1707909564693
              modified: 1724952054399
              isPrivate: false
              description: >-
                ## [See this request in our API
                reference](https://docs.truelayer.com/reference/list-mandate)


                As is, this request will always return 1 mandate. To get more
                than one mandate, make sure to disable generating a new random
                user_id on every Create Mandate request.


                Maximum number of items included in the returned window. Should
                be greater than 0 and less than 50.


                If not set, a default of 25 is considered.
              sortKey: 325
            method: GET
            authentication:
              type: bearer
              token: "{% response 'body', 'req_6fc0e9ac772544ab942818fd81300b5e',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'never', 600 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
          - url: "{{ _.ENVIRONMENT_URI }}/v3/mandates/{% response 'body',
              'req_b1f9b99104cd44d0b8944ee0d7687c40', 'b64::JC5pZA==::46b',
              'never', 60 %}"
            name: 6N. Get mandate
            meta:
              id: req_5a264ad4eb4f478185aed1e0d2f61fa0
              created: 1707909564693
              modified: 1724952036013
              isPrivate: false
              description: >
                ## [See this request in our API
                reference](https://docs.truelayer.com/reference/get-mandate)
              sortKey: 300
            method: GET
            authentication:
              type: bearer
              token: "{% response 'body', 'req_6fc0e9ac772544ab942818fd81300b5e',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 600 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
          - url: "{{ _.ENVIRONMENT_URI }}/v3/mandates/{% response 'body',
              'req_b1f9b99104cd44d0b8944ee0d7687c40', 'b64::JC5pZA==::46b',
              'never', 60 %}/funds?amount_in_minor={% prompt 'Amount', 'amount',
              '1', '', false, true %}&currency=GBP"
            name: 6P. Confirm funds
            meta:
              id: req_6a1b804f6b81434d9c00968c218da5d9
              created: 1707909564693
              modified: 1724952085440
              isPrivate: false
              description: |-
                ## [See this request in our API reference](https://docs.truelayer.com/reference/confirm-mandate-funds)

                This request is meant to be used to confirm the amount of money a PSU has in their account.
              sortKey: 350
            method: GET
            authentication:
              type: bearer
              token: "{% response 'body', 'req_6fc0e9ac772544ab942818fd81300b5e',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 600 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
        scripts:
          afterResponse: ""
          preRequest: ""
      - name: Mandate to merchant account
        meta:
          id: fld_c1f2933c8aed453fab8deb542a9e3aa1
          created: 1707909564694
          modified: 1723735214322
          sortKey: -1648351513113.5
          description: ""
        children:
          - name: Payment on mandate to merchant account
            meta:
              id: fld_922b3e626e474bd6b69494d0f88e9422
              created: 1707909564694
              modified: 1723735209383
              sortKey: 450
              description: ""
            children:
              - url: "{{ _.ENVIRONMENT_URI }}/v3/payments"
                name: 6G. Create payment on a mandate
                meta:
                  id: req_4f5c78f31b7f41bb9aac86781ecfab65
                  created: 1707909564694
                  modified: 1724952344172
                  isPrivate: false
                  description: |
                    ## [See this request in our API reference](https://docs.truelayer.com/reference/create-payment)
                  sortKey: -1643121940133.5
                method: POST
                body:
                  mimeType: application/json
                  text: >-
                    {
                    	"payment_method": {
                    		"type": "mandate",
                    		"mandate_id": "{% response 'body', 'req_599a894d7617486d8f666f33e1ead94c', 'b64::JC5pZA==::46b', 'never', 60 %}"
                    	},
                    	"amount_in_minor": 1,
                    	"reference": "{% prompt 'Reference', 'Reference', 'reference123', '', false, true %}",
                    	"currency": "GBP"
                    }
                headers:
                  - name: Content-Type
                    value: application/json
                  - name: Idempotency-Key
                    value: "{% uuid 'v4' %}"
                authentication:
                  type: bearer
                  token: "{% response 'body', 'req_e61a49eeb0ed4f2fb5b8074a71ea3f98',
                    'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 600 %}"
                scripts:
                  preRequest: ""
                  afterResponse: ""
                settings:
                  renderRequestBody: true
                  encodeUrl: true
                  followRedirects: global
                  cookies:
                    send: true
                    store: true
                  rebuildPath: true
              - url: "{{ _.ENVIRONMENT_URI }}/v3/payments/{% response 'body',
                  'req_434b7677da934a508ba7e071670e062e', 'b64::JC5pZA==::46b',
                  'never', 60 %}"
                name: 6H. Get payment on a mandate (resource token)
                meta:
                  id: req_63f1da91819a41eba973f7363b758630
                  created: 1707909564695
                  modified: 1724952358865
                  isPrivate: false
                  description: |
                    ## [See this request in our API reference](https://docs.truelayer.com/reference/get-payment-1)
                  sortKey: -1643121940096
                method: GET
                authentication:
                  type: bearer
                  token: "{% response 'body', 'req_434b7677da934a508ba7e071670e062e',
                    'b64::JC5yZXNvdXJjZV90b2tlbg==::46b', 'never', 600 %}"
                scripts:
                  preRequest: ""
                  afterResponse: ""
                settings:
                  renderRequestBody: true
                  encodeUrl: true
                  followRedirects: global
                  cookies:
                    send: true
                    store: true
                  rebuildPath: true
              - url: "{{ _.ENVIRONMENT_URI }}/v3/payments/{% response 'body',
                  'req_434b7677da934a508ba7e071670e062e', 'b64::JC5pZA==::46b',
                  'never', 60 %}"
                name: 6I. Get payment on a mandate (access token)
                meta:
                  id: req_9e1a7683393f46dcb984a7583c498a73
                  created: 1707909564695
                  modified: 1724952351193
                  isPrivate: false
                  description: |
                    ## [See this request in our API reference](https://docs.truelayer.com/reference/get-payment-1)
                  sortKey: -1643121940114.75
                method: GET
                authentication:
                  type: bearer
                  token: "{% response 'body', 'req_e61a49eeb0ed4f2fb5b8074a71ea3f98',
                    'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 600 %}"
                scripts:
                  preRequest: ""
                  afterResponse: ""
                settings:
                  renderRequestBody: true
                  encodeUrl: true
                  followRedirects: global
                  cookies:
                    send: true
                    store: true
                  rebuildPath: true
            scripts:
              afterResponse: ""
              preRequest: ""
          - url: "{{ _.ENVIRONMENT_URI }}/v3/mandates/{% response 'body',
              'req_9f4b0ff4d37943008187c75ba2ddf44f', 'b64::JC5pZA==::46b',
              'never', 60 %}/revoke"
            name: 6J. Revoke mandate
            meta:
              id: req_0efc3d498de1403da36220eb8f690729
              created: 1707909564696
              modified: 1724951736836
              isPrivate: false
              description: >
                ## [See this request in our API
                reference](https://docs.truelayer.com/reference/revoke-mandate)
              sortKey: 500
            method: POST
            headers:
              - name: Idempotency-Key
                value: "{% uuid 'v4' %}"
              - name: ""
                value: ""
            authentication:
              type: bearer
              token: "{% response 'body', 'req_6fc0e9ac772544ab942818fd81300b5e',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 600 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
          - url: "{{ _.ENVIRONMENT_URI }}/v3/mandates/{% response 'body',
              'req_599a894d7617486d8f666f33e1ead94c', 'b64::JC5pZA==::46b',
              'never', 60 %}/authorization-flow/actions/provider-selection"
            name: 6C. Provider selection
            meta:
              id: req_fb6b24ce8da4428a8921470fdea9ea2f
              created: 1707909564696
              modified: 1724951345365
              isPrivate: false
              description: "## [See this request in our API
                reference](https://docs.truelayer.com/reference/submit-mandate-\
                provider-selection)"
              sortKey: 200
            method: POST
            body:
              mimeType: application/json
              text: |-
                {
                  "provider_id": "ob-natwest-vrp-sandbox"
                }
            headers:
              - name: Content-Type
                value: application/json
              - name: Idempotency-Key
                value: "{% uuid 'v4' %}"
            authentication:
              type: bearer
              token: "{% response 'body', 'req_e61a49eeb0ed4f2fb5b8074a71ea3f98',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 600 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
          - url: "{{ _.ENVIRONMENT_URI }}/v3/mandates/{% response 'body',
              'req_599a894d7617486d8f666f33e1ead94c', 'b64::JC5pZA==::46b',
              'never', 60 %}/authorization-flow"
            name: 6B. Start authorisation flow
            meta:
              id: req_149b1d42a2434e61bb365051799ca898
              created: 1707909564697
              modified: 1724951302942
              isPrivate: false
              description: "## [See this request in our API
                reference](https://docs.truelayer.com/reference/start-mandate-a\
                uthorization-flow)"
              sortKey: 100
            method: POST
            body:
              mimeType: application/json
              text: |-
                {
                	"provider_selection": {},
                	"redirect": {
                		"return_uri": "{{ _.RETURN_URI }}"
                	}
                }
            headers:
              - name: Content-Type
                value: application/json
              - name: Idempotency-Key
                value: "{% uuid 'v4' %}"
            authentication:
              type: bearer
              disabled: false
              token: "{% response 'body', 'req_e61a49eeb0ed4f2fb5b8074a71ea3f98',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 60 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
          - url: "{{ _.ENVIRONMENT_URI }}/v3/mandates/{% response 'body',
              'req_599a894d7617486d8f666f33e1ead94c', 'b64::JC5pZA==::46b',
              'never', 60 %}"
            name: 6D. Get mandate
            meta:
              id: req_619c0dcef1b2473a86e62689d89f18eb
              created: 1707909564698
              modified: 1724951374524
              isPrivate: false
              description: "## [See this request in our API
                reference](https://docs.truelayer.com/reference/get-mandate)"
              sortKey: 300
            method: GET
            authentication:
              type: bearer
              token: "{% response 'body', 'req_e61a49eeb0ed4f2fb5b8074a71ea3f98',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 600 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
          - url: "{{ _.ENVIRONMENT_URI }}/v3/mandates/{% response 'body',
              'req_599a894d7617486d8f666f33e1ead94c', 'b64::JC5pZA==::46b',
              'never', 60 %}/funds?amount_in_minor={% prompt 'Amount', 'amount',
              '1', '', false, true %}&currency=GBP"
            name: 6F. Confirm funds
            meta:
              id: req_bdbca5b3602a486c84bc9159e1c20c1e
              created: 1707909564698
              modified: 1724952071276
              isPrivate: false
              description: |-
                ## [See this request in our API reference](https://docs.truelayer.com/reference/confirm-mandate-funds)

                This request is meant to be used to confirm the amount of money a PSU has in their account.
              sortKey: 350
            method: GET
            authentication:
              type: bearer
              token: "{% response 'body', 'req_e61a49eeb0ed4f2fb5b8074a71ea3f98',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 600 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
          - url: "{{ _.ENVIRONMENT_URI }}/v3/mandates?user_id={% response 'body',
              'req_599a894d7617486d8f666f33e1ead94c', 'b64::JC51c2VyLmlk::46b',
              'never', 60 %}&limit={% prompt 'Limit', 'mandates per page', '25',
              '', false, true %}"
            name: 6E. List mandates
            meta:
              id: req_f146d692c8cc4183b80783ae085c8d72
              created: 1707909564698
              modified: 1724951422388
              isPrivate: false
              description: >-
                ## [See this request in our API
                reference](https://docs.truelayer.com/reference/list-mandate)


                As is, this request will always return 1 mandate. To get more
                than one mandate, make sure to disable generating a new random
                user_id on every Create Mandate request.


                Maximum number of items included in the returned window. Should
                be greater than 0 and less than 50.


                If not set, a default of 25 is considered.
              sortKey: 325
            method: GET
            authentication:
              type: bearer
              token: "{% response 'body', 'req_e61a49eeb0ed4f2fb5b8074a71ea3f98',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 600 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
          - url: "{{ _.ENVIRONMENT_URI }}/v3/mandates"
            name: 6A. Create mandate paying a merchant account
            meta:
              id: req_d927680fb6a84a7bb3f5eb3b60f7a4b9
              created: 1707909564699
              modified: 1724951275735
              isPrivate: false
              description: "## [See this request in our API
                reference](https://docs.truelayer.com/reference/create-mandate)"
              sortKey: 50
            method: POST
            body:
              mimeType: application/json
              text: >-
                {
                	"mandate": {
                		"type": "sweeping",
                		"provider_filter": {
                			"countries": [
                				"GB"
                			],
                			"release_channel": "private_beta"
                		},
                		"provider_selection": {
                			"type": "user_selected"
                		},
                		"beneficiary": {
                			"type": "merchant_account",
                			"merchant_account_id": "{% prompt 'Merchant account id', 'Merchant account id', '123', '', false, true %}",
                		  "account_holder_name": "{% prompt 'Merchant Account Holder Name', 'Merchant Account Holder Name', 'Company.Inc', '', false, true %}"
                		}
                	},
                	"currency": "GBP",
                	"user": {
                		"id": "{% uuid 'v4' %}",
                		"name": "{% prompt 'Name', '', '', '', false, true %}",
                		"email": "{% prompt 'User Email', '', '', '', false, true %}",
                		"phone": "{% prompt 'Phone', 'Please prefix with + and country code', '', '', false, true %}"
                	},
                	"constraints": {
                		"valid_from": "{% now 'iso-8601', '' %}",
                		"valid_to": "2025-01-01T00:00:00.000Z",
                		"maximum_individual_amount": 50,
                		"periodic_limits": {
                			"day": {
                				"maximum_amount": 100,
                				"period_alignment": "calendar"
                			},
                			"month": {
                				"maximum_amount": 1000,
                				"period_alignment": "calendar"
                			}
                		}
                	}
                }
            headers:
              - name: Content-Type
                value: application/json
              - name: Idempotency-Key
                value: "{% uuid 'v4' %}"
            authentication:
              type: bearer
              token: "{% response 'body', 'req_e61a49eeb0ed4f2fb5b8074a71ea3f98',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 600 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
        scripts:
          afterResponse: ""
          preRequest: ""
    scripts:
      afterResponse: ""
      preRequest: ""
  - name: 5. Payment links
    meta:
      id: fld_293e7d5cfe6646cb93d96b631b79333b
      created: 1707909564703
      modified: 1724950244805
      sortKey: -818447180413
      description: ""
    children:
      - url: "{{ _.ENVIRONMENT_URI }}/v3/payment-links/{% response 'body',
          'req_766b53a21ecd4117aca62dee88e3bc85', 'b64::JC5pZA==::46b',
          'when-expired', 60 %}"
        name: 5B. Get payment link
        meta:
          id: req_476f43325a894924839c9d3aa9518b3c
          created: 1707909564704
          modified: 1724950694289
          isPrivate: false
          description: >
            ## [See this request in our API
            reference](https://docs.truelayer.com/reference/get-payment-link)
          sortKey: -1690386212164
        method: GET
        headers:
          - name: Content-Type
            value: application/json
          - name: Idempotency-key
            value: "{% uuid 'v4' %}"
        authentication:
          type: bearer
          token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
            'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'never', 60 %}"
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.ENVIRONMENT_URI }}/v3/payment-links"
        name: 5A. Create a payment link
        meta:
          id: req_c9fa80bd9736407babf4276949fdd6ad
          created: 1707909564704
          modified: 1724950711607
          isPrivate: false
          description: >
            ## [See this request in our API
            reference](https://docs.truelayer.com/reference/create-payment-link)
          sortKey: -1690386212214
        method: POST
        body:
          mimeType: application/json
          text: >-
            {
            	"expires_at": "2025-07-07T07:30:00.000Z",
            	"reference": "#TT8776618",
            	"return_uri": "https://console.truelayer.com/redirect-page",
            	"payment_configuration": {
            		"amount_in_minor": 110,
            		"currency": "GBP",
            		"payment_method": {
            			"type": "bank_transfer",
            			"provider_selection": {
            				"type": "user_selected"
            			},
            			"beneficiary": {
            				"type": "merchant_account",
            				"merchant_account_id": "{% prompt 'Your Merchant Account ID', 'Insert your Merchant Account ID', '', '', false, true %}"
            			}
            		},
            		"user": {
            			"id": "f61c0ec7-0f83-414e-8e5f-aace86e0ed35",
            			"name": "Jonathan Sandbridge",
            			"email": "john@sandbridge.com",
            			"phone": "+44123456789",
            			"date_of_birth": "1992-11-28",
            			"address": {
            				"address_line1": "40 Finsbury Square",
            				"city": "London",
            				"state": "London",
            				"zip": "EC2A 1PX",
            				"country_code": "GB"
            			}
            		}
            	},
            	"product_items": [
            		{
            			"name": "Table",
            			"price_in_minor": 10,
            			"quantity": 1,
            			"url": "https://www.example.com/table"
            		},
            		{
            			"name": "Sofa",
            			"price_in_minor": 20,
            			"quantity": 1,
            			"url": "https://www.example.com/sofa"
            		},
            		{
            			"name": "Chair",
            			"price_in_minor": 20,
            			"quantity": 4,
            			"url": "https://www.example.com/chair"
            		},
            		{
            			"name": "Shelf",
            			"price_in_minor": 30,
            			"quantity": 2,
            			"url": "https://www.example.com/table/shelf"
            		},
            		{
            			"name": "Bracket",
            			"price_in_minor": 20,
            			"quantity": 4,
            			"url": "https://www.example.com/bracket"
            		},
            		{
            			"name": "Rug",
            			"price_in_minor": 10,
            			"quantity": 1,
            			"url": "https://www.example.com/rug"
            		}
            	],
            	"type": "single_payment"
            }
        headers:
          - name: Content-Type
            value: application/json
          - name: Idempotency-key
            value: "{% uuid 'v4' %}"
        authentication:
          type: bearer
          token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
            'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.ENVIRONMENT_URI }}/v3/payment-links/{% response 'body',
          'req_766b53a21ecd4117aca62dee88e3bc85', 'b64::JC5pZA==::46b',
          'when-expired', 3600 %}/payments"
        name: 5C. Get payment link payments
        meta:
          id: req_fc7d294698764947bc090f861c77fb59
          created: 1724950263207
          modified: 1724950956481
          isPrivate: false
          description: |
            ## [See this request in our API reference](https://docs.truelayer.com/reference/get-payment-link-payments)
          sortKey: -1690386212114
        method: GET
        authentication:
          type: bearer
          token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
            'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
    scripts:
      afterResponse: ""
      preRequest: ""
  - name: 8. Payments API V3 providers endpoint
    meta:
      id: fld_3cad80e9020947539f6d96f192c2cfd4
      created: 1707909564706
      modified: 1724953443630
      sortKey: -499999775
      description: ""
    children:
      - url: "{{ _.ENVIRONMENT_URI }}/v3/payments-providers/"
        name: 8C. Get a payments provider
        meta:
          id: req_386b88a2420e4eb99050e38d33743644
          created: 1707909564706
          modified: 1724953533809
          isPrivate: false
          description: |
            ## [See this request in our API reference](https://docs.truelayer.com/reference/get-payment-provider)
          sortKey: -1675074171272.75
        method: GET
        parameters:
          - name: ""
            value: ""
            disabled: false
            id: pair_7f9081057ee548d2aa940ed34e7af0b8
          - name: ""
            value: ""
            disabled: false
            id: pair_4327c28824274b07a88057caa10ae5e6
        headers:
          - name: User-Agent
            value: insomnia/2023.5.8
        authentication:
          type: bearer
          token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
            'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'never', 60 %}"
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.ENVIRONMENT_URI }}/v3/payments-providers/search"
        name: 8B. Get a list of providers - with user form in authorisation flow
        meta:
          id: req_b66b0d15f5064b0f82843a8aaa567ec6
          created: 1707909564707
          modified: 1724953516825
          isPrivate: false
          description: |
            ## [See this request in our API reference](https://docs.truelayer.com/reference/search-payment-providers)
          sortKey: -1675074171322.75
        method: POST
        body:
          mimeType: application/json
          text: |-
            {
            	"currencies": [
            		"GBP",
            		"EUR"
            	],
            	"countries": [
            		"GB",
            		"FR",
            		"ES"
            	],
            	"customer_segments": [
            		"retail"
            	],
            	"capabilities": {
            		"payments": {
            			"bank_transfer": {}
            		},
            		"mandates": {
            			"vrp_sweeping": {}
            		}
            	},
            	"authorization_flow": {
            		"configuration": {
            			"redirect": {},
            			"form": {
            				"input_types": [
            					"text",
            					"select",
            					"text_with_image"
            				]
            			}
            		}
            	}
            }
        headers:
          - name: Content-Type
            value: application/json
        authentication:
          type: bearer
          token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
            'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'never', 60 %}"
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.ENVIRONMENT_URI }}/v3/payments-providers/search"
        name: 8A. Get a list of providers
        meta:
          id: req_5fa8cbb1d64b49c4b5c1a61b48345422
          created: 1707910287142
          modified: 1724953490838
          isPrivate: false
          description: |
            ## [See this request in our API reference](https://docs.truelayer.com/reference/search-payment-providers)
          sortKey: -1675074171422.75
        method: POST
        body:
          mimeType: application/json
          text: |-
            {
            	"currencies": [
            		"GBP"
            	],
            	"countries": [
            		"GB"
            	],
            	"customer_segments": [
            		"retail"
            	],
            	"capabilities": {
            		"payments": {
            			"bank_transfer": {}
            		}
            	},
            	"authorization_flow": {
            		"configuration": {
            			"redirect": {}
            		}
            	}
            }
        headers:
          - name: Content-Type
            value: application/json
        authentication:
          type: bearer
          token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
            'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'never', 60 %}"
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
    scripts:
      afterResponse: ""
      preRequest: ""
  - name: 7. Signup+
    meta:
      id: fld_b3722408a6604b30adef2369c24fbb4e
      created: 1723737282321
      modified: 1723737306855
      sortKey: -749999887.5
      description: ""
    children:
      - name: Standard pay-in
        meta:
          id: fld_eaac71f34f884c2599583b40e85315a5
          created: 1723737402203
          modified: 1724949075968
          sortKey: -1723737402203
          description: ""
        children:
          - url: "{{ _.ENVIRONMENT_URI }}/v3/payments"
            name: 7A. Create payment
            meta:
              id: req_472d7bf191884f8a953d4a836109eab2
              created: 1723737370397
              modified: 1725551390687
              isPrivate: false
              description: >-
                ## [See this request in our API
                reference](https://docs.truelayer.com/reference/create-payment)


                ## Testing result thresholds


                When you make a identity data request to the
                `/signup-plus/payments` endpoint, the response you get depends
                on the value of the `amount_in_minor` parameter at payment
                creation. These are the possible results and thresholds:


                | Value of `amount_in_minor`      | Signup+ response | Response
                type |

                | :---------- | :----------------------------------  | ------- |

                | 0-1799      | Test user data 1: Tommie Burke.      | Success |

                | 1800-2099   | Test user data 2: Leon Gordon.       | Success |

                | 2100-2199   | Test user data 3: Isabella Allen.    | Success |

                | 2200-9999   | Range reserved for new test users. Defaults to
                test user data 3: Leon Gordon. | Success |

                | 10000-24999 | Joint accounts not supported.        | Error |

                | 25000-34999 | User data not found                  | Error |

                | >35000      | Range reserved for new scenarios. Defaults to
                User data not found error. | Error |


                [Learn more about testing Signup+ in
                Sandbox](https://docs.truelayer.com/docs/signup-sandbox).
              sortKey: -1723737389742
            method: POST
            body:
              mimeType: application/json
              text: >-
                {
                	"amount_in_minor": 10000,
                	"currency": "GBP",
                	"payment_method": {
                		"provider_selection": {
                			"type": "user_selected"
                		},
                		"filter": {
                			"countries": [
                				"GB"
                			]
                		},
                		"type": "bank_transfer",
                		"beneficiary": {
                			"type": "merchant_account",
                			"merchant_account_id": "{% prompt 'Beneficiary Merchant Account ID', 'Please get your merchant_account_id by calling the GET List Merchant Accounts endpoint. ', '', '', false, true %}",
                			"reference": "Test payment"
                		}
                	},
                	"user": {
                		"name": "Jonathan Sandbridge",
                		"email": "john@sandbridge.com",
                		"phone": "+44123456789",
                		"date_of_birth": "1992-11-28",
                		"address": {
                			"address_line1": "40 Finsbury Square",
                			"city": "London",
                			"state": "London",
                			"zip": "EC2A 1PX",
                			"country_code": "GB"
                		}
                	},
                	"related_products": {
                		"signup_plus": {}
                	}
                }
            headers:
              - name: Content-Type
                value: application/json
              - name: Idempotency-Key
                value: "{% uuid 'v4' %}"
            authentication:
              type: bearer
              token: "{% response 'body', 'req_6a1d85dcef0d45f7985245d59ef95360',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 60 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
          - url: https://payment.truelayer-sandbox.com/payments#payment_id={% response
              'body', 'req_1e42872b2edc434d8e83ac1dca72fbc5',
              'b64::JC5pZA==::46b', 'always', 60 %}&resource_token={% response
              'body', 'req_1e42872b2edc434d8e83ac1dca72fbc5',
              'b64::JC5yZXNvdXJjZV90b2tlbg==::46b', 'always', 60
              %}&return_uri={{ _.RETURN_URI }}
            name: 7B. Create HPP
            meta:
              id: req_d11c6fe0358845cfb1ed2d3eeeabba5b
              created: 1723738360000
              modified: 1724159426692
              isPrivate: false
              description: >-
                ## How to use the HPP link


                To test the HPP payment authorisation flow:


                - Click on the 'Query' tab.

                - Copy the content and open it in a browser page.


                [Learn more about the hosted payment page in our
                docs](https://docs.truelayer.com/docs/hosted-payment-page).
              sortKey: -1723737389692
            method: BLD
            body:
              mimeType: ""
              text: "\n\n"
            headers:
              - name: Content-Type
                value: text/plain
            authentication:
              type: bearer
              token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
          - url: "{{ _.ENVIRONMENT_URI }}/signup-plus/payments"
            name: 7C. Get Signup+ data for standard payment
            meta:
              id: req_6fc9ad076e674292a1cb5ff2f3f838db
              created: 1723738498092
              modified: 1725551373906
              isPrivate: false
              description: |-
                ## [See this request in our API reference](https://docs.truelayer.com/reference/getuserdatabypayment)

                ## Testing result thresholds

                When you make a identity data request to the `/signup-plus/payments` endpoint, the response you get depends on the value of the `amount_in_minor` parameter at payment creation. These are the possible results and thresholds:

                | Value of `amount_in_minor`      | Signup+ response | Response type |
                | :---------- | :----------------------------------  | ------- |
                | 0-1799      | Test user data 1: Tommie Burke.      | Success |
                | 1800-2099   | Test user data 2: Leon Gordon.       | Success |
                | 2100-2199   | Test user data 3: Isabella Allen.    | Success |
                | 2200-9999   | Range reserved for new test users. Defaults to test user data 3: Leon Gordon. | Success |
                | 10000-24999 | Joint accounts not supported.        | Error |
                | 25000-34999 | User data not found                  | Error |
                | >35000      | Range reserved for new scenarios. Defaults to User data not found error. | Error |

                [Learn more about testing Signup+ in Sandbox](https://docs.truelayer.com/docs/signup-sandbox).
              sortKey: -1723737389642
            method: GET
            parameters:
              - name: payment_id
                value: "{% prompt 'Payment ID (must have executed status)', '', '', '', false,
                  true %}"
                id: pair_93e71676aa574a5a9726980b8e2cf6f3
            authentication:
              type: bearer
              token: "{% response 'body', 'req_6a1d85dcef0d45f7985245d59ef95360',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'always', 60 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
        scripts:
          afterResponse: ""
          preRequest: ""
      - name: Pay-in with age verification
        meta:
          id: fld_6b34255d00b2489ab929dfb4ca796cc2
          created: 1723738444182
          modified: 1723738444182
          sortKey: -1696560922592.5
          description: ""
        children:
          - url: "{{ _.ENVIRONMENT_URI }}/v3/payments"
            name: 7D. Create payment
            meta:
              id: req_6bb9df3b1fdf409291d6a70011e2b869
              created: 1723738444185
              modified: 1725551491872
              isPrivate: false
              description: >-
                ## [See this request in our API
                reference](https://docs.truelayer.com/reference/create-payment)


                > ## 📘 Enabling age verification in Sandbox

                >

                > Age verification is part of our Signup+ product. You need to
                contact us to enable the feature if you want to age verification
                in sandbox.


                ## Testing result thresholds


                When you make a payment creation request that includes the
                `verification.remitter_date_of_birth` parameter, The value of
                the `amount_in_minor` parameter determines which response you
                get.


                | Value of `amount_in_minor`	| Signup+ response | Response type
                |

                | :--- | :--- | :--- |

                |<1800	| Age not legal. |	Error |

                | 1800-9999	| Identity data found.	| Success |

                | 10000-24999 |	Joint accounts not supported. |	Error |

                | >25000 |	User data not found.	| Error |


                [Learn more about testing Signup+ in
                Sandbox](https://docs.truelayer.com/docs/signup-sandbox).
              sortKey: -1723737389742
            method: POST
            body:
              mimeType: application/json
              text: >-
                {
                	"amount_in_minor": 2000,
                	"currency": "GBP",
                	"payment_method": {
                		"provider_selection": {
                			"type": "user_selected"
                		},
                		"filter": {
                			"countries": [
                				"GB"
                			]
                		},
                		"type": "bank_transfer",
                		"beneficiary": {
                			"type": "merchant_account",
                      "verification": {
                        "type": "automated",
                        "remitter_date_of_birth": true
                      },
                			"merchant_account_id": "{% prompt 'Beneficiary Merchant Account ID', 'Please get your merchant_account_id by calling the GET List Merchant Accounts endpoint. ', '', '', false, true %}",
                			"reference": "Test payment"
                		}
                	},
                	"user": {
                		"id": "f61c0ec7-0f83-414e-8e5f-aace86e0ed35",
                		"name": "Jonathan Sandbridge",
                		"email": "john@sandbridge.com",
                		"phone": "+44123456789",
                		"date_of_birth": "1992-11-28",
                		"address": {
                			"address_line1": "40 Finsbury Square",
                			"city": "London",
                			"state": "London",
                			"zip": "EC2A 1PX",
                			"country_code": "GB"
                		}
                	},
                	"related_product": {
                		"signup_plus": {}
                	}
                }
            headers:
              - name: Content-Type
                value: application/json
              - name: Idempotency-Key
                value: "{% uuid 'v4' %}"
            authentication:
              type: bearer
              token: "{% response 'body', 'req_6a1d85dcef0d45f7985245d59ef95360',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 60 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
          - url: https://payment.truelayer-sandbox.com/payments#payment_id={% response
              'body', 'req_459739c39fce414caed0d24b0eb67db1',
              'b64::JC5pZA==::46b', 'always', 60 %}&resource_token={% response
              'body', 'req_459739c39fce414caed0d24b0eb67db1',
              'b64::JC5yZXNvdXJjZV90b2tlbg==::46b', 'always', 60
              %}&return_uri={{ _.RETURN_URI }}
            name: 7E. Create HPP
            meta:
              id: req_9474a2001bd24575b847270fa00626f1
              created: 1723738444187
              modified: 1724159438452
              isPrivate: false
              description: >-
                ## How to use the HPP link


                To test the HPP payment authorisation flow:


                - Click on the 'Query' tab.

                - Copy the content and open it in a browser page.


                [Learn more about the hosted payment page in our
                docs](https://docs.truelayer.com/docs/hosted-payment-page).
              sortKey: -1723737389692
            method: BLD
            body:
              mimeType: ""
              text: "\n\n"
            headers:
              - name: Content-Type
                value: text/plain
            authentication:
              type: bearer
              token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
          - url: "{{ _.ENVIRONMENT_URI }}/signup-plus/payments"
            name: 7F. Get data for age-verified payment
            meta:
              id: req_17fff7bf409b423d9b8c6c4c8d2935cd
              created: 1724083150124
              modified: 1725551564370
              isPrivate: false
              description: |-
                ## [See this request in our API reference](https://docs.truelayer.com/reference/getuserdatabypayment)

                ## Testing result thresholds

                When you make a identity data request to the `/signup-plus/payments` endpoint, the response you get depends on the value of the `amount_in_minor` parameter at payment creation. These are the possible results and thresholds:

                | Value of `amount_in_minor`      | Signup+ response | Response type |
                | :---------- | :----------------------------------  | ------- |
                | 0-1799      | Test user data 1: Tommie Burke.      | Success |
                | 1800-2099   | Test user data 2: Leon Gordon.       | Success |
                | 2100-2199   | Test user data 3: Isabella Allen.    | Success |
                | 2200-9999   | Range reserved for new test users. Defaults to test user data 3: Leon Gordon. | Success |
                | 10000-24999 | Joint accounts not supported.        | Error |
                | 25000-34999 | User data not found                  | Error |
                | >35000      | Range reserved for new scenarios. Defaults to User data not found error. | Error |

                [Learn more about testing Signup+ in Sandbox](https://docs.truelayer.com/docs/signup-sandbox).
              sortKey: -1723737389642
            method: GET
            parameters:
              - name: payment_id
                value: "{% prompt 'Payment ID (must have executed status)', '', '', '', false,
                  true %}"
                id: pair_93e71676aa574a5a9726980b8e2cf6f3
            authentication:
              type: bearer
              token: "{% response 'body', 'req_6a1d85dcef0d45f7985245d59ef95360',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'always', 60 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
        scripts:
          afterResponse: ""
          preRequest: ""
    scripts:
      afterResponse: ""
      preRequest: ""
  - name: 3. Pay-Ins
    meta:
      id: fld_cd9b0961631c4408a220668315c6572c
      created: 1757511721996
      modified: 1757511798816
      sortKey: -1635910952791.5918
      description: ""
    children:
      - name: Create a payment to an External Account
        meta:
          id: fld_09e017c9dfd8425ab6d301b260f417d1
          created: 1757511721999
          modified: 1757511721999
          sortKey: -1635952895766
          description: ""
        children:
          - name: Pay-in with Hosted Payment Page
            meta:
              id: fld_e582b2294130478eb3dde893ae85efaf
              created: 1757511721999
              modified: 1757511721999
              sortKey: -1647882182551
              description: ""
            children:
              - url: https://payment.truelayer-sandbox.com/payments#payment_id={% response
                  'body', 'req_e31912011730437390c77bfd336d1c28',
                  'b64::JC5pZA==::46b', 'never', 60 %}&resource_token={%
                  response 'body', 'req_e31912011730437390c77bfd336d1c28',
                  'b64::JC5yZXNvdXJjZV90b2tlbg==::46b', 'never', 60
                  %}&return_uri={{ _.RETURN_URI }}
                name: Create HPP
                meta:
                  id: req_dabc8611162b4c22ac3c9f280746fd95
                  created: 1757511722001
                  modified: 1757512260970
                  isPrivate: false
                  description: |-
                    How to create and use the HPP url: 
                    - Click on the 'Query' tab
                    - Copy the content and open it in a browser page"

                    See docs: https://docs.truelayer.com/docs/hosted-payment-page-for-payments-v3
                  sortKey: -1612882494348.3125
                method: BLD
                body:
                  mimeType: ""
                  text: "\n\n"
                headers:
                  - name: Content-Type
                    value: text/plain
                authentication:
                  type: bearer
                  token: "{% response 'body', 'req_f8313a4d44204235b68efc08bb269230',
                    'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
                scripts:
                  preRequest: ""
                  afterResponse: ""
                settings:
                  renderRequestBody: true
                  encodeUrl: true
                  followRedirects: global
                  cookies:
                    send: true
                    store: true
                  rebuildPath: true
              - url: "{{ _.ENVIRONMENT_URI }}/v3/payments"
                name: Create Payment - Preselected sandbox provider
                meta:
                  id: req_0b55c51a4f584f0dbdb3ce490a422ef6
                  created: 1757511722005
                  modified: 1757517424844
                  isPrivate: false
                  description: >
                    Use the GET \merchant-accounts end point from the Merchants
                    API to get your Account ID
                  sortKey: -1612882494248.3125
                method: POST
                body:
                  mimeType: application/json
                  text: |-
                    {
                    	"amount_in_minor": 1,
                    	"currency": "GBP",
                    	"payment_method": {
                    		"type": "bank_transfer",
                    		"provider_selection": {
                    			"type": "preselected",
                    			"provider_id": "mock-payments-gb-redirect",
                    			"scheme_selection": {
                    				"type": "instant_preferred"
                    			},
                    			"remitter": {
                    				"account_identifier": {
                    					"type": "sort_code_account_number",
                    					"sort_code": "123456",
                    					"account_number": "12345678"
                    				},
                    				"account_holder_name": "Optional Remitter object"
                    			}
                    		},
                    		"beneficiary": {
                    			"type": "external_account",
                    			"account_holder_name": "Federico Casali",
                    			"reference": "Test Reference",
                    			"account_identifier": {
                    				"type": "sort_code_account_number",
                    				"sort_code": "123456",
                    				"account_number": "12345678"
                    			}
                    		}
                    	},
                    	"metadata": {
                    		"newKey": "Optional Metadata"
                    	},
                    	"user": {
                    		"id": "f61c0ec7-0f83-414e-8e5f-aace86e0ed35",
                    		"name": "Jonathan Sandbridge",
                    		"email": "john@sandbridge.com"
                    	}
                    }
                headers:
                  - name: Content-Type
                    value: application/json
                  - name: Idempotency-Key
                    value: "{% uuid 'v4' %}"
                authentication:
                  type: bearer
                  token: "{% response 'body', 'req_87fee500a28149e89155da1b0d9e5d36',
                    'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'never', 60 %}"
                scripts:
                  preRequest: ""
                  afterResponse: ""
                settings:
                  renderRequestBody: true
                  encodeUrl: true
                  followRedirects: global
                  cookies:
                    send: true
                    store: true
                  rebuildPath: true
              - url: "{{ _.ENVIRONMENT_URI }}/v3/payments"
                name: Create Payment
                meta:
                  id: req_3d7108799c8c4e33b4686d244dac89f6
                  created: 1757511722005
                  modified: 1757512062147
                  isPrivate: false
                  description: ""
                  sortKey: -1612882494398.3125
                method: POST
                body:
                  mimeType: application/json
                  text: |-
                    {
                    	"amount_in_minor": 1,
                    	"currency": "GBP",
                    	"payment_method": {
                    		"provider_selection": {
                    			"type": "user_selected"
                    		},
                    		"type": "bank_transfer",
                    		"beneficiary": {
                    			"type": "external_account",
                    			"account_holder_name": "John Sandbridge",
                    			"reference": "Test Reference",
                    			"account_identifier": {
                    				"type": "sort_code_account_number",
                    				"sort_code": "040668",
                    				"account_number": "00000871"
                    			}
                    		},
                    		"metadata": {
                    			"newKey": "Optional Metadata"
                    		}
                    	},
                    	"user": {
                    		"name": "John Sandbridge",
                    		"email": "john@sandbridge.com",
                    		"phone": "+44123456789"
                    	}
                    }
                headers:
                  - name: Content-Type
                    value: application/json
                  - name: Idempotency-Key
                    value: "{% uuid 'v4' %}"
                authentication:
                  type: bearer
                  token: "{% response 'body', 'req_f8313a4d44204235b68efc08bb269230',
                    'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
                scripts:
                  preRequest: ""
                  afterResponse: ""
                settings:
                  renderRequestBody: true
                  encodeUrl: true
                  followRedirects: global
                  cookies:
                    send: true
                    store: true
                  rebuildPath: true
              - url: https://payment.truelayer-sandbox.com/payments#payment_id={% response
                  'body', 'req_5e7112df808747b1964935ac7680d2fe',
                  'b64::JC5pZA==::46b', 'never', 60 %}&resource_token={%
                  response 'body', 'req_5e7112df808747b1964935ac7680d2fe',
                  'b64::JC5yZXNvdXJjZV90b2tlbg==::46b', 'never', 60
                  %}&return_uri={{ _.RETURN_URI }}
                name: Create HPP - Preselected sandbox provider
                meta:
                  id: req_28efee3138e844c6b8e537cacc3fcf5f
                  created: 1757511722006
                  modified: 1757511722006
                  isPrivate: false
                  description: |-
                    How to create and use the HPP url: 
                    - Click on the 'Query' tab
                    - Copy the content and open it in a browser page"

                    See docs: https://docs.truelayer.com/docs/hosted-payment-page-for-payments-v3
                  sortKey: -1612882494148.3125
                method: BLD
                body:
                  mimeType: ""
                  text: "\n\n"
                headers:
                  - name: Content-Type
                    value: text/plain
                authentication:
                  type: bearer
                  token: "{% response 'body', 'req_42dac02e96cd4c4180227e29310e56a3',
                    'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
                scripts:
                  preRequest: ""
                  afterResponse: ""
                settings:
                  renderRequestBody: true
                  encodeUrl: true
                  followRedirects: global
                  cookies:
                    send: true
                    store: true
                  rebuildPath: true
            scripts:
              afterResponse: ""
              preRequest: ""
          - url: "{{ _.ENVIRONMENT_URI }}/v3/payments"
            name: Create EXT Payment with hosted_page object
            meta:
              id: req_e78207c4af854b02b83429b741c85a02
              created: 1757517385049
              modified: 1757517471487
              isPrivate: false
              description: ""
              sortKey: -1647882182651
            method: POST
            body:
              mimeType: application/json
              text: |-
                {
                	"amount_in_minor": 1,
                	"currency": "GBP",
                	"payment_method": {
                		"provider_selection": {
                			"type": "user_selected"
                		},
                		"type": "bank_transfer",
                		"beneficiary": {
                			"type": "external_account",
                			"account_holder_name": "John Sandbridge",
                			"reference": "Test Reference",
                			"account_identifier": {
                				"type": "sort_code_account_number",
                				"sort_code": "040668",
                				"account_number": "00000871"
                			}
                		},
                		"metadata": {
                			"newKey": "Optional Metadata"
                		}
                	},
                	"hosted_page": {
                    "country_code": "GB",
                    "return_uri": "http://localhost:8080/redirect.php",
                    "language_code": "en"
                  },
                	"user": {
                		"name": "John Sandbridge",
                		"email": "john@sandbridge.com",
                		"phone": "+44123456789"
                	}
                }
            headers:
              - name: Content-Type
                value: application/json
              - name: Idempotency-Key
                value: "{% uuid 'v4' %}"
            authentication:
              type: bearer
              token: "{% response 'body', 'req_f8313a4d44204235b68efc08bb269230',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
          - url: "{{ _.ENVIRONMENT_URI }}/v3/payments"
            name: Create EXT Payment - Preselected sandbox with hosted_page obj
            meta:
              id: req_f5bc3024bd624f6b8e801adf852fdec4
              created: 1757517442779
              modified: 1757517466286
              isPrivate: false
              description: >
                Use the GET \merchant-accounts end point from the Merchants API
                to get your Account ID
              sortKey: -1647882182601
            method: POST
            body:
              mimeType: application/json
              text: |-
                {
                	"amount_in_minor": 1,
                	"currency": "GBP",
                	"payment_method": {
                		"type": "bank_transfer",
                		"provider_selection": {
                			"type": "preselected",
                			"provider_id": "mock-payments-gb-redirect",
                			"scheme_selection": {
                				"type": "instant_preferred"
                			},
                			"remitter": {
                				"account_identifier": {
                					"type": "sort_code_account_number",
                					"sort_code": "123456",
                					"account_number": "12345678"
                				},
                				"account_holder_name": "Optional Remitter object"
                			}
                		},
                		"beneficiary": {
                			"type": "external_account",
                			"account_holder_name": "Federico Casali",
                			"reference": "Test Reference",
                			"account_identifier": {
                				"type": "sort_code_account_number",
                				"sort_code": "123456",
                				"account_number": "12345678"
                			}
                		}
                	},
                	"metadata": {
                		"newKey": "Optional Metadata"
                	},
                	"hosted_page": {
                    "country_code": "GB",
                    "return_uri": "http://localhost:8080/redirect.php",
                    "language_code": "en"
                  },
                	"user": {
                		"id": "f61c0ec7-0f83-414e-8e5f-aace86e0ed35",
                		"name": "Jonathan Sandbridge",
                		"email": "john@sandbridge.com"
                	}
                }
            headers:
              - name: Content-Type
                value: application/json
              - name: Idempotency-Key
                value: "{% uuid 'v4' %}"
            authentication:
              type: bearer
              token: "{% response 'body', 'req_f8313a4d44204235b68efc08bb269230',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'never', 60 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
        scripts:
          afterResponse: ""
          preRequest: ""
      - name: Pay-In to Merchant Account
        meta:
          id: fld_a6d41246a7be4c31b30d26be3b9afa76
          created: 1757511722006
          modified: 1757511722006
          sortKey: -1647883794652
          description: ""
        children:
          - name: Pay-in with Hosted Payment Page
            meta:
              id: fld_6bde19ac291448ff927bc5c43e997fd5
              created: 1757511722007
              modified: 1757511722007
              sortKey: -1647885020011
              description: ""
            children:
              - url: https://payment.truelayer-sandbox.com/payments#payment_id={% response
                  'body', 'req_402e06ca6b7f4056982d3f311041ab93',
                  'b64::JC5pZA==::46b', 'never', 60 %}&resource_token={%
                  response 'body', 'req_402e06ca6b7f4056982d3f311041ab93',
                  'b64::JC5yZXNvdXJjZV90b2tlbg==::46b', 'never', 60
                  %}&return_uri={{ _.RETURN_URI }}
                name: Create HPP
                meta:
                  id: req_7b96ecf95041485fa6a204220c82aca9
                  created: 1757511722008
                  modified: 1757511916963
                  isPrivate: false
                  description: |-
                    How to create and use the HPP url: 
                    - Click on the 'Query' tab
                    - Copy the content and open it in a browser page"

                    See docs: https://docs.truelayer.com/docs/hosted-payment-page-for-payments-v3
                  sortKey: -1647883820553.5
                method: BLD
                body:
                  mimeType: ""
                  text: "\n\n"
                headers:
                  - name: Content-Type
                    value: text/plain
                authentication:
                  type: bearer
                  token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
                    'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
                scripts:
                  preRequest: ""
                  afterResponse: ""
                settings:
                  renderRequestBody: true
                  encodeUrl: true
                  followRedirects: global
                  cookies:
                    send: true
                    store: true
                  rebuildPath: true
              - url: "{{ _.ENVIRONMENT_URI }}/v3/payments"
                name: Create Payment
                meta:
                  id: req_fe10c2aed7fc4b6a9ce919bd24d41707
                  created: 1757511722008
                  modified: 1757511851816
                  isPrivate: false
                  description: ""
                  sortKey: -1647883846405
                method: POST
                body:
                  mimeType: application/json
                  text: >-
                    {
                    	"amount_in_minor": 1,
                    	"currency": "GBP",
                    	"payment_method": {
                    		"provider_selection": {
                    			"type": "user_selected"
                    		},
                    		"filter": {
                    			"countries": [
                    				"GB"
                    			]
                    		},
                    		"type": "bank_transfer",
                    		"beneficiary": {
                    			"type": "merchant_account",
                    			"merchant_account_id": "{% prompt 'Beneficiary Merchant Account ID', 'Please get your merchant_account_id by calling the GET List Merchant Accounts endpoint. ', '', '', false, true %}",
                    			"reference": "Test Reference"
                    		}
                    	},
                    	"metadata": {
                    		"newKey": "Optional Metadata"
                    	},
                    	"user": {
                    		"id": "f61c0ec7-0f83-414e-8e5f-aace86e0ed35",
                    		"name": "Jonathan Sandbridge",
                    		"email": "john@sandbridge.com",
                    		"phone": "+44123456789",
                    		"date_of_birth": "1992-11-28",
                    		"address": {
                    			"address_line1": "40 Finsbury Square",
                    			"city": "London",
                    			"state": "London",
                    			"zip": "EC2A 1PX",
                    			"country_code": "GB"
                    		}
                    	}
                    }
                headers:
                  - name: Content-Type
                    value: application/json
                  - name: Idempotency-Key
                    value: "{% uuid 'v4' %}"
                authentication:
                  type: bearer
                  token: "{% response 'body', 'req_f8313a4d44204235b68efc08bb269230',
                    'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'never', 60 %}"
                scripts:
                  preRequest: ""
                  afterResponse: ""
                settings:
                  renderRequestBody: true
                  encodeUrl: true
                  followRedirects: global
                  cookies:
                    send: true
                    store: true
                  rebuildPath: true
              - url: "{{ _.ENVIRONMENT_URI }}/v3/payments"
                name: Create Payment - Preselected sandbox provider
                meta:
                  id: req_f189f3f51a8a49ef9fefcb46853aa9df
                  created: 1757511722009
                  modified: 1757511995989
                  isPrivate: false
                  description: >
                    Use the GET \merchant-accounts end point from the Merchants
                    API to get your Account ID
                  sortKey: -1647883820453.5
                method: POST
                body:
                  mimeType: application/json
                  text: >-
                    {
                    	"amount_in_minor": 1,
                    	"currency": "GBP",
                    	"payment_method": {
                    		"type": "bank_transfer",
                    		"provider_selection": {
                    			"type": "preselected",
                    			"provider_id": "mock-payments-gb-redirect",
                    			"scheme_selection": {
                    				"type": "instant_preferred"
                    			},
                    			"remitter": {
                    				"account_identifier": {
                    					"type": "sort_code_account_number",
                    					"sort_code": "123456",
                    					"account_number": "12345678"
                    				},
                    				"account_holder_name": "Optional Remitter object"
                    			}
                    		},
                    		"beneficiary": {
                    			"type": "merchant_account",
                    			"account_holder_name": "Merchant Account name",
                    			"merchant_account_id": "{% prompt 'Beneficiary Merchant Account ID', 'Please get your merchant_account_id by calling the GET List Merchant Accounts endpoint. ', '', '', false, true %}",
                    			"reference": "Test Reference"
                    		}
                    	},
                    	"metadata": {
                    		"newKey": "Optional Metadata"
                    	},
                    	"user": {
                    		"id": "f61c0ec7-0f83-414e-8e5f-aace86e0ed35",
                    		"name": "Jonathan Sandbridge",
                    		"email": "john@sandbridge.com",
                    		"phone": "+44123456789",
                    		"date_of_birth": "1992-11-28",
                    		"address": {
                    			"address_line1": "40 Finsbury Square",
                    			"city": "London",
                    			"state": "London",
                    			"zip": "EC2A 1PX",
                    			"country_code": "GB"
                    		}
                    	}
                    }
                headers:
                  - name: Content-Type
                    value: application/json
                  - name: Idempotency-Key
                    value: "{% uuid 'v4' %}"
                authentication:
                  type: bearer
                  token: "{% response 'body', 'req_f8313a4d44204235b68efc08bb269230',
                    'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'never', 60 %}"
                scripts:
                  preRequest: ""
                  afterResponse: ""
                settings:
                  renderRequestBody: true
                  encodeUrl: true
                  followRedirects: global
                  cookies:
                    send: true
                    store: true
                  rebuildPath: true
              - url: https://payment.truelayer-sandbox.com/payments#payment_id={% response
                  'body', 'req_377a07d8673048e8a0a5f527ebd054bc',
                  'b64::JC5pZA==::46b', 'never', 60 %}&resource_token={%
                  response 'body', 'req_377a07d8673048e8a0a5f527ebd054bc',
                  'b64::JC5yZXNvdXJjZV90b2tlbg==::46b', 'never', 60
                  %}&return_uri={{ _.RETURN_URI }}
                name: Create HPP - Preselected sandbox provider
                meta:
                  id: req_4e52f6b587224515a0d9631c15a5b964
                  created: 1757511722010
                  modified: 1757512040917
                  isPrivate: false
                  description: |-
                    How to create and use the HPP url: 
                    - Click on the 'Query' tab
                    - Copy the content and open it in a browser page"

                    See docs: https://docs.truelayer.com/docs/hosted-payment-page-for-payments-v3
                  sortKey: -1647883820353.5
                method: BLD
                body:
                  mimeType: ""
                  text: "\n\n"
                headers:
                  - name: Content-Type
                    value: text/plain
                authentication:
                  type: bearer
                  token: "{% response 'body', 'req_bd2c0a4121704752a13491d87728f8c9',
                    'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
                scripts:
                  preRequest: ""
                  afterResponse: ""
                settings:
                  renderRequestBody: true
                  encodeUrl: true
                  followRedirects: global
                  cookies:
                    send: true
                    store: true
                  rebuildPath: true
            scripts:
              afterResponse: ""
              preRequest: ""
          - url: "{{ _.ENVIRONMENT_URI }}/v3/payments"
            name: Create Payment with hosted_page object
            meta:
              id: req_8f4f39a3486e4e919ac36566ad0dc1d8
              created: 1757517231510
              modified: 1757518426865
              isPrivate: false
              description: ""
              sortKey: -1647885020111
            method: POST
            body:
              mimeType: application/json
              text: >-
                {
                	"amount_in_minor": 1,
                	"currency": "GBP",
                	"payment_method": {
                		"provider_selection": {
                			"type": "user_selected"
                		},
                		"filter": {
                			"countries": [
                				"GB"
                			]
                		},
                		"type": "bank_transfer",
                		"beneficiary": {
                			"type": "merchant_account",
                			"merchant_account_id": "{% prompt 'Beneficiary Merchant Account ID', 'Please get your merchant_account_id by calling the GET List Merchant Accounts endpoint. ', '', '', false, true %}",
                			"reference": "Test Reference"
                		}
                	},
                	"metadata": {
                		"newKey": "Optional Metadata"
                	},
                	 "hosted_page": {
                    "country_code": "GB",
                    "return_uri": "http://localhost:8080/redirect.php",
                    "language_code": "en"
                  },
                	"user": {
                		"id": "f61c0ec7-0f83-414e-8e5f-aace86e0ed35",
                		"name": "Jonathan Sandbridge",
                		"email": "john@sandbridge.com",
                		"phone": "+44123456789",
                		"date_of_birth": "1992-11-28",
                		"address": {
                			"address_line1": "40 Finsbury Square",
                			"city": "London",
                			"state": "London",
                			"zip": "EC2A 1PX",
                			"country_code": "GB"
                		}
                	}
                }
            headers:
              - name: Content-Type
                value: application/json
              - name: Idempotency-Key
                value: "{% uuid 'v4' %}"
            authentication:
              type: bearer
              token: "{% response 'body', 'req_f8313a4d44204235b68efc08bb269230',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'never', 60 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
          - url: "{{ _.ENVIRONMENT_URI }}/v3/payments"
            name: Create Payment - Preselected sandbox with hosted_page obj
            meta:
              id: req_feaa1ccd20c943abb1270b6c56a6bd5f
              created: 1757517303155
              modified: 1757518443173
              isPrivate: false
              description: >
                Use the GET \merchant-accounts end point from the Merchants API
                to get your Account ID
              sortKey: -1647885020061
            method: POST
            body:
              mimeType: application/json
              text: >-
                {
                	"amount_in_minor": 1,
                	"currency": "GBP",
                	"payment_method": {
                		"type": "bank_transfer",
                		"provider_selection": {
                			"type": "preselected",
                			"provider_id": "mock-payments-gb-redirect",
                			"scheme_selection": {
                				"type": "instant_preferred"
                			},
                			"remitter": {
                				"account_identifier": {
                					"type": "sort_code_account_number",
                					"sort_code": "123456",
                					"account_number": "12345678"
                				},
                				"account_holder_name": "Optional Remitter object"
                			}
                		},
                		"beneficiary": {
                			"type": "merchant_account",
                			"account_holder_name": "Merchant Account name",
                			"merchant_account_id": "{% prompt 'Beneficiary Merchant Account ID', 'Please get your merchant_account_id by calling the GET List Merchant Accounts endpoint. ', '', '', false, true %}",
                			"reference": "Test Reference"
                		}
                	},
                	"metadata": {
                		"newKey": "Optional Metadata"
                	},
                	 "hosted_page": {
                    "country_code": "GB",
                    "return_uri": "http://localhost:8080/redirect.php",
                    "language_code": "en"
                  },
                	"user": {
                		"id": "f61c0ec7-0f83-414e-8e5f-aace86e0ed35",
                		"name": "Jonathan Sandbridge",
                		"email": "john@sandbridge.com",
                		"phone": "+44123456789",
                		"date_of_birth": "1992-11-28",
                		"address": {
                			"address_line1": "40 Finsbury Square",
                			"city": "London",
                			"state": "London",
                			"zip": "EC2A 1PX",
                			"country_code": "GB"
                		}
                	}
                }
            headers:
              - name: Content-Type
                value: application/json
              - name: Idempotency-Key
                value: "{% uuid 'v4' %}"
            authentication:
              type: bearer
              token: "{% response 'body', 'req_f8313a4d44204235b68efc08bb269230',
                'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'never', 60 %}"
            scripts:
              preRequest: ""
              afterResponse: ""
            settings:
              renderRequestBody: true
              encodeUrl: true
              followRedirects: global
              cookies:
                send: true
                store: true
              rebuildPath: true
        scripts:
          afterResponse: ""
          preRequest: ""
      - url: "{{ _.ENVIRONMENT_URI }}/v3/payments/{% prompt 'Payment ID', '', '', '',
          false, true %}"
        name: Get Payment status
        meta:
          id: req_80af2d24100846c19e8e9ad40f66b83a
          created: 1757511722011
          modified: 1757511816876
          isPrivate: false
          description: ""
          sortKey: -1647883794683.25
        method: GET
        authentication:
          type: bearer
          token: "{% response 'body', 'req_f8313a4d44204235b68efc08bb269230',
            'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.ENVIRONMENT_URI }}/v3/merchant-accounts/signup-plus/payments/{%
          prompt 'Payment ID', 'Insert PaymentID', '', '', false, true %}"
        name: Get Signup plus
        meta:
          id: req_cb2d5355c4274c429a7572a8d0cc62de
          created: 1757511722011
          modified: 1757511824537
          isPrivate: false
          description: ""
          sortKey: -1647883794680.125
        method: GET
        authentication:
          type: bearer
          token: "{% response 'body', 'req_2bb13fc53c654497b995e7c3a5b13553',
            'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.ENVIRONMENT_URI }}/v3/payments/{% prompt 'Payment ID', '', '', '',
          false, true %}/actions/cancel"
        name: Cancel Payment
        meta:
          id: req_fb688f1a37f84e91925734b3af6338dc
          created: 1757511722012
          modified: 1757511829731
          isPrivate: false
          description: ""
          sortKey: -1647883794677
        method: POST
        body:
          mimeType: application/json
          text: ""
        headers:
          - name: Content-Type
            value: application/json
          - name: Idempotency-Key
            value: "{% uuid 'v4' %}"
        authentication:
          type: bearer
          token: "{% response 'body', 'req_f8313a4d44204235b68efc08bb269230',
            'b64::JC5hY2Nlc3NfdG9rZW4=::46b', 'when-expired', 3600 %}"
        scripts:
          preRequest: ""
          afterResponse: ""
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
    scripts:
      afterResponse: ""
      preRequest: ""
cookieJar:
  name: Default Jar
  meta:
    id: jar_42201103eb384e009a6f4d856a7e6408
    created: 1707909564660
    modified: 1707909564660
environments:
  name: Base Environment
  meta:
    id: env_5eff5efdbfdf4377a1e284c9cdeaff1a
    created: 1707909564656
    modified: 1707909564656
    isPrivate: false
  subEnvironments:
    - name: Production Sample Env
      meta:
        id: env_2b04e3e9180745029078df972bb8fa71
        created: 1707909564657
        modified: 1707909564657
        isPrivate: false
        sortKey: 1690384195128
    - name: Sandbox Sample Env
      meta:
        id: env_f44444db676347bc879dba57b8f37401
        created: 1707909564658
        modified: 1725445953605
        isPrivate: false
        sortKey: 1690384196662
      data:
        ENVIRONMENT_URI: https://api.truelayer-sandbox.com
        AUTH_SERVER_URI: https://auth.truelayer-sandbox.com
        REQUIRE_JWS: true
        CLIENT_ID: <Your sandbox client_id>
        CLIENT_SECRET: <This was generated when you created your Console account>
        CERTIFICATE_ID: <KID from Console>
        PRIVATE_KEY: <Your private key>
        RETURN_URI: <Return_URI - make sure you register this in Console!>
